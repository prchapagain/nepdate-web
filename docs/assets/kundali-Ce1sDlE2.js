import{r as m,j as e,i as lt,T as ot,u as dt,k as it,l as ct,c as xt}from"./vendor-react-Bt5jsM_t.js";import{t as M,g as mt,a as ht,N as t,b,c as se,G as ut,f as gt,d as bt,e as ee,h as B,i as W,R as pt,j as Ne,k as _e,l as yt,m as ke,r as ft,n as jt}from"./bikram-C-wTWGk0.js";import{n as me,T as ie,L as Nt,a as Ke,X as we,S as kt,M as vt,C as he,P as Re}from"./data-AHl0rTh7.js";import{t as St}from"./vendor-utils-y-iLWhYP.js";const wt=me.find(a=>a.romanization.toLowerCase()==="kathmandu"),ce=wt??me[0],Dt=({label:a,children:l,...n})=>e.jsxs("div",{className:"relative w-full",children:[e.jsx("select",{...n,className:"w-full appearance-none bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:focus:bg-blue-400 dark:focus:border-blue-400",children:l}),e.jsx("label",{className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:a}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx(he,{className:"w-4 h-4"})})]}),Ct=()=>{const a=dt();return m.useEffect(()=>{const l=setTimeout(()=>{try{a.invalidateSize()}catch{}},150);return()=>clearTimeout(l)},[a]),null},Mt=({onClose:a,onLocationSelect:l,initialPosition:n})=>{const[d,c]=m.useState(n),h=()=>(it({click(o){c([o.latlng.lat,o.latlng.lng])}}),e.jsx(ct,{position:d})),r=()=>{l(d[0],d[1]),a()};return e.jsx("div",{style:{position:"fixed",inset:0,top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center",padding:12},children:e.jsxs("div",{style:{width:"95%",maxWidth:960,height:620,display:"flex",flexDirection:"column",borderRadius:12,overflow:"hidden",background:void 0},className:"bg-slate-50 dark:bg-gray-800 dark:text-gray-200 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center border-b p-3 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:t.selectOnMap}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100",children:e.jsx(we,{className:"w-5 h-5"})})]}),e.jsx("div",{style:{flex:1,minHeight:420,display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:e.jsxs(lt,{center:n,zoom:7,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},children:[e.jsx(ot,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(Ct,{}),e.jsx(h,{})]},`${n[0]}-${n[1]}`)}),e.jsxs("div",{className:"border-t p-3 flex justify-between items-center dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Lat: ",d[0].toFixed(4),", Lon: ",d[1].toFixed(4)]}),e.jsx("button",{onClick:r,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 dark:bg-blue-400 dark:text-blue-900 dark:hover:bg-blue-500 dark:hover:text-white",children:t.selectLocation})]})]})})},Fe=({children:a})=>e.jsx("div",{className:"grid grid-cols-3 border border-gray-300 rounded-md overflow-hidden divide-x divide-gray-300 focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500 dark:border-gray-600 dark:divide-gray-600 dark:focus-within:border-blue-400 dark:focus-within:ring-blue-400",children:a}),te=({label:a,children:l,...n})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute top-1 left-2 text-xs text-gray-500 z-10 dark:text-gray-400",children:a}),e.jsx("select",{...n,className:"relative w-full appearance-none bg-gray-100 pt-5 pb-1.5 px-2 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 z-0 dark:bg-gray-700 dark:text-gray-200 dark:focus:bg-gray-600",children:l}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 z-10 dark:text-gray-300",children:e.jsx(he,{className:"w-4 h-4"})})]}),It=({label:a,type:l="number",...n})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute top-1 left-2 text-xs text-gray-500 z-10 dark:text-gray-400",children:a}),e.jsx("input",{...n,type:l,className:"relative w-full bg-gray-100 pt-5 pb-1.5 px-2 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 z-0 dark:bg-gray-700 dark:text-gray-200 dark:focus:bg-gray-600"})]}),At=1900,Pt=2150,Lt=1960,Tt=2210,Ee=m.forwardRef(({onCalculate:a,isLoading:l,hideSubmitButton:n=!1,defaultValues:d},c)=>{const h=new Date,r=M(h),[o,g]=m.useState(d?.name||"प्रयोगकर्ता"),[i,w]=m.useState(d?.dateSystem||"BS"),[x,f]=m.useState(!1),[S,v]=m.useState("search"),[k,p]=m.useState(h.getFullYear()),[z,re]=m.useState(h.getMonth()+1),[_,y]=m.useState(h.getDate()),[j,N]=m.useState(d?.bsYear||r.year),[D,I]=m.useState(d?.bsMonth||r.monthIndex+1),[A,Z]=m.useState(d?.bsDay||r.day),C=m.useRef(null),[K,P]=m.useState(!1),[F,R]=m.useState(null),[O,ne]=m.useState(d?.period||"PM"),[Y,ue]=m.useState(d?.hour||4),[le,L]=m.useState(d?.minute||15),[De,Oe]=m.useState(d?.second||0),oe=d?.location||ce,[X,Ce]=m.useState(oe),[H,ge]=m.useState(oe.latitude),[V,be]=m.useState(oe.longitude),[pe,J]=m.useState(oe.zoneId),[Ye,Me]=m.useState(!1),[de,He]=m.useState(""),Ve=m.useMemo(()=>{const s=de.trim().toLowerCase();return s?me.filter(u=>u.romanization.toLowerCase().includes(s)||u.name.includes(de.trim())):me},[de]);m.useEffect(()=>{if(!(typeof H!="number"||typeof V!="number"||isNaN(H)||isNaN(V)))try{const s=St(H,V),u=ie.some(E=>E.zoneId===s);J(u?s:ce?.zoneId??"Asia/Kathmandu")}catch{J(ce?.zoneId??"Asia/Kathmandu")}},[H,V,ce?.zoneId]);const qe=m.useMemo(()=>Array.from({length:12},(s,u)=>u+1),[]),Ie=m.useMemo(()=>Array.from({length:60},(s,u)=>u),[]),q=m.useMemo(()=>{const u=(i==="BS"?j:k)||(i==="BS"?r.year:h.getFullYear());return i==="BS"?mt(u,D-1).totalDays:ht(u,z)},[i,j,D,k,z,r.year,h]);m.useEffect(()=>{i==="BS"&&A>q&&Z(q),i==="AD"&&_>q&&y(q)},[q,i,A,_]);const Ge=s=>{const u=s.target.value,T=gt(u).replace(/[^0-9]/g,"");if(T===""){i==="BS"?N(null):p(null);return}const G=parseInt(T,10);isNaN(G)||(i==="BS"?N(G):p(G))},Ue=()=>{const s=i==="BS"?j:k;C.current=s,i==="BS"?N(null):p(null)},We=()=>{const s=i==="BS"?j:k;(s===null||String(s).trim()==="")&&(i==="BS"?N(C.current):p(C.current))},ye=()=>{const s=new Date,u=M(s);p(s.getFullYear()),re(s.getMonth()+1),y(s.getDate()),N(u.year),I(u.monthIndex+1),Z(u.day)},Ze=s=>{Ce(s),ge(s.latitude),be(s.longitude),J(s.zoneId),f(!1)},Xe=(s,u)=>{ge(s),be(u),Ce({name:`${s.toFixed(4)}, ${u.toFixed(4)}`,romanization:"Manual Selection",latitude:s,longitude:u,zoneId:pe,offset:ie.find(E=>E.zoneId===pe)?.offset??5.75}),f(!1)},Ae=()=>{let s=j,u=k;if(s===null&&u===null&&(ye(),s=r.year,u=h.getFullYear()),(i==="BS"?s:k)===null)return null;const T=Q=>Q.toString().padStart(2,"0");let G=u??h.getFullYear(),Le=z,Te=_;if(i==="BS"){const Q=s??r.year,je=bt(Q,D-1,A);G=je.getFullYear(),Le=je.getMonth()+1,Te=je.getDate()}let fe=Y;O==="PM"&&Y<12&&(fe+=12),O==="AM"&&Y===12&&(fe=0);const at=`${G}-${T(Le)}-${T(Te)}T${T(fe)}:${T(le)}:${T(De)}`,st=X.latitude,rt=X.longitude,$e=X.zoneId,Be=ie.find(Q=>Q.zoneId===$e),nt=Be?Be.offset:5.75;return{name:o,datetime:at,latitude:st,longitude:rt,zoneId:$e,offset:nt,options:{zodiac:"SIDEREAL",ayanamsa:"LAHIRI",houseSystem:"WHOLE_SIGN",divisionalCharts:[9],dashaSystem:"VIMSHOTTARI"}}},Je=()=>{const s=i==="BS"?j:k;if(s===null||String(s).length<4)return!1;const[u,E]=i==="BS"?[Lt,Tt]:[At,Pt];return!(s<u||s>E)},Pe=()=>new Promise(s=>{Je()?s(Ae()):(ye(),P(!0),R(()=>s))});m.useImperativeHandle(c,()=>({validateAndGetData:Pe}));const Qe=()=>{P(!1);const s=Ae();F&&(F(s),R(null))},et=()=>{P(!1),F&&(F(null),R(null))},tt=async s=>{s.preventDefault();const u=await Pe();u&&a(u)};return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:tt,className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"name",value:o,onChange:s=>g(s.target.value),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"}),e.jsx("label",{htmlFor:"name",className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:t.name})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-700 rounded-md",children:[e.jsx("button",{type:"button",onClick:()=>{w("BS")},className:`px-4 py-1 text-sm rounded ${i==="BS"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:t.bs}),e.jsx("button",{type:"button",onClick:()=>{w("AD")},className:`px-4 py-1 text-sm rounded ${i==="AD"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:t.ad})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(Fe,{children:[e.jsx(It,{label:t.year,value:i==="BS"?b(j??""):k??"",onChange:Ge,onFocus:Ue,onBlur:We,type:"tel",inputMode:"numeric",autoComplete:"off"}),e.jsx(te,{label:t.month,value:i==="BS"?D:z,onChange:s=>i==="BS"?I(Number(s.target.value)):re(Number(s.target.value)),children:Array.from({length:12},(s,u)=>e.jsx("option",{value:u+1,children:i==="BS"?se[u]:ut[u]},u+1))}),e.jsx(te,{label:t.day,value:i==="BS"?A:_,onChange:s=>i==="BS"?Z(Number(s.target.value)):y(Number(s.target.value)),children:Array.from({length:q},(s,u)=>e.jsx("option",{value:u+1,children:b(u+1)},u+1))})]})}),e.jsx("button",{type:"button",onClick:ye,className:"px-3 py-2 text-sm bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500","aria-label":t.resetToToday,children:t.resetToToday})]})}),e.jsxs(Fe,{children:[e.jsx(te,{label:t.hour,value:Y,onChange:s=>ue(Number(s.target.value)),children:qe.map(s=>e.jsx("option",{value:s,children:b(s)},s))}),e.jsx(te,{label:t.minute,value:le,onChange:s=>L(Number(s.target.value)),children:Ie.map(s=>e.jsx("option",{value:s,children:b(s)},s))}),e.jsx(te,{label:t.second,value:De,onChange:s=>Oe(Number(s.target.value)),children:Ie.map(s=>e.jsx("option",{value:s,children:b(s)},s))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-700 rounded-md",children:[e.jsx("button",{type:"button",onClick:()=>ne("AM"),className:`px-4 py-1 text-sm rounded ${O==="AM"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:t.am}),e.jsx("button",{type:"button",onClick:()=>ne("PM"),className:`px-4 py-1 text-sm rounded ${O==="PM"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:t.pm})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400 z-10",children:t.location}),e.jsxs("button",{type:"button",onClick:()=>{f(!0),v("search")},className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 flex justify-between items-center text-left",children:[e.jsxs("span",{children:[X.name," ",e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["(",X.romanization,")"]})]}),e.jsx(Nt,{className:"w-4 h-4 text-gray-500"})]})]}),!n&&e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center items-center py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed dark:bg-blue-600 dark:hover:bg-blue-700 dark:disabled:bg-gray-500",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"w-5 h-5 mr-3 animate-spin"}),t.calculating]}):t.calculate})})]}),x&&e.jsx("div",{className:"fixed inset-0 flex items-start justify-center bg-black/60 z-50 p-4 pt-8 sm:pt-8 transition-opacity",onClick:()=>f(!1),children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 w-full h-3/6 sm:h-3/5 sm:max-h-[90vh] sm:rounded-lg shadow-xl max-w-lg p-4 flex flex-col transition-transform",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:S==="search"?t.searchOrSelectLocation:t.enterManually}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100",children:e.jsx(we,{className:"w-5 h-5"})})]}),S==="search"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative my-4",children:[e.jsx(kt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:t.locationSearchPlaceholder,value:de,onChange:s=>He(s.target.value),className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 pl-10 pr-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:Ve.map(s=>e.jsxs("div",{onClick:()=>Ze(s),className:"p-2.5 cursor-pointer hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-md text-sm flex justify-between",children:[e.jsx("span",{children:s.name}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:s.romanization})]},s.name))}),e.jsx("div",{className:"pt-3 mt-3 border-t dark:border-gray-700 text-center",children:e.jsxs("button",{onClick:()=>v("manual"),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:[t.cantFindLocation," ",t.enterManuallyOrMap]})})]}):e.jsxs("div",{className:"pt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.0001",id:"latitude",value:H,onChange:s=>ge(parseFloat(s.target.value)),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"}),e.jsx("label",{htmlFor:"latitude",className:"absolute -top-2 left-2.5 bg-slate-200 px-1 text-xs text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:t.latitudeShort})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.0001",id:"longitude",value:V,onChange:s=>be(parseFloat(s.target.value)),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"}),e.jsx("label",{htmlFor:"longitude",className:"absolute -top-2 left-2.5 bg-slate-200 px-1 text-xs text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:t.longitudeShort})]})]}),e.jsx(Dt,{label:t.timezone,value:pe,onChange:s=>J(s.target.value),children:ie.map(s=>e.jsx("option",{value:s.zoneId,children:s.label},s.zoneId))}),e.jsxs("button",{type:"button",onClick:()=>Me(!0),className:"w-full flex justify-center items-center gap-2 py-2 bg-gray-200 hover:bg-gray-300 rounded-md dark:bg-gray-600 dark:hover:bg-gray-500","aria-label":t.selectOnMap,children:[e.jsx(vt,{className:"w-5 h-5"})," ",t.selectOnMap]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:()=>v("search"),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:["← ",t.backToSearch]})})]})]})}),Ye&&e.jsx(Mt,{onClose:()=>Me(!1),onLocationSelect:Xe,initialPosition:[H,V]}),K&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50 p-4 transition-opacity",children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full p-6 text-center",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-semibold text-amber-700 dark:text-amber-400",children:t.invalidDateTitle}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:t.invalidDateMessage(i)}),e.jsxs("div",{className:"mt-6 flex justify-center gap-4",children:[e.jsx("button",{onClick:et,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-300 rounded-md hover:bg-gray-400 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:t.edit}),e.jsx("button",{onClick:Qe,className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600",children:t.proceed})]})]})})]})}),$t=({cx:a,cy:l,onSelect:n})=>e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 400",children:[e.jsx("defs",{children:e.jsx("path",{id:"lotus-petal",d:`M 200 200
             C 150 150, 150 50, 200 0
             C 250 50, 250 150, 200 200 Z`})}),Array.from({length:12},(d,c)=>e.jsx("use",{href:"#lotus-petal",fill:"transparent",className:"overlay-wedge",style:{cursor:"pointer",pointerEvents:"auto"},transform:`rotate(${-c*30-90}, ${a}, ${l})`,onClick:()=>n(c+1)},c))]}),Bt={10:0,11:-30,12:-60,1:-90,2:-120,3:-150,4:-180,5:-210,6:-240,7:-270,8:-300,9:-330};function xe(a){const l=Math.floor(a),n=Math.floor((a-l)*60);return`${b(l)}°${b(n)}′`}function ze(a){const l=Math.round(a/30*100);return`${b(l)}%`}const Ft=({planets:a,ascendantSign:l,ascendantDegrees:n,ascendantNakshatra:d,ascendantNakshatraPada:c,chartType:h="lagna"})=>{const[r,o]=m.useState(null),g=a.find(x=>x.planet==="MOON"),i=g?.rashi??1,w=m.useMemo(()=>{const x=new Map;return a.forEach(f=>{const S=f.rashi,v=h==="chandra"?(S-i+12)%12+1:S;x.has(v)||x.set(v,[]),x.get(v).push(f)}),x},[a,h,i]);return e.jsxs("div",{className:"birth-chart-wrapper text-stone-800 dark:text-stone-100",children:[e.jsxs("div",{className:"birth-chart",children:[Array.from({length:12},(x,f)=>f+1).map(x=>{const f=w.get(x)||[],S=Bt[x];if(S===void 0)return null;const v=[];return h!=="chandra"&&x===l&&v.push(e.jsxs("div",{className:"planet-item ascendant",children:[e.jsx("span",{children:ee.ASCENDANT}),n!==void 0&&e.jsx("span",{className:"planet-deg",children:xe(n)})]},"asc")),h==="chandra"&&x===1&&v.push(e.jsx("div",{className:"planet-item ascendant",children:e.jsxs("span",{children:[ee.ASCENDANT," (चन्द्र)"]})},"asc-chandra")),f.forEach(k=>{v.push(e.jsxs("div",{className:"planet-item",children:[e.jsx("span",{className:k.retrograde?"retrograde":"",children:ee[k.planet]}),k.degreesInSign!==void 0&&e.jsx("span",{className:"planet-deg",children:xe(k.degreesInSign)})]},k.planet))}),e.jsxs("div",{className:"petal",style:{transform:`translateX(-50%) rotate(${S}deg)`},children:[e.jsx("div",{className:"rashi-number font-semibold",children:b(x)}),e.jsx("div",{className:"planets-container",children:v})]},x)}),e.jsx("div",{className:"chart-center-dot text-2xl font-bold dark:text-red-400",children:"ॐ"}),e.jsx($t,{cx:200,cy:200,onSelect:x=>o(x)})]}),r&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",onClick:()=>o(null),children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 dark:text-stone-100 rounded-lg shadow-lg p-6 max-w-md w-full transition-colors duration-300",onClick:x=>x.stopPropagation(),children:[e.jsxs("h3",{className:"font-bold text-lg mb-2 text-blue-600 dark:text-blue-400",children:["घर ",b(r)," – ",B[r-1]," (स्वामी:"," ",W[pt[r]],")"]}),h!=="chandra"&&r===l&&n!==void 0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsxs("span",{children:[ee.ASCENDANT," (",B[l-1],")"]}),e.jsxs("span",{children:[xe(n)," (",ze(n),")"]})]}),d&&c&&e.jsxs("div",{className:"text-sm ml-2 text-gray-600 dark:text-gray-400",children:[Ne[d],b(c)]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round(n/30*100)}%`}})})]}),h==="chandra"&&r===1&&g&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:e.jsxs("span",{children:[ee.ASCENDANT," (चन्द्र)"]})}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round((g.degreesInSign||0)/30*100)}%`}})}),g.nakshatra&&g.nakshatraPada&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 font-semibold mt-1",children:["जनम नक्षत्र:"," ",Ne[g.nakshatra],b(g.nakshatraPada)]})]}),(w.get(r)||[]).map(x=>{if(h==="chandra"&&r===1&&x.planet==="MOON")return null;const f=x.degreesInSign!==void 0?Math.round(x.degreesInSign/30*100):null;return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsx("span",{className:x.retrograde?"font-bold text-blue-600 dark:text-blue-400":"",children:W[x.planet]}),x.degreesInSign!==void 0&&e.jsxs("span",{children:[xe(x.degreesInSign)," (",ze(x.degreesInSign),")"]})]}),x.nakshatra&&x.nakshatraPada&&e.jsxs("div",{className:"text-sm ml-2 text-gray-600 dark:text-gray-400",children:[Ne[x.nakshatra],b(x.nakshatraPada)]}),f!==null&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded",style:{width:`${f}%`}})})]},x.planet)})]})})]})},Et=({planets:a})=>e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg overflow-x-auto dark:bg-gray-800 dark:text-stone-100 transition-colors duration-300",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:t.planetaryPositions}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:t.planet}),e.jsx("th",{className:"py-2 px-2",children:t.rashi}),e.jsx("th",{className:"py-2 px-2",children:t.degrees}),e.jsx("th",{className:"py-2 px-2",children:t.nakshatra}),e.jsx("th",{className:"py-2 px-2",children:t.pada})]})}),e.jsx("tbody",{children:a.map(l=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-stone-700 hover:bg-amber-50/70 dark:hover:bg-gray-800 transition-colors duration-200",children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100",children:[W[l.planet],l.retrograde&&e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 ml-1",children:["(",t.retrograde,")"]})]}),e.jsx("td",{className:"py-2 px-2",children:B[l.rashi-1]}),e.jsx("td",{className:"py-2 px-2 font-mono",children:_e(l.degreesInSign)}),e.jsx("td",{className:"py-2 px-2",children:l.nakshatra}),e.jsx("td",{className:"py-2 px-2",children:b(l.nakshatraPada)})]},l.planet))})]})]}),Se=({data:a,title:l,titleClassName:n})=>{const d=y=>{if(!y)return"?";try{const j=new Date(y),N=j.getUTCHours(),D=j.getUTCMinutes(),I=jt(N),A=N%12===0?12:N%12;return`${b(A)}:${b(D.toString().padStart(2,"0"))} ${I}`}catch{return"?"}};function c(y){let j,N;if(y>=1&&y<=15)j=y,N="शुक्ल पक्ष";else if(y>=16&&y<=30)j=y-15,N="कृष्ण पक्ष";else return`अवैध तिथि (${y})`;return ft(j,N)}const h=(y,j,N)=>{if(!y||!j||!N)return"?";try{const D=le=>{const L=new Date(le);return new Date(L.getUTCFullYear(),L.getUTCMonth(),L.getUTCDate(),L.getUTCHours(),L.getUTCMinutes(),L.getUTCSeconds())},I=D(N),A=D(y),Z=D(j),C=M(I),K=M(A),P=M(Z),F=d(y),R=d(j),O=K.year===C.year&&K.monthIndex===C.monthIndex&&K.day===C.day,ne=P.year===C.year&&P.monthIndex===C.monthIndex&&P.day===C.day,Y=O?F:`${b(K.day)} गते ${F}`,ue=ne?R:`${b(P.day)} गते ${R}`;return`${Y} देखि ${ue} सम्म`}catch{return"N/A"}},r=a.planets.find(y=>y.planet==="MOON"),o=a.planets.find(y=>y.planet==="SUN"),g=new Date(a.birthDetails.datetime),i=M(g),w=`${b(i.year)} ${se[i.monthIndex]} ${b(i.day)}`,x=yt[g.getDay()],f=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(g),S=new Intl.DateTimeFormat("ne-NP",{hour:"numeric",minute:"numeric",hour12:!0}).format(g),v=ke[a.nakshatra.index],k=v?v.syllables[a.nakshatra.pada-1]:"?";function p(y,j){const N=ke.findIndex(I=>I.name===y);return N===-1?"?":ke[N].syllables[j-1]||"?"}const z=r?p(r.nakshatra,r.nakshatraPada):"?",re=B[a.ascendant.sign-1],_=_e(a.ascendant.degreesInSign);return e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg h-full bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:`text-xl font-bold mb-4 text-center ${n||"text-blue-400 dark:text-blue-400"}`,children:l||t.birthDetails}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start ",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.birthDateBS,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:w})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.birthDateAD,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:f})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.birthTime,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:S})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.dayOfWeek,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:x})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:t.dailyTimings}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr] sm:grid-cols-[auto_1fr_auto_1fr] items-center gap-x-4 gap-y-2 text-sm",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.sunrise,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:b(a.sunRise)}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right sm:text-right",children:[t.sunset,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:b(a.sunSet)})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:t.astrologicalDetails}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr] items-center gap-x-4 gap-y-3 text-sm",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.lagna,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:[re," (",_,")"]}),a.ashtaKoota.lagnesh&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.lagnesh,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:a.ashtaKoota.lagnesh})]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.moonSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:B[r.rashi-1]})]}),a.ashtaKoota.rashiLord&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.rashiLord,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:a.ashtaKoota.rashiLord})]}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.sunSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:B[o.rashi-1]})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.birthNakshatra,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.nakshatra.nameNepali}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:h(a.nakshatra.start,a.nakshatra.end,a.birthDetails.datetime)}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsxs("span",{className:"font-semibold",children:["पद ",b(a.nakshatra.pada),": "]}),h(a.nakshatra.padaStart,a.nakshatra.padaEnd,a.birthDetails.datetime)]}),r&&(a.nakshatra.nameNepali!==r.nakshatra||a.nakshatra.pada!==r.nakshatraPada)&&e.jsxs("span",{className:"font-semibold text-green-700 dark:text-green-600",children:[t.modernAstroInfo,": ",t.nakshatra,": ",r.nakshatra," ",t.pada,": ",b(r.nakshatraPada)]})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.tithi,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[a.tithi.paksha,"  ",c(a.tithi.tithiNumber),"(",b(a.tithi.tithiNumber),")"]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:h(a.tithi.start,a.tithi.end,a.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.yoga,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.yoga.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:h(a.yoga.start,a.yoga.end,a.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.karana,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.karana.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:h(a.karana.start,a.karana.end,a.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.suggestedSyllable,":"]}),e.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-600 text-lg text-left",children:k})]}),r&&(a.nakshatra.nameNepali!==r.nakshatra||a.nakshatra.pada!==r.nakshatraPada)&&e.jsxs("span",{className:"font-semibold text-green-700 dark:text-green-600",children:[t.modernAstroInfo,": ",z]})]}),a.ashtaKoota&&e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:t.gunaMilanDetails}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto_1fr] sm:grid-cols-[auto_1fr_auto_1fr_auto_1fr] gap-x-4 gap-y-2 text-sm items-baseline",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.varna,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.varna}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.vasya,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.vasya}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.gana,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.gana}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.yoni,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.yoni}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.nadi,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.nadi}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.tatva,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.tatva}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.paya,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.paya})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-2",children:t.calculationDetails}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.backend,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[a.calculationMeta.backend,": ",a.calculationMeta.version]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.ayanamsa,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[a.calculationMeta.ayanamsa," (",a.calculationMeta.ayanamsaString,")"]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.houseSystem,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.calculationMeta.houseSystem})]})]})]})]})},U=a=>{if(!a||a==="N/A")return"N/A";try{const l=new Date(a);if(isNaN(l.getTime()))return"N/A";const n=M(l),d=b(n.year.toString()),c=se[n.monthIndex],h=b(n.day.toString());return`${d} ${c} ${h}`}catch(l){return console.error("Date formatting error:",l),"N/A"}},ae=({dashaSequence:a,title:l})=>{const[n,d]=m.useState(null),c=l===t.jaiminiDasha,h=r=>{d(o=>o===r?null:r)};return e.jsxs("div",{className:"kundali-card p-2 sm:p-6 mb-11 print:mb-2 rounded-lg bg-slate-200 dark:bg-gray-800 break-inside-avoid-page page-break-inside-avoid",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4 print:hidden",children:l}),c&&e.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 -mt-3 mb-3 px-2 print:hidden",children:t.jaiminiProportionalNote}),e.jsx("div",{className:"print:hidden",children:e.jsxs("table",{className:"w-full text-left text-sm sm:text-base border-collapse",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:c?"दशा राशि":t.mahaDasha}),e.jsx("th",{className:"py-2 px-2",children:t.startsOn}),e.jsx("th",{className:"py-2 px-2",children:t.endsOn})]})}),e.jsx("tbody",{children:a.map(r=>{const o=r.planet+r.start,g=r.subDashas&&r.subDashas.length>0;return e.jsxs(xt.Fragment,{children:[e.jsxs("tr",{className:`border-b border-amber-100 dark:border-amber-800 ${g?"cursor-pointer hover:bg-amber-50/70 dark:hover:bg-amber-900/40":""}`,onClick:()=>g&&h(o),"aria-expanded":g&&n===o,"aria-controls":`antardasha-${o}`,children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100 flex items-center relative",children:[g&&e.jsxs("div",{className:"relative group",children:[e.jsx(he,{className:`w-4 h-4 mr-2 text-amber-700 dark:text-blue-400 transition-transform duration-300 ${n===o?"rotate-180":""}`}),e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-1 px-2 py-1 bg-zinc-800 text-white text-xs rounded shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-[999] dark:bg-gray-800 dark:text-stone-200",children:t.antarDasha_clickToExpand})]}),e.jsx("span",{className:`z-0 ${g?"":"ml-6"}`,children:c?r.planet:W[r.planet]})]}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:U(r.start)}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:U(r.end)})]}),g&&e.jsx("tr",{className:"bg-slate-200 dark:bg-gray-800",children:e.jsx("td",{colSpan:3,className:"p-0 border-none",children:e.jsx("div",{id:`antardasha-${o}`,className:`overflow-hidden transition-all duration-500 ease-in-out ${n===o?"max-h-[1000px]":"max-h-0"}`,children:e.jsxs("div",{className:"p-4 bg-amber-50/50 dark:bg-amber-900/20",children:[e.jsx("h4",{className:"font-semibold text-blue-400 dark:text-blue-400 mb-2 pl-2",children:c?"अन्तरदशा राशि":t.antarDasha}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-stone-500 dark:text-stone-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:c?"राशि":t.planet}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:t.startsOn}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:t.endsOn})]})}),e.jsx("tbody",{children:r.subDashas.map(i=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-amber-800 last:border-b-0",children:[e.jsx("td",{className:"py-1.5 px-2 text-stone-800 dark:text-stone-100",children:c?i.planet:W[i.planet]}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:U(i.start)}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:U(i.end)})]},i.planet+i.start))})]})]})})})})]},o)})})]})}),e.jsxs("div",{className:"hidden print:block mt-1",children:[e.jsx("h4",{className:"text-lg font-semibold mb-1 text-stone-800",children:l}),c&&e.jsx("p",{className:"text-xs text-stone-500 -mt-1 mb-1 px-2 italic",children:t.jaiminiProportionalNote}),e.jsxs("table",{className:"w-full text-left text-sm border-collapse mb-1",children:[e.jsx("thead",{className:"border-b-2 border-stone-400 text-stone-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-1 px-2",children:c?"दशा राशि":t.mahaDasha}),e.jsx("th",{className:"py-1 px-2",children:t.startsOn}),e.jsx("th",{className:"py-1 px-2",children:t.endsOn})]})}),e.jsx("tbody",{children:a.slice(0,12).map(r=>e.jsxs("tr",{className:"border-b border-stone-200",children:[e.jsx("td",{className:"py-1 px-2 font-medium text-stone-800",children:c?r.planet:W[r.planet]}),e.jsx("td",{className:"py-1 px-2 text-stone-700",children:U(r.start)}),e.jsx("td",{className:"py-1 px-2 text-stone-700",children:U(r.end)})]},`print-${r.planet}-${r.start}`))})]}),e.jsx("p",{className:"text-xs text-stone-600 px-2 italic",children:t.subDashaPrintNote})]})]})},ve=({chart:a})=>{if(!a.chartData)return null;const l="planets"in a.chartData?a.chartData.planets:[],n="ascendant"in a.chartData?a.chartData.ascendant.sign:1,d="ascendant"in a.chartData?a.chartData.ascendant.degreesInSign:void 0,c="ascendant"in a.chartData?a.chartData.ascendant.nakshatra:void 0,h="ascendant"in a.chartData?a.chartData.ascendant.nakshatraPada:void 0;return e.jsxs("div",{className:"chart-instance dark:bg-gray-800 break-inside-avoid-page page-break-inside-avoid print:mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 text-center dark:text-blue-400",children:a.title}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(Ft,{planets:l.map(r=>({planet:r.planet,rashi:"rashi"in r?r.rashi:r.sign,degreesInSign:"degreesInSign"in r?r.degreesInSign:void 0,retrograde:r.retrograde,nakshatra:r.nakshatra,nakshatraPada:r.nakshatraPada})),ascendantSign:n,ascendantDegrees:d,ascendantNakshatra:c,ascendantNakshatraPada:h,chartType:a.type})})]},a.title)},Ht=({data:a,onReturnToForm:l})=>{const[n,d]=m.useState(!1),c=a.divisionalCharts.find(p=>p.name.includes("D9")),h=a.divisionalCharts.find(p=>p.name.includes("D10")),r=a.divisionalCharts.find(p=>p.name.includes("D3")),o=a.divisionalCharts.find(p=>p.name.includes("D12")),g=a.divisionalCharts.find(p=>p.name.includes("D4")),i=a.divisionalCharts.find(p=>p.name.includes("D60")),w=[{type:"lagna",title:t.rashiChart,chartData:a},{type:"chandra",title:t.chandraChart,chartData:a},{type:"navamsha",title:t.navamsaChart,chartData:c},{type:"dashamsa",title:t.dashamsaChart,chartData:h}],x=[{type:"drekkana",title:t.drekkanaChart,chartData:r},{type:"dwadamsha",title:t.dwadamshaChart,chartData:o},{type:"chaturthamsha",title:t.chaturthamshaChart,chartData:g},{type:"shashtiamsha",title:t.shashtiamshaChart,chartData:i}].filter(p=>p.chartData),f=new Date,S=M(f),v=`${b(S.year)} ${se[S.monthIndex]} ${b(S.day)}`,k=f.toLocaleTimeString("ne-NP",{hour:"numeric",minute:"2-digit",hour12:!0});return e.jsxs("div",{className:"kundali-display-container flex flex-col bg-slate-200 rounded-xl shadow-lg w-full lg:max-w-4xl xl:max-w-6xl lg:p-4 md:p-1 space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border dark:border-gray-700 pb-32 print:pb-2 print:space-y-2",children:[e.jsxs("header",{className:"kundali-card rounded-lg text-center dark:bg-gray-800 dark:text-blue-400 transition-colors duration-300",children:[e.jsx("h2",{className:"text-3xl self-center font-bold text-blue-400 dark:text-blue-400",children:t.kundaliOf(a.birthDetails.name)}),e.jsxs("div",{className:"hidden text-xs self-center print:block font-bold text-gray-400 dark:text-gray-400",children:[t.printedDate,": ",v," ",k]}),e.jsx("div",{className:"mt-2 text-xs text-orange-600 dark:text-orange-400 text-center px-2",children:t.kundaliDisclaimer})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 print:gap-2",children:e.jsxs("div",{className:"flex flex-col gap-4 print:gap-2",children:[e.jsx("div",{className:"kundali-card p-4 print:p-2 rounded-lg bg-slate-200 dark:bg-gray-800 shadow",children:e.jsx(Se,{data:a})}),e.jsx("div",{className:"kundali-card p-4 print:p-2 rounded-lg bg-slate-200 dark:bg-gray-800 shadow",children:e.jsx(Et,{planets:a.planets})})]})}),e.jsxs("div",{className:"print:break-inside-avoid-page",children:[e.jsxs("div",{className:"print:hidden",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:w.map(p=>e.jsx(ve,{chart:p},p.type))}),x.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-6 mt-6 transition-all duration-500 overflow-hidden ${n?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:n&&x.map(p=>e.jsx(ve,{chart:p},p.type))}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("button",{onClick:()=>d(!n),className:"flex items-center justify-center gap-2 mx-auto px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-100/50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/40 transition",children:[e.jsx("span",{children:n?t.showLessCharts:t.showMoreCharts}),e.jsx(he,{className:`w-4 h-4 transition-transform duration-300 ${n?"rotate-180":""}`})]})})]})]}),e.jsx("div",{className:"hidden print:block",children:e.jsx("div",{className:"flex flex-wrap -mx-2 mt-2 pt-4 border-t border-gray-300 dark:border-gray-700",children:[...w,...x].map(p=>e.jsx("div",{className:"w-1/2 px-2 mb-4 ",children:e.jsx(ve,{chart:p})},`print-${p.type}`))})})]}),e.jsxs("div",{className:"space-y-4 print:space-y-2 print:pt-2",children:[e.jsx(ae,{dashaSequence:a.dashaSequence,title:t.dashaPeriods}),a.tribhagiDasha?.length>0&&e.jsx(ae,{dashaSequence:a.tribhagiDasha,title:t.tribhagiDasha}),a.yoginiDasha?.length>0&&e.jsx(ae,{dashaSequence:a.yoginiDasha,title:t.yoginiDasha}),a.ashtottariDasha?.length>0&&e.jsx(ae,{dashaSequence:a.ashtottariDasha,title:t.ashtottariDasha}),a.jaiminiDasha?.length>0&&e.jsx(ae,{dashaSequence:a.jaiminiDasha,title:t.jaiminiDasha})]}),e.jsx("div",{className:"hidden print:block text-center text-xs text-gray-500 pt-2 mt-2 border-t border-gray-300",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," ",t.project]})}),e.jsx("div",{className:"fixed bottom-12 left-1/2 transform -translate-x-1/2 z-[999] print:hidden print:h-0 w-full px-4 text-center",children:e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{className:"bg-blue-600 dark:bg-blue-600 text-white px-6 py-2 rounded shadow-md hover:bg-blue-700 transition flex items-center gap-2",onClick:l,children:["← ",t.returnToForm]}),e.jsxs("button",{className:"bg-gray-600 dark:bg-gray-500 text-white px-6 py-2 rounded shadow-md hover:bg-gray-700 transition flex items-center gap-2",onClick:()=>window.print(),children:[e.jsx(Re,{className:"w-4 h-4"})," ",t.print]})]})})]})},zt={name:"सुरज",dateSystem:"BS",bsYear:2050,bsMonth:2,bsDay:2,hour:10,minute:15,second:0,period:"AM",location:{name:"काठमाडौं",romanization:"kathmandu",latitude:27.7172,longitude:85.324,offset:5.75,zoneId:"Asia/Kathmandu"}},_t={name:"अम्रिता",dateSystem:"BS",bsYear:2053,bsMonth:8,bsDay:9,hour:2,minute:30,second:0,period:"PM",location:{name:"काठमाडौं",romanization:"kathmandu",latitude:27.7172,longitude:85.324,offset:5.75,zoneId:"Asia/Kathmandu"}},Vt=({onCalculate:a,isLoading:l,defaultValues:n})=>{const d=m.useRef(null),c=m.useRef(null),h=async()=>{const r=d.current?.validateAndGetData(),o=c.current?.validateAndGetData();if(r&&o){const[g,i]=await Promise.all([r,o]);g&&i&&a(g,i)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-lg p-4 dark:bg-gray-800/50",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700 dark:text-blue-300 mb-4 text-center",children:t.groomDetails}),e.jsx(Ee,{ref:d,onCalculate:()=>{},isLoading:!1,hideSubmitButton:!0,defaultValues:n?.groom||zt})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-lg p-4 dark:bg-gray-800/50",children:[e.jsx("h2",{className:"text-xl font-bold text-pink-700 dark:text-pink-400 mb-4 text-center",children:t.brideDetails}),e.jsx(Ee,{ref:c,onCalculate:()=>{},isLoading:!1,hideSubmitButton:!0,defaultValues:n?.bride||_t})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"button",onClick:h,disabled:l,className:"w-full flex justify-center items-center py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed dark:bg-green-600 dark:hover:bg-green-700 dark:disabled:bg-gray-500",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"w-5 h-5 mr-3 animate-spin"}),t.calculating]}):t.calculateComparison})})]})},$=({label:a,groomValue:l,brideValue:n,typeLabel:d,maxPoints:c,obtainedPoints:h})=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-stone-700 last:border-b-0",children:[e.jsx("td",{className:"py-2 font-medium text-stone-800 dark:text-stone-100",children:a}),e.jsx("td",{className:"py-2 text-stone-700 dark:text-stone-200",children:l}),e.jsx("td",{className:"py-2 text-stone-700 dark:text-stone-200",children:n}),e.jsx("td",{className:"py-2 text-center text-blue-600 dark:text-blue-400 font-medium",children:d??""}),e.jsx("td",{className:"py-2 text-center text-stone-700 dark:text-stone-200",children:b(c)}),e.jsx("td",{className:"py-2 text-center font-semibold text-stone-800 dark:text-stone-100",children:b(h)})]}),qt=({result:a,onReturnToForm:l})=>{const{groom:n,bride:d,score:c,conclusion:h,labels:r}=a,o=new Date,g=M(o),i=`${b(g.year)} ${se[g.monthIndex]} ${b(g.day)}`,w=o.toLocaleTimeString("ne-NP",{hour:"numeric",minute:"2-digit",hour12:!0});return e.jsxs("div",{className:"kundali-display-container flex flex-col bg-slate-200 rounded-xl shadow-lg w-full lg:max-w-4xl xl:max-w-6xl lg:p-4 md:p-1 space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border dark:border-gray-700 pb-32 print:pb-0 print:m-0 print:rounded-none print:shadow-none print:bg-transparent",children:[e.jsxs("header",{className:"kundali-card rounded-lg text-center p-4 dark:bg-gray-800",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-400 dark:text-blue-400",children:[n.birthDetails.name," र ",d.birthDetails.name," को गुण मिलान"]}),e.jsxs("div",{className:"hidden text-xs self-center print:block font-bold text-gray-400 dark:text-gray-400",children:[t.printedDate,": ",i," ",w]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Se,{data:n,title:t.groomDetails,titleClassName:"text-blue-700 dark:text-blue-300"}),e.jsx(Se,{data:d,title:t.brideDetails,titleClassName:"text-pink-700 dark:text-pink-400"})]}),e.jsxs("div",{className:"kundali-card p-3 sm:p-5 rounded-lg overflow-x-auto bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:t.gunaMilanTableTitle}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:t.koota}),e.jsx("th",{className:"py-2 px-2",children:t.groom}),e.jsx("th",{className:"py-2 px-2",children:t.bride}),e.jsx("th",{className:"py-2 px-2 text-center",children:t.kootaType}),e.jsx("th",{className:"py-2 px-2 text-center",children:t.maxPoints}),e.jsx("th",{className:"py-2 px-2 text-center",children:t.obtainedPoints})]})}),e.jsxs("tbody",{children:[e.jsx($,{label:t.varna,groomValue:n.ashtaKoota.varna,brideValue:d.ashtaKoota.varna,typeLabel:r.varnaLabel,maxPoints:1,obtainedPoints:c.varna}),e.jsx($,{label:t.vasya,groomValue:n.ashtaKoota.vasya,brideValue:d.ashtaKoota.vasya,typeLabel:r.vasyaLabel,maxPoints:2,obtainedPoints:c.vasya}),e.jsx($,{label:t.tara,groomValue:n.nakshatra.nameNepali,brideValue:d.nakshatra.nameNepali,typeLabel:r.taraLabel,maxPoints:3,obtainedPoints:c.tara}),e.jsx($,{label:t.yoni,groomValue:n.ashtaKoota.yoni,brideValue:d.ashtaKoota.yoni,typeLabel:r.yoniLabel,maxPoints:4,obtainedPoints:c.yoni}),e.jsx($,{label:t.grahaMaitri,groomValue:n.ashtaKoota.rashiLord,brideValue:d.ashtaKoota.rashiLord,typeLabel:r.grahaMaitriLabel,maxPoints:5,obtainedPoints:c.grahaMaitri}),e.jsx($,{label:t.gana,groomValue:n.ashtaKoota.gana,brideValue:d.ashtaKoota.gana,typeLabel:r.ganaLabel,maxPoints:6,obtainedPoints:c.gana}),e.jsx($,{label:t.bhakoot,groomValue:B[n.planets.find(x=>x.planet==="MOON").rashi-1],brideValue:B[d.planets.find(x=>x.planet==="MOON").rashi-1],typeLabel:r.bhakootLabel,maxPoints:7,obtainedPoints:c.bhakoot}),e.jsx($,{label:t.nadi,groomValue:n.ashtaKoota.nadi,brideValue:d.ashtaKoota.nadi,typeLabel:r.nadiLabel,maxPoints:8,obtainedPoints:c.nadi})]}),e.jsx("tfoot",{className:"border-t-2 border-amber-300 dark:border-amber-600 font-bold",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"py-2 px-2 text-right text-stone-800 dark:text-stone-100",children:t.totalPoints}),e.jsx("td",{className:"px-2 text-center text-stone-800 dark:text-stone-100",children:b(36)}),e.jsx("td",{className:"px-2 text-center text-lg text-blue-600 dark:text-blue-400",children:b(c.total)})]})})]})]}),e.jsxs("div",{className:"kundali-card rounded-lg bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400",children:t.conclusion}),e.jsx("p",{className:"text-stone-800 dark:text-stone-100",children:h})]}),e.jsx("div",{className:"hidden print:block text-center text-xs text-gray-500 mt-4 border-t border-gray-300",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," ",t.project]})}),e.jsxs("div",{className:"fixed bottom-12 left-1/2 transform -translate-x-1/2 z-[999] w-full px-4 text-center screen-only-footer print:hidden",children:[e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{className:"bg-blue-600 dark:bg-blue-600 text-white px-6 py-2 rounded shadow-md hover:bg-blue-700 dark:hover:bg-blue-800 transition flex items-center gap-2",onClick:l,children:["← ",t.returnToForm]}),e.jsx("button",{className:"bg-gray-600 dark:bg-gray-500 text-white px-6 py-2 rounded shadow-md hover:bg-gray-700 dark:hover:bg-gray-600 transition flex items-center gap-2",onClick:()=>window.print(),children:e.jsx(Re,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 md:hidden",children:t.mobilePrintHint})]})]})},Gt=({onClose:a,onEdit:l,onView:n})=>{const[d,c]=m.useState([]);m.useEffect(()=>{try{const o=localStorage.getItem("savedKundalis");o&&c(JSON.parse(o))}catch(o){console.error("Failed to load saved kundalis:",o)}},[]);const h=o=>{if(window.confirm(t.deleteConfirm)){const g=d.filter(i=>i.id!==o);c(g),localStorage.setItem("savedKundalis",JSON.stringify(g))}},r=o=>{const g=new Date(o);return new Intl.DateTimeFormat("ne-NP-u-nu-deva",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(g)};return e.jsx("div",{className:"fixed inset-0 flex flex-wrap items-center justify-center bg-black/60 z-50 p-4 transition-opacity",onClick:a,children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full max-h-[80vh] flex flex-wrap flex-col p-6",onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-500 dark:text-blue-400",children:t.savedKundalis}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(we,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:d.length===0?e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-10",children:t.noSavedKundalis}):e.jsx("ul",{className:"space-y-3",children:d.map(o=>e.jsx("li",{className:"bg-slate-50 dark:bg-gray-700 p-3 rounded-md shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-600 dark:text-blue-300",children:o.type==="individual"?o.name:`${o.groomName} र ${o.brideName}`}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${o.type==="individual"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:o.type==="individual"?t.individual:t.comparison}),e.jsxs("span",{className:"ml-2",children:[t.savedOn," ",r(o.timestamp)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>n(o),className:"px-3 py-1 text-sm text-white bg-blue-500 rounded hover:bg-blue-600",children:t.view}),e.jsx("button",{onClick:()=>l(o),className:"px-3 py-1 text-sm text-gray-700 bg-gray-300 rounded hover:bg-gray-400 dark:bg-gray-500 dark:text-gray-100 dark:hover:bg-gray-400",children:t.edit}),e.jsx("button",{onClick:()=>h(o.id),className:"px-3 py-1 text-sm text-white bg-red-500 rounded hover:bg-red-600",children:t.delete})]})]})},o.id))})})]})})};export{qt as C,Ht as K,Gt as S,Vt as a,Ee as b};
