import{r as x,j as e,f as nt,T as lt,u as ot,g as dt,h as it,R as ct}from"./vendor-react-CHkr4beM.js";import{t as T,g as xt,a as mt,N as t,b as g,c as ae,G as ht,f as ut,d as gt,e as Q,h as F,i as G,R as bt,j as ye,k as je,l as pt,m as yt}from"./bikram-DMqJd-9M.js";import{n as ce,T as oe,L as ft,a as Ee,X as ke,S as jt,M as Nt,C as xe,P as ze}from"./data-BSA-jF2b.js";import{t as kt}from"./vendor-utils-y-iLWhYP.js";const vt=ce.find(a=>a.romanization.toLowerCase()==="kathmandu"),de=vt??ce[0],St=({label:a,children:l,...n})=>e.jsxs("div",{className:"relative w-full",children:[e.jsx("select",{...n,className:"w-full appearance-none bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:focus:bg-blue-400 dark:focus:border-blue-400",children:l}),e.jsx("label",{className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:a}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx(xe,{className:"w-4 h-4"})})]}),wt=()=>{const a=ot();return x.useEffect(()=>{const l=setTimeout(()=>{try{a.invalidateSize()}catch{}},150);return()=>clearTimeout(l)},[a]),null},Dt=({onClose:a,onLocationSelect:l,initialPosition:n})=>{const[d,i]=x.useState(n),u=()=>(dt({click(o){i([o.latlng.lat,o.latlng.lng])}}),e.jsx(it,{position:d})),r=()=>{l(d[0],d[1]),a()};return e.jsx("div",{style:{position:"fixed",inset:0,top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center",padding:12},children:e.jsxs("div",{style:{width:"95%",maxWidth:960,height:620,display:"flex",flexDirection:"column",borderRadius:12,overflow:"hidden",background:void 0},className:"bg-slate-50 dark:bg-gray-800 dark:text-gray-200 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center border-b p-3 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:t.selectOnMap}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100",children:e.jsx(ke,{className:"w-5 h-5"})})]}),e.jsx("div",{style:{flex:1,minHeight:420,display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:e.jsxs(nt,{center:n,zoom:7,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},children:[e.jsx(lt,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(wt,{}),e.jsx(u,{})]},`${n[0]}-${n[1]}`)}),e.jsxs("div",{className:"border-t p-3 flex justify-between items-center dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Lat: ",d[0].toFixed(4),", Lon: ",d[1].toFixed(4)]}),e.jsx("button",{onClick:r,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 dark:bg-blue-400 dark:text-blue-900 dark:hover:bg-blue-500 dark:hover:text-white",children:t.selectLocation})]})]})})},Le=({children:a})=>e.jsx("div",{className:"grid grid-cols-3 border border-gray-300 rounded-md overflow-hidden divide-x divide-gray-300 focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500 dark:border-gray-600 dark:divide-gray-600 dark:focus-within:border-blue-400 dark:focus-within:ring-blue-400",children:a}),ee=({label:a,children:l,...n})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute top-1 left-2 text-xs text-gray-500 z-10 dark:text-gray-400",children:a}),e.jsx("select",{...n,className:"relative w-full appearance-none bg-gray-100 pt-5 pb-1.5 px-2 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 z-0 dark:bg-gray-700 dark:text-gray-200 dark:focus:bg-gray-600",children:l}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 z-10 dark:text-gray-300",children:e.jsx(xe,{className:"w-4 h-4"})})]}),Ct=({label:a,type:l="number",...n})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute top-1 left-2 text-xs text-gray-500 z-10 dark:text-gray-400",children:a}),e.jsx("input",{...n,type:l,className:"relative w-full bg-gray-100 pt-5 pb-1.5 px-2 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 z-0 dark:bg-gray-700 dark:text-gray-200 dark:focus:bg-gray-600"})]}),Mt=1900,It=2150,At=1960,Pt=2210,Be=x.forwardRef(({onCalculate:a,isLoading:l,hideSubmitButton:n=!1,defaultValues:d},i)=>{const u=new Date,r=T(u),[o,b]=x.useState(d?.name||"प्रयोगकर्ता"),[c,v]=x.useState(d?.dateSystem||"BS"),[m,y]=x.useState(!1),[N,j]=x.useState("search"),[f,p]=x.useState(u.getFullYear()),[k,C]=x.useState(u.getMonth()+1),[S,M]=x.useState(u.getDate()),[w,I]=x.useState(d?.bsYear||r.year),[z,A]=x.useState(d?.bsMonth||r.monthIndex+1),[P,$]=x.useState(d?.bsDay||r.day),_=x.useRef(null),[se,U]=x.useState(!1),[R,W]=x.useState(null),[K,re]=x.useState(d?.period||"PM"),[D,_e]=x.useState(d?.hour||4),[ve,Re]=x.useState(d?.minute||15),[Se,Ke]=x.useState(d?.second||0),ne=d?.location||de,[Z,we]=x.useState(ne),[O,me]=x.useState(ne.latitude),[Y,he]=x.useState(ne.longitude),[ue,X]=x.useState(ne.zoneId),[Oe,De]=x.useState(!1),[le,Ye]=x.useState(""),He=x.useMemo(()=>{const s=le.trim().toLowerCase();return s?ce.filter(h=>h.romanization.toLowerCase().includes(s)||h.name.includes(le.trim())):ce},[le]);x.useEffect(()=>{if(!(typeof O!="number"||typeof Y!="number"||isNaN(O)||isNaN(Y)))try{const s=kt(O,Y),h=oe.some(E=>E.zoneId===s);X(h?s:de?.zoneId??"Asia/Kathmandu")}catch{X(de?.zoneId??"Asia/Kathmandu")}},[O,Y,de?.zoneId]);const Ve=x.useMemo(()=>Array.from({length:12},(s,h)=>h+1),[]),Ce=x.useMemo(()=>Array.from({length:60},(s,h)=>h),[]),H=x.useMemo(()=>{const h=(c==="BS"?w:f)||(c==="BS"?r.year:u.getFullYear());return c==="BS"?xt(h,z-1).totalDays:mt(h,k)},[c,w,z,f,k,r.year,u]);x.useEffect(()=>{c==="BS"&&P>H&&$(H),c==="AD"&&S>H&&M(H)},[H,c,P,S]);const qe=s=>{const h=s.target.value,L=ut(h).replace(/[^0-9]/g,"");if(L===""){c==="BS"?I(null):p(null);return}const V=parseInt(L,10);isNaN(V)||(c==="BS"?I(V):p(V))},Ge=()=>{const s=c==="BS"?w:f;_.current=s,c==="BS"?I(null):p(null)},Ue=()=>{const s=c==="BS"?w:f;(s===null||String(s).trim()==="")&&(c==="BS"?I(_.current):p(_.current))},ge=()=>{const s=new Date,h=T(s);p(s.getFullYear()),C(s.getMonth()+1),M(s.getDate()),I(h.year),A(h.monthIndex+1),$(h.day)},We=s=>{we(s),me(s.latitude),he(s.longitude),X(s.zoneId),y(!1)},Ze=(s,h)=>{me(s),he(h),we({name:`${s.toFixed(4)}, ${h.toFixed(4)}`,romanization:"Manual Selection",latitude:s,longitude:h,zoneId:ue,offset:oe.find(E=>E.zoneId===ue)?.offset??5.75}),y(!1)},Me=()=>{let s=w,h=f;if(s===null&&h===null&&(ge(),s=r.year,h=u.getFullYear()),(c==="BS"?s:f)===null)return null;const L=J=>J.toString().padStart(2,"0");let V=h??u.getFullYear(),Ae=k,Pe=S;if(c==="BS"){const J=s??r.year,pe=gt(J,z-1,P);V=pe.getFullYear(),Ae=pe.getMonth()+1,Pe=pe.getDate()}let be=D;K==="PM"&&D<12&&(be+=12),K==="AM"&&D===12&&(be=0);const tt=`${V}-${L(Ae)}-${L(Pe)}T${L(be)}:${L(ve)}:${L(Se)}`,at=Z.latitude,st=Z.longitude,Te=Z.zoneId,$e=oe.find(J=>J.zoneId===Te),rt=$e?$e.offset:5.75;return{name:o,datetime:tt,latitude:at,longitude:st,zoneId:Te,offset:rt,options:{zodiac:"SIDEREAL",ayanamsa:"LAHIRI",houseSystem:"WHOLE_SIGN",divisionalCharts:[9],dashaSystem:"VIMSHOTTARI"}}},Xe=()=>{const s=c==="BS"?w:f;if(s===null||String(s).length<4)return!1;const[h,E]=c==="BS"?[At,Pt]:[Mt,It];return!(s<h||s>E)},Ie=()=>new Promise(s=>{Xe()?s(Me()):(ge(),U(!0),W(()=>s))});x.useImperativeHandle(i,()=>({validateAndGetData:Ie}));const Je=()=>{U(!1);const s=Me();R&&(R(s),W(null))},Qe=()=>{U(!1),R&&(R(null),W(null))},et=async s=>{s.preventDefault();const h=await Ie();h&&a(h)};return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:et,className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"name",value:o,onChange:s=>b(s.target.value),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"}),e.jsx("label",{htmlFor:"name",className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:t.name})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-700 rounded-md",children:[e.jsx("button",{type:"button",onClick:()=>{v("BS")},className:`px-4 py-1 text-sm rounded ${c==="BS"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:t.bs}),e.jsx("button",{type:"button",onClick:()=>{v("AD")},className:`px-4 py-1 text-sm rounded ${c==="AD"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:t.ad})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(Le,{children:[e.jsx(Ct,{label:t.year,value:c==="BS"?g(w??""):f??"",onChange:qe,onFocus:Ge,onBlur:Ue,type:"tel",inputMode:"numeric",autoComplete:"off"}),e.jsx(ee,{label:t.month,value:c==="BS"?z:k,onChange:s=>c==="BS"?A(Number(s.target.value)):C(Number(s.target.value)),children:Array.from({length:12},(s,h)=>e.jsx("option",{value:h+1,children:c==="BS"?ae[h]:ht[h]},h+1))}),e.jsx(ee,{label:t.day,value:c==="BS"?P:S,onChange:s=>c==="BS"?$(Number(s.target.value)):M(Number(s.target.value)),children:Array.from({length:H},(s,h)=>e.jsx("option",{value:h+1,children:g(h+1)},h+1))})]})}),e.jsx("button",{type:"button",onClick:ge,className:"px-3 py-2 text-sm bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500","aria-label":t.resetToToday,children:t.resetToToday})]})}),e.jsxs(Le,{children:[e.jsx(ee,{label:t.hour,value:D,onChange:s=>_e(Number(s.target.value)),children:Ve.map(s=>e.jsx("option",{value:s,children:g(s)},s))}),e.jsx(ee,{label:t.minute,value:ve,onChange:s=>Re(Number(s.target.value)),children:Ce.map(s=>e.jsx("option",{value:s,children:g(s)},s))}),e.jsx(ee,{label:t.second,value:Se,onChange:s=>Ke(Number(s.target.value)),children:Ce.map(s=>e.jsx("option",{value:s,children:g(s)},s))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-700 rounded-md",children:[e.jsx("button",{type:"button",onClick:()=>re("AM"),className:`px-4 py-1 text-sm rounded ${K==="AM"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:t.am}),e.jsx("button",{type:"button",onClick:()=>re("PM"),className:`px-4 py-1 text-sm rounded ${K==="PM"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:t.pm})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400 z-10",children:t.location}),e.jsxs("button",{type:"button",onClick:()=>{y(!0),j("search")},className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 flex justify-between items-center text-left",children:[e.jsxs("span",{children:[Z.name," ",e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["(",Z.romanization,")"]})]}),e.jsx(ft,{className:"w-4 h-4 text-gray-500"})]})]}),!n&&e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center items-center py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed dark:bg-blue-600 dark:hover:bg-blue-700 dark:disabled:bg-gray-500",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"w-5 h-5 mr-3 animate-spin"}),t.calculating]}):t.calculate})})]}),m&&e.jsx("div",{className:"fixed inset-0 flex items-start justify-center bg-black/60 z-50 p-4 pt-8 sm:pt-8 transition-opacity",onClick:()=>y(!1),children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 w-full h-3/6 sm:h-3/5 sm:max-h-[90vh] sm:rounded-lg shadow-xl max-w-lg p-4 flex flex-col transition-transform",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:N==="search"?t.searchOrSelectLocation:t.enterManually}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100",children:e.jsx(ke,{className:"w-5 h-5"})})]}),N==="search"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative my-4",children:[e.jsx(jt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:t.locationSearchPlaceholder,value:le,onChange:s=>Ye(s.target.value),className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 pl-10 pr-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:He.map(s=>e.jsxs("div",{onClick:()=>We(s),className:"p-2.5 cursor-pointer hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-md text-sm flex justify-between",children:[e.jsx("span",{children:s.name}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:s.romanization})]},s.name))}),e.jsx("div",{className:"pt-3 mt-3 border-t dark:border-gray-700 text-center",children:e.jsxs("button",{onClick:()=>j("manual"),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:[t.cantFindLocation," ",t.enterManuallyOrMap]})})]}):e.jsxs("div",{className:"pt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.0001",id:"latitude",value:O,onChange:s=>me(parseFloat(s.target.value)),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"}),e.jsx("label",{htmlFor:"latitude",className:"absolute -top-2 left-2.5 bg-slate-200 px-1 text-xs text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:t.latitudeShort})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.0001",id:"longitude",value:Y,onChange:s=>he(parseFloat(s.target.value)),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"}),e.jsx("label",{htmlFor:"longitude",className:"absolute -top-2 left-2.5 bg-slate-200 px-1 text-xs text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:t.longitudeShort})]})]}),e.jsx(St,{label:t.timezone,value:ue,onChange:s=>X(s.target.value),children:oe.map(s=>e.jsx("option",{value:s.zoneId,children:s.label},s.zoneId))}),e.jsxs("button",{type:"button",onClick:()=>De(!0),className:"w-full flex justify-center items-center gap-2 py-2 bg-gray-200 hover:bg-gray-300 rounded-md dark:bg-gray-600 dark:hover:bg-gray-500","aria-label":t.selectOnMap,children:[e.jsx(Nt,{className:"w-5 h-5"})," ",t.selectOnMap]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:()=>j("search"),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:["← ",t.backToSearch]})})]})]})}),Oe&&e.jsx(Dt,{onClose:()=>De(!1),onLocationSelect:Ze,initialPosition:[O,Y]}),se&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50 p-4 transition-opacity",children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full p-6 text-center",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-semibold text-amber-700 dark:text-amber-400",children:t.invalidDateTitle}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:t.invalidDateMessage(c)}),e.jsxs("div",{className:"mt-6 flex justify-center gap-4",children:[e.jsx("button",{onClick:Qe,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-300 rounded-md hover:bg-gray-400 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:t.edit}),e.jsx("button",{onClick:Je,className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600",children:t.proceed})]})]})})]})}),Tt=({cx:a,cy:l,onSelect:n})=>e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 400",children:[e.jsx("defs",{children:e.jsx("path",{id:"lotus-petal",d:`M 200 200
             C 150 150, 150 50, 200 0
             C 250 50, 250 150, 200 200 Z`})}),Array.from({length:12},(d,i)=>e.jsx("use",{href:"#lotus-petal",fill:"transparent",className:"overlay-wedge",style:{cursor:"pointer",pointerEvents:"auto"},transform:`rotate(${-i*30-90}, ${a}, ${l})`,onClick:()=>n(i+1)},i))]}),$t={10:0,11:-30,12:-60,1:-90,2:-120,3:-150,4:-180,5:-210,6:-240,7:-270,8:-300,9:-330};function ie(a){const l=Math.floor(a),n=Math.floor((a-l)*60);return`${g(l)}°${g(n)}′`}function Fe(a){const l=Math.round(a/30*100);return`${g(l)}%`}const Lt=({planets:a,ascendantSign:l,ascendantDegrees:n,ascendantNakshatra:d,ascendantNakshatraPada:i,chartType:u="lagna"})=>{const[r,o]=x.useState(null),b=a.find(m=>m.planet==="MOON"),c=b?.rashi??1,v=x.useMemo(()=>{const m=new Map;return a.forEach(y=>{const N=y.rashi,j=u==="chandra"?(N-c+12)%12+1:N;m.has(j)||m.set(j,[]),m.get(j).push(y)}),m},[a,u,c]);return e.jsxs("div",{className:"birth-chart-wrapper text-stone-800 dark:text-stone-100",children:[e.jsxs("div",{className:"birth-chart",children:[Array.from({length:12},(m,y)=>y+1).map(m=>{const y=v.get(m)||[],N=$t[m];if(N===void 0)return null;const j=[];return u!=="chandra"&&m===l&&j.push(e.jsxs("div",{className:"planet-item ascendant",children:[e.jsx("span",{children:Q.ASCENDANT}),n!==void 0&&e.jsx("span",{className:"planet-deg",children:ie(n)})]},"asc")),u==="chandra"&&m===1&&j.push(e.jsx("div",{className:"planet-item ascendant",children:e.jsxs("span",{children:[Q.ASCENDANT," (चन्द्र)"]})},"asc-chandra")),y.forEach(f=>{j.push(e.jsxs("div",{className:"planet-item",children:[e.jsx("span",{className:f.retrograde?"retrograde":"",children:Q[f.planet]}),f.degreesInSign!==void 0&&e.jsx("span",{className:"planet-deg",children:ie(f.degreesInSign)})]},f.planet))}),e.jsxs("div",{className:"petal",style:{transform:`translateX(-50%) rotate(${N}deg)`},children:[e.jsx("div",{className:"rashi-number font-semibold",children:g(m)}),e.jsx("div",{className:"planets-container",children:j})]},m)}),e.jsx("div",{className:"chart-center-dot text-2xl font-bold dark:text-red-400",children:"ॐ"}),e.jsx(Tt,{cx:200,cy:200,onSelect:m=>o(m)})]}),r&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",onClick:()=>o(null),children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 dark:text-stone-100 rounded-lg shadow-lg p-6 max-w-md w-full transition-colors duration-300",onClick:m=>m.stopPropagation(),children:[e.jsxs("h3",{className:"font-bold text-lg mb-2 text-blue-600 dark:text-blue-400",children:["घर ",g(r)," – ",F[r-1]," (स्वामी:"," ",G[bt[r]],")"]}),u!=="chandra"&&r===l&&n!==void 0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsxs("span",{children:[Q.ASCENDANT," (",F[l-1],")"]}),e.jsxs("span",{children:[ie(n)," (",Fe(n),")"]})]}),d&&i&&e.jsxs("div",{className:"text-sm ml-2 text-gray-600 dark:text-gray-400",children:[ye[d],g(i)]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round(n/30*100)}%`}})})]}),u==="chandra"&&r===1&&b&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:e.jsxs("span",{children:[Q.ASCENDANT," (चन्द्र)"]})}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round((b.degreesInSign||0)/30*100)}%`}})}),b.nakshatra&&b.nakshatraPada&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 font-semibold mt-1",children:["जनम नक्षत्र:"," ",ye[b.nakshatra],g(b.nakshatraPada)]})]}),(v.get(r)||[]).map(m=>{if(u==="chandra"&&r===1&&m.planet==="MOON")return null;const y=m.degreesInSign!==void 0?Math.round(m.degreesInSign/30*100):null;return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsx("span",{className:m.retrograde?"font-bold text-blue-600 dark:text-blue-400":"",children:G[m.planet]}),m.degreesInSign!==void 0&&e.jsxs("span",{children:[ie(m.degreesInSign)," (",Fe(m.degreesInSign),")"]})]}),m.nakshatra&&m.nakshatraPada&&e.jsxs("div",{className:"text-sm ml-2 text-gray-600 dark:text-gray-400",children:[ye[m.nakshatra],g(m.nakshatraPada)]}),y!==null&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded",style:{width:`${y}%`}})})]},m.planet)})]})})]})},Bt=({planets:a})=>e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg overflow-x-auto dark:bg-gray-800 dark:text-stone-100 transition-colors duration-300",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:t.planetaryPositions}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:t.planet}),e.jsx("th",{className:"py-2 px-2",children:t.rashi}),e.jsx("th",{className:"py-2 px-2",children:t.degrees}),e.jsx("th",{className:"py-2 px-2",children:t.nakshatra}),e.jsx("th",{className:"py-2 px-2",children:t.pada})]})}),e.jsx("tbody",{children:a.map(l=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-stone-700 hover:bg-amber-50/70 dark:hover:bg-gray-800 transition-colors duration-200",children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100",children:[G[l.planet],l.retrograde&&e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 ml-1",children:["(",t.retrograde,")"]})]}),e.jsx("td",{className:"py-2 px-2",children:F[l.rashi-1]}),e.jsx("td",{className:"py-2 px-2 font-mono",children:je(l.degreesInSign)}),e.jsx("td",{className:"py-2 px-2",children:l.nakshatra}),e.jsx("td",{className:"py-2 px-2",children:g(l.nakshatraPada)})]},l.planet))})]})]}),Ne=({data:a,title:l,titleClassName:n})=>{const d=k=>{if(!k)return"?";try{const C=new Date(k),S=C.getUTCHours(),M=C.getUTCMinutes(),w=S<12?t.am:t.pm,I=S%12===0?12:S%12;return`${g(I)}:${g(M.toString().padStart(2,"0"))} ${w}`}catch{return"?"}},i=(k,C,S)=>{if(!k||!C||!S)return"?";try{const M=re=>{const D=new Date(re);return new Date(D.getUTCFullYear(),D.getUTCMonth(),D.getUTCDate(),D.getUTCHours(),D.getUTCMinutes(),D.getUTCSeconds())},w=M(S),I=M(k),z=M(C),A=T(w),P=T(I),$=T(z),_=d(k),se=d(C),U=P.year===A.year&&P.monthIndex===A.monthIndex&&P.day===A.day,R=$.year===A.year&&$.monthIndex===A.monthIndex&&$.day===A.day,W=U?_:`${g(P.day)} गते ${_}`,K=R?se:`${g($.day)} गते ${se}`;return`${W} देखि ${K} सम्म`}catch{return"N/A"}},u=a.planets.find(k=>k.planet==="MOON"),r=a.planets.find(k=>k.planet==="SUN"),o=new Date(a.birthDetails.datetime),b=T(o),c=`${g(b.year)} ${ae[b.monthIndex]} ${g(b.day)}`,v=pt[o.getDay()],m=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(o),y=new Intl.DateTimeFormat("ne-NP",{hour:"numeric",minute:"numeric",hour12:!0}).format(o),N=yt[a.nakshatra.index],j=N?N.syllables[a.nakshatra.pada-1]:"?",f=F[a.ascendant.sign-1],p=je(a.ascendant.degreesInSign);return e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg h-full bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:`text-xl font-bold mb-4 text-center ${n||"text-blue-400 dark:text-blue-400"}`,children:l||t.birthDetails}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start ",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.birthDateBS,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:c})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.birthDateAD,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:m})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.birthTime,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:y})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.dayOfWeek,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:v})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:t.dailyTimings}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr] sm:grid-cols-[auto_1fr_auto_1fr] items-center gap-x-4 gap-y-2 text-sm",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.sunrise,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:g(a.sunRise)}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right sm:text-right",children:[t.sunset,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:g(a.sunSet)})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:t.astrologicalDetails}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr] items-center gap-x-4 gap-y-3 text-sm",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.lagna,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:[f," (",p,")"]}),a.ashtaKoota.lagnesh&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.lagnesh,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:a.ashtaKoota.lagnesh})]}),u&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.moonSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:F[u.rashi-1]})]}),a.ashtaKoota.rashiLord&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.rashiLord,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:a.ashtaKoota.rashiLord})]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.sunSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:F[r.rashi-1]})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.birthNakshatra,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.nakshatra.nameNepali}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:i(a.nakshatra.start,a.nakshatra.end,a.birthDetails.datetime)}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsxs("span",{className:"font-semibold",children:["पद ",g(a.nakshatra.pada),": "]}),i(a.nakshatra.padaStart,a.nakshatra.padaEnd,a.birthDetails.datetime)]})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.tithi,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[a.tithi.paksha," - ",g(a.tithi.tithiNumber)]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:i(a.tithi.start,a.tithi.end,a.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.yoga,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.yoga.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:i(a.yoga.start,a.yoga.end,a.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.karana,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.karana.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:i(a.karana.start,a.karana.end,a.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.suggestedSyllable,":"]}),e.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-600 text-lg text-left",children:j})]})]}),a.ashtaKoota&&e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:t.gunaMilanDetails}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto_1fr] sm:grid-cols-[auto_1fr_auto_1fr_auto_1fr] gap-x-4 gap-y-2 text-sm items-baseline",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.varna,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.varna}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.vasya,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.vasya}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.gana,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.gana}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.yoni,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.yoni}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.nadi,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.nadi}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.tatva,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.tatva}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.paya,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.paya})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-2",children:t.calculationDetails}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.backend,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[a.calculationMeta.backend,": ",a.calculationMeta.version]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.ayanamsa,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[a.calculationMeta.ayanamsa," (",je(a.calculationMeta.ayanamsaValue),")"]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.houseSystem,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.calculationMeta.houseSystem})]})]})]})]})},q=a=>{if(!a||a==="N/A")return"N/A";try{const l=new Date(a);if(isNaN(l.getTime()))return"N/A";const n=T(l),d=g(n.year.toString()),i=ae[n.monthIndex],u=g(n.day.toString());return`${d} ${i} ${u}`}catch(l){return console.error("Date formatting error:",l),"N/A"}},te=({dashaSequence:a,title:l})=>{const[n,d]=x.useState(null),i=l===t.jaiminiDasha,u=r=>{d(o=>o===r?null:r)};return e.jsxs("div",{className:"kundali-card p-2 sm:p-6 mb-11 print:mb-2 rounded-lg bg-slate-200 dark:bg-gray-800 break-inside-avoid-page page-break-inside-avoid",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4 print:hidden",children:l}),i&&e.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 -mt-3 mb-3 px-2 print:hidden",children:t.jaiminiProportionalNote}),e.jsx("div",{className:"print:hidden",children:e.jsxs("table",{className:"w-full text-left text-sm sm:text-base border-collapse",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:i?"दशा राशि":t.mahaDasha}),e.jsx("th",{className:"py-2 px-2",children:t.startsOn}),e.jsx("th",{className:"py-2 px-2",children:t.endsOn})]})}),e.jsx("tbody",{children:a.map(r=>{const o=r.planet+r.start,b=r.subDashas&&r.subDashas.length>0;return e.jsxs(ct.Fragment,{children:[e.jsxs("tr",{className:`border-b border-amber-100 dark:border-amber-800 ${b?"cursor-pointer hover:bg-amber-50/70 dark:hover:bg-amber-900/40":""}`,onClick:()=>b&&u(o),"aria-expanded":b&&n===o,"aria-controls":`antardasha-${o}`,children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100 flex items-center relative",children:[b&&e.jsxs("div",{className:"relative group",children:[e.jsx(xe,{className:`w-4 h-4 mr-2 text-amber-700 dark:text-blue-400 transition-transform duration-300 ${n===o?"rotate-180":""}`}),e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-1 px-2 py-1 bg-zinc-800 text-white text-xs rounded shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-[999] dark:bg-gray-800 dark:text-stone-200",children:t.antarDasha_clickToExpand})]}),e.jsx("span",{className:`z-0 ${b?"":"ml-6"}`,children:i?r.planet:G[r.planet]})]}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:q(r.start)}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:q(r.end)})]}),b&&e.jsx("tr",{className:"bg-slate-200 dark:bg-gray-800",children:e.jsx("td",{colSpan:3,className:"p-0 border-none",children:e.jsx("div",{id:`antardasha-${o}`,className:`overflow-hidden transition-all duration-500 ease-in-out ${n===o?"max-h-[1000px]":"max-h-0"}`,children:e.jsxs("div",{className:"p-4 bg-amber-50/50 dark:bg-amber-900/20",children:[e.jsx("h4",{className:"font-semibold text-blue-400 dark:text-blue-400 mb-2 pl-2",children:i?"अन्तरदशा राशि":t.antarDasha}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-stone-500 dark:text-stone-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:i?"राशि":t.planet}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:t.startsOn}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:t.endsOn})]})}),e.jsx("tbody",{children:r.subDashas.map(c=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-amber-800 last:border-b-0",children:[e.jsx("td",{className:"py-1.5 px-2 text-stone-800 dark:text-stone-100",children:i?c.planet:G[c.planet]}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:q(c.start)}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:q(c.end)})]},c.planet+c.start))})]})]})})})})]},o)})})]})}),e.jsxs("div",{className:"hidden print:block mt-1",children:[e.jsx("h4",{className:"text-lg font-semibold mb-1 text-stone-800",children:l}),i&&e.jsx("p",{className:"text-xs text-stone-500 -mt-1 mb-1 px-2 italic",children:t.jaiminiProportionalNote}),e.jsxs("table",{className:"w-full text-left text-sm border-collapse mb-1",children:[e.jsx("thead",{className:"border-b-2 border-stone-400 text-stone-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-1 px-2",children:i?"दशा राशि":t.mahaDasha}),e.jsx("th",{className:"py-1 px-2",children:t.startsOn}),e.jsx("th",{className:"py-1 px-2",children:t.endsOn})]})}),e.jsx("tbody",{children:a.slice(0,12).map(r=>e.jsxs("tr",{className:"border-b border-stone-200",children:[e.jsx("td",{className:"py-1 px-2 font-medium text-stone-800",children:i?r.planet:G[r.planet]}),e.jsx("td",{className:"py-1 px-2 text-stone-700",children:q(r.start)}),e.jsx("td",{className:"py-1 px-2 text-stone-700",children:q(r.end)})]},`print-${r.planet}-${r.start}`))})]}),e.jsx("p",{className:"text-xs text-stone-600 px-2 italic",children:t.subDashaPrintNote})]})]})},fe=({chart:a})=>{if(!a.chartData)return null;const l="planets"in a.chartData?a.chartData.planets:[],n="ascendant"in a.chartData?a.chartData.ascendant.sign:1,d="ascendant"in a.chartData?a.chartData.ascendant.degreesInSign:void 0,i="ascendant"in a.chartData?a.chartData.ascendant.nakshatra:void 0,u="ascendant"in a.chartData?a.chartData.ascendant.nakshatraPada:void 0;return e.jsxs("div",{className:"chart-instance dark:bg-gray-800 break-inside-avoid-page page-break-inside-avoid print:mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 text-center dark:text-blue-400",children:a.title}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(Lt,{planets:l.map(r=>({planet:r.planet,rashi:"rashi"in r?r.rashi:r.sign,degreesInSign:"degreesInSign"in r?r.degreesInSign:void 0,retrograde:r.retrograde,nakshatra:r.nakshatra,nakshatraPada:r.nakshatraPada})),ascendantSign:n,ascendantDegrees:d,ascendantNakshatra:i,ascendantNakshatraPada:u,chartType:a.type})})]},a.title)},Ot=({data:a,onReturnToForm:l})=>{const[n,d]=x.useState(!1),i=a.divisionalCharts.find(p=>p.name.includes("D9")),u=a.divisionalCharts.find(p=>p.name.includes("D10")),r=a.divisionalCharts.find(p=>p.name.includes("D3")),o=a.divisionalCharts.find(p=>p.name.includes("D12")),b=a.divisionalCharts.find(p=>p.name.includes("D4")),c=a.divisionalCharts.find(p=>p.name.includes("D60")),v=[{type:"lagna",title:t.rashiChart,chartData:a},{type:"chandra",title:t.chandraChart,chartData:a},{type:"navamsha",title:t.navamsaChart,chartData:i},{type:"dashamsa",title:t.dashamsaChart,chartData:u}],m=[{type:"drekkana",title:t.drekkanaChart,chartData:r},{type:"dwadamsha",title:t.dwadamshaChart,chartData:o},{type:"chaturthamsha",title:t.chaturthamshaChart,chartData:b},{type:"shashtiamsha",title:t.shashtiamshaChart,chartData:c}].filter(p=>p.chartData),y=new Date,N=T(y),j=`${g(N.year)} ${ae[N.monthIndex]} ${g(N.day)}`,f=y.toLocaleTimeString("ne-NP",{hour:"numeric",minute:"2-digit",hour12:!0});return e.jsxs("div",{className:"kundali-display-container flex flex-col bg-slate-200 rounded-xl shadow-lg w-full lg:max-w-4xl xl:max-w-6xl lg:p-4 md:p-1 space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border dark:border-gray-700 pb-32 print:pb-2 print:space-y-2",children:[e.jsxs("header",{className:"kundali-card rounded-lg text-center dark:bg-gray-800 dark:text-blue-400 transition-colors duration-300",children:[e.jsx("h2",{className:"text-3xl self-center font-bold text-blue-400 dark:text-blue-400",children:t.kundaliOf(a.birthDetails.name)}),e.jsxs("div",{className:"hidden text-xs self-center print:block font-bold text-gray-400 dark:text-gray-400",children:[t.printedDate,": ",j," ",f]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 print:gap-2",children:e.jsxs("div",{className:"flex flex-col gap-4 print:gap-2",children:[e.jsx("div",{className:"kundali-card p-4 print:p-2 rounded-lg bg-slate-200 dark:bg-gray-800 shadow",children:e.jsx(Ne,{data:a})}),e.jsx("div",{className:"kundali-card p-4 print:p-2 rounded-lg bg-slate-200 dark:bg-gray-800 shadow",children:e.jsx(Bt,{planets:a.planets})})]})}),e.jsxs("div",{className:"print:break-inside-avoid-page",children:[e.jsxs("div",{className:"print:hidden",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:v.map(p=>e.jsx(fe,{chart:p},p.type))}),m.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-6 mt-6 transition-all duration-500 overflow-hidden ${n?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:n&&m.map(p=>e.jsx(fe,{chart:p},p.type))}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("button",{onClick:()=>d(!n),className:"flex items-center justify-center gap-2 mx-auto px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-100/50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/40 transition",children:[e.jsx("span",{children:n?t.showLessCharts:t.showMoreCharts}),e.jsx(xe,{className:`w-4 h-4 transition-transform duration-300 ${n?"rotate-180":""}`})]})})]})]}),e.jsx("div",{className:"hidden print:block",children:e.jsx("div",{className:"flex flex-wrap -mx-2 mt-2 pt-4 border-t border-gray-300 dark:border-gray-700",children:[...v,...m].map(p=>e.jsx("div",{className:"w-1/2 px-2 mb-4 ",children:e.jsx(fe,{chart:p})},`print-${p.type}`))})})]}),e.jsxs("div",{className:"space-y-4 print:space-y-2 print:pt-2",children:[e.jsx(te,{dashaSequence:a.dashaSequence,title:t.dashaPeriods}),a.tribhagiDasha?.length>0&&e.jsx(te,{dashaSequence:a.tribhagiDasha,title:t.tribhagiDasha}),a.yoginiDasha?.length>0&&e.jsx(te,{dashaSequence:a.yoginiDasha,title:t.yoginiDasha}),a.ashtottariDasha?.length>0&&e.jsx(te,{dashaSequence:a.ashtottariDasha,title:t.ashtottariDasha}),a.jaiminiDasha?.length>0&&e.jsx(te,{dashaSequence:a.jaiminiDasha,title:t.jaiminiDasha})]}),e.jsx("div",{className:"hidden print:block text-center text-xs text-gray-500 pt-2 mt-2 border-t border-gray-300",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," ",t.project]})}),e.jsx("div",{className:"fixed bottom-12 left-1/2 transform -translate-x-1/2 z-[999] print:hidden print:h-0 w-full px-4 text-center",children:e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{className:"bg-blue-600 dark:bg-blue-600 text-white px-6 py-2 rounded shadow-md hover:bg-blue-700 transition flex items-center gap-2",onClick:l,children:["← ",t.returnToForm]}),e.jsxs("button",{className:"bg-gray-600 dark:bg-gray-500 text-white px-6 py-2 rounded shadow-md hover:bg-gray-700 transition flex items-center gap-2",onClick:()=>window.print(),children:[e.jsx(ze,{className:"w-4 h-4"})," ",t.print]})]})})]})},Ft={name:"सुरज",dateSystem:"BS",bsYear:2050,bsMonth:2,bsDay:2,hour:10,minute:15,second:0,period:"AM",location:{name:"काठमाडौं",romanization:"kathmandu",latitude:27.7172,longitude:85.324,offset:5.75,zoneId:"Asia/Kathmandu"}},Et={name:"अम्रिता",dateSystem:"BS",bsYear:2053,bsMonth:8,bsDay:9,hour:2,minute:30,second:0,period:"PM",location:{name:"काठमाडौं",romanization:"kathmandu",latitude:27.7172,longitude:85.324,offset:5.75,zoneId:"Asia/Kathmandu"}},Yt=({onCalculate:a,isLoading:l,defaultValues:n})=>{const d=x.useRef(null),i=x.useRef(null),u=async()=>{const r=d.current?.validateAndGetData(),o=i.current?.validateAndGetData();if(r&&o){const[b,c]=await Promise.all([r,o]);b&&c&&a(b,c)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-lg p-4 dark:bg-gray-800/50",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700 dark:text-blue-300 mb-4 text-center",children:t.groomDetails}),e.jsx(Be,{ref:d,onCalculate:()=>{},isLoading:!1,hideSubmitButton:!0,defaultValues:n?.groom||Ft})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-lg p-4 dark:bg-gray-800/50",children:[e.jsx("h2",{className:"text-xl font-bold text-pink-700 dark:text-pink-400 mb-4 text-center",children:t.brideDetails}),e.jsx(Be,{ref:i,onCalculate:()=>{},isLoading:!1,hideSubmitButton:!0,defaultValues:n?.bride||Et})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"button",onClick:u,disabled:l,className:"w-full flex justify-center items-center py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed dark:bg-green-600 dark:hover:bg-green-700 dark:disabled:bg-gray-500",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"w-5 h-5 mr-3 animate-spin"}),t.calculating]}):t.calculateComparison})})]})},B=({label:a,groomValue:l,brideValue:n,maxPoints:d,obtainedPoints:i})=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-stone-700 last:border-b-0",children:[e.jsx("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100",children:a}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:l}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:n}),e.jsx("td",{className:"py-2 px-2 text-center text-stone-700 dark:text-stone-200",children:g(d)}),e.jsx("td",{className:"py-2 px-2 text-center font-semibold text-stone-800 dark:text-stone-100",children:g(i)})]}),Ht=({result:a,onReturnToForm:l})=>{const{groom:n,bride:d,score:i,conclusion:u}=a,r=new Date,o=T(r),b=`${g(o.year)} ${ae[o.monthIndex]} ${g(o.day)}`,c=r.toLocaleTimeString("ne-NP",{hour:"numeric",minute:"2-digit",hour12:!0});return e.jsxs("div",{className:`kundali-display-container flex flex-col bg-slate-200 rounded-xl shadow-lg w-full lg:max-w-4xl xl:max-w-6xl 
                 lg:p-4 md:p-1 space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 
                 dark:border dark:border-gray-700 pb-32 print:pb-0 print:m-0 print:rounded-none print:shadow-none print:bg-transparent`,children:[e.jsxs("header",{className:"kundali-card rounded-lg text-center p-4 dark:bg-gray-800",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-400 dark:text-blue-400",children:[n.birthDetails.name," र ",d.birthDetails.name," को गुण मिलान"]}),e.jsxs("div",{className:"hidden text-xs self-center print:block font-bold text-gray-400 dark:text-gray-400",children:[t.printedDate,": ",b," ",c]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ne,{data:n,title:t.groomDetails,titleClassName:"text-blue-700 dark:text-blue-300"}),e.jsx(Ne,{data:d,title:t.brideDetails,titleClassName:"text-pink-700 dark:text-pink-400"})]}),e.jsxs("div",{className:"kundali-card p-3 sm:p-5 rounded-lg overflow-x-auto bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:t.gunaMilanTableTitle}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:t.koota}),e.jsx("th",{className:"py-2 px-2",children:t.groom}),e.jsx("th",{className:"py-2 px-2",children:t.bride}),e.jsx("th",{className:"py-2 px-2 text-center",children:t.maxPoints}),e.jsx("th",{className:"py-2 px-2 text-center",children:t.obtainedPoints})]})}),e.jsxs("tbody",{children:[e.jsx(B,{label:t.varna,groomValue:n.ashtaKoota.varna,brideValue:d.ashtaKoota.varna,maxPoints:1,obtainedPoints:i.varna}),e.jsx(B,{label:t.vasya,groomValue:n.ashtaKoota.vasya,brideValue:d.ashtaKoota.vasya,maxPoints:2,obtainedPoints:i.vasya}),e.jsx(B,{label:t.tara,groomValue:n.nakshatra.nameNepali,brideValue:d.nakshatra.nameNepali,maxPoints:3,obtainedPoints:i.tara}),e.jsx(B,{label:t.yoni,groomValue:n.ashtaKoota.yoni,brideValue:d.ashtaKoota.yoni,maxPoints:4,obtainedPoints:i.yoni}),e.jsx(B,{label:t.grahaMaitri,groomValue:n.ashtaKoota.rashiLord,brideValue:d.ashtaKoota.rashiLord,maxPoints:5,obtainedPoints:i.grahaMaitri}),e.jsx(B,{label:t.gana,groomValue:n.ashtaKoota.gana,brideValue:d.ashtaKoota.gana,maxPoints:6,obtainedPoints:i.gana}),e.jsx(B,{label:t.bhakoot,groomValue:F[n.planets.find(v=>v.planet==="MOON").rashi-1],brideValue:F[d.planets.find(v=>v.planet==="MOON").rashi-1],maxPoints:7,obtainedPoints:i.bhakoot}),e.jsx(B,{label:t.nadi,groomValue:n.ashtaKoota.nadi,brideValue:d.ashtaKoota.nadi,maxPoints:8,obtainedPoints:i.nadi})]}),e.jsx("tfoot",{className:"border-t-2 border-amber-300 dark:border-amber-600 font-bold",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"py-2 px-2 text-right text-stone-800 dark:text-stone-100",children:t.totalPoints}),e.jsx("td",{className:"px-2 text-center text-stone-800 dark:text-stone-100",children:g(36)}),e.jsx("td",{className:"px-2 text-center text-lg text-blue-600 dark:text-blue-400",children:g(i.total)})]})})]})]}),e.jsxs("div",{className:"kundali-card rounded-lg bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400",children:t.conclusion}),e.jsx("p",{className:"text-stone-800 dark:text-stone-100",children:u})]}),e.jsx("div",{className:"hidden print:block text-center text-xs text-gray-500 mt-4 border-t border-gray-300",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," ",t.project]})}),e.jsxs("div",{className:"fixed bottom-12 left-1/2 transform -translate-x-1/2 z-[999] w-full px-4 text-center screen-only-footer print:hidden",children:[e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{className:"bg-blue-600 dark:bg-blue-600 text-white px-6 py-2 rounded shadow-md hover:bg-blue-700 dark:hover:bg-blue-800 transition flex items-center gap-2",onClick:l,children:["← ",t.returnToForm]}),e.jsxs("button",{className:"bg-gray-600 dark:bg-gray-500 text-white px-6 py-2 rounded shadow-md hover:bg-gray-700 dark:hover:bg-gray-600 transition flex items-center gap-2",onClick:()=>window.print(),children:[e.jsx(ze,{className:"w-4 h-4"})," ",t.print]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 md:hidden",children:t.mobilePrintHint})]})]})},Vt=({onClose:a,onEdit:l,onView:n})=>{const[d,i]=x.useState([]);x.useEffect(()=>{try{const o=localStorage.getItem("savedKundalis");o&&i(JSON.parse(o))}catch(o){console.error("Failed to load saved kundalis:",o)}},[]);const u=o=>{if(window.confirm(t.deleteConfirm)){const b=d.filter(c=>c.id!==o);i(b),localStorage.setItem("savedKundalis",JSON.stringify(b))}},r=o=>{const b=new Date(o);return new Intl.DateTimeFormat("ne-NP-u-nu-deva",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(b)};return e.jsx("div",{className:"fixed inset-0 flex flex-wrap items-center justify-center bg-black/60 z-50 p-4 transition-opacity",onClick:a,children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full max-h-[80vh] flex flex-wrap flex-col p-6",onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-500 dark:text-blue-400",children:t.savedKundalis}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(ke,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:d.length===0?e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-10",children:t.noSavedKundalis}):e.jsx("ul",{className:"space-y-3",children:d.map(o=>e.jsx("li",{className:"bg-slate-50 dark:bg-gray-700 p-3 rounded-md shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-600 dark:text-blue-300",children:o.type==="individual"?o.name:`${o.groomName} र ${o.brideName}`}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${o.type==="individual"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:o.type==="individual"?t.individual:t.comparison}),e.jsxs("span",{className:"ml-2",children:[t.savedOn," ",r(o.timestamp)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>n(o),className:"px-3 py-1 text-sm text-white bg-blue-500 rounded hover:bg-blue-600",children:t.view}),e.jsx("button",{onClick:()=>l(o),className:"px-3 py-1 text-sm text-gray-700 bg-gray-300 rounded hover:bg-gray-400 dark:bg-gray-500 dark:text-gray-100 dark:hover:bg-gray-400",children:t.edit}),e.jsx("button",{onClick:()=>u(o.id),className:"px-3 py-1 text-sm text-white bg-red-500 rounded hover:bg-red-600",children:t.delete})]})]})},o.id))})})]})})};export{Ht as C,Ot as K,Vt as S,Yt as a,Be as b};
