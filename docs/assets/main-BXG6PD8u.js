const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./pages-CvuvPmlx.js","./vendor-react-Bt5jsM_t.js","./vendor-other-DQJqTIja.js","./vendor-leaflet-Ch3uxlbW.js","./vendor-leaflet-Dgihpmma.css","./data-AHl0rTh7.js","./bikram-C-wTWGk0.js","./kundali-Ce1sDlE2.js","./vendor-utils-y-iLWhYP.js"])))=>i.map(i=>d[i]);
import"./index-CCIq1DnA.js";import{r as t,j as e,D as R,G as le,X as ie,H as de,S as ce,a as ue,I as V,M as he,b as me,J as fe,K as pe}from"./vendor-react-Bt5jsM_t.js";import{a3 as E,a4 as ge,N as w,C as xe,T as ye,s as be,u as ve,M as we,a5 as ke,a6 as Se,a7 as je}from"./bikram-C-wTWGk0.js";import{t as N,u as Te,A as Ne,T as Ee}from"./pages-CvuvPmlx.js";import{l as Ae,m as Ie,a as Ce,b as Le}from"./vendor-leaflet-Ch3uxlbW.js";import"./vendor-other-DQJqTIja.js";import"./data-AHl0rTh7.js";import"./kundali-Ce1sDlE2.js";import"./vendor-utils-y-iLWhYP.js";const _e=()=>{const[a,s]=t.useState("light");return t.useEffect(()=>{const h=localStorage.getItem("theme")||"light";s(h),document.documentElement.classList.toggle("dark",h==="dark")},[]),{theme:a,toggleTheme:()=>{const c=a==="light"?"dark":"light";s(c),localStorage.setItem("theme",c),document.documentElement.classList.toggle("dark",c==="dark")},resetTheme:()=>{localStorage.removeItem("theme"),s("light"),document.documentElement.classList.toggle("dark",!1)}}},Pe=()=>{const[a,s]=t.useState("tabs"),[g,d]=t.useState("topbar");return t.useEffect(()=>{const r=localStorage.getItem("menuStyle");s(r||"tabs");const f=localStorage.getItem("desktopLayoutStyle");d(f||"topbar")},[]),{menuStyle:a,desktopLayoutStyle:g,handleSetMenuStyle:r=>{s(r),localStorage.setItem("menuStyle",r)},handleSetDesktopLayoutStyle:r=>{d(r),localStorage.setItem("desktopLayoutStyle",r)},resetLayoutSettings:()=>{localStorage.removeItem("menuStyle"),localStorage.removeItem("desktopLayoutStyle"),s("tabs"),d("topbar")}}};function U(a={}){const{immediate:s=!1,onNeedRefresh:g,onOfflineReady:d,onRegistered:c,onRegisteredSW:h,onRegisterError:m}=a;let r,f;const x=async(n=!0)=>{await f};async function p(){if("serviceWorker"in navigator){if(r=await E(async()=>{const{Workbox:n}=await import("./vendor-other-DQJqTIja.js").then(l=>l.w);return{Workbox:n}},[],import.meta.url).then(({Workbox:n})=>new n("./sw.js",{scope:"./",type:"classic"})).catch(n=>{m?.(n)}),!r)return;r.addEventListener("activated",n=>{(n.isUpdate||n.isExternal)&&window.location.reload()}),r.addEventListener("installed",n=>{n.isUpdate||d?.()}),r.register({immediate:s}).then(n=>{h?h("./sw.js",n):c?.(n)}).catch(n=>{m?.(n)})}}return f=p(),x}const Re=()=>{const[a,s]=t.useState(!1),[g,d]=t.useState(!1),[c,h]=t.useState(()=>localStorage.getItem("pwa_installed")==="true"),[m,r]=t.useState(null);return t.useEffect(()=>{U({immediate:!0})},[]),t.useEffect(()=>{const x=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone;if(s(!!x),x){h(!0);return}const p=()=>{localStorage.setItem("pwa_installed","true"),h(!0),d(!1)};window.addEventListener("appinstalled",p),"getInstalledRelatedApps"in navigator&&navigator.getInstalledRelatedApps().then(l=>{l.length>0&&(localStorage.getItem("pwa_installed")!=="true"&&localStorage.setItem("pwa_installed","true"),h(!0))});const n=l=>{l.preventDefault(),localStorage.removeItem("pwa_installed"),h(!1),r(l),d(!0)};return window.addEventListener("beforeinstallprompt",n),()=>{window.removeEventListener("appinstalled",p),window.removeEventListener("beforeinstallprompt",n)}},[]),{isStandalone:a,canInstall:g,isInstalled:c,deferredPrompt:m,handleInstallClick:async()=>{m&&(m.prompt(),await m.userChoice,r(null),d(!1))}}},De=()=>{const[a,s]=t.useState("calendar"),[g,d]=t.useState(null),[c,h]=t.useState(!1),[m,r]=t.useState(!1),[f,x]=t.useState(!1),[p,n]=t.useState(!1),l=t.useRef(null),[I,T]=t.useState(!1),i=t.useRef(null),k=t.useRef(0),[u,L]=t.useState(!1);t.useEffect(()=>{let o=null,y=0;const b=25,S=()=>{y++,typeof window.Android<"u"&&typeof window.Android.isAndroidApp=="function"?(L(!0),o&&clearInterval(o)):y>=b&&o&&clearInterval(o)};return S(),u||(o=window.setInterval(S,200)),()=>{o&&clearInterval(o)}},[]),t.useEffect(()=>{const o=y=>{m&&y.key==="Backspace"&&(y.preventDefault(),r(!1))};return m&&window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[m]);const j=t.useCallback(()=>c?(h(!1),!0):f?(x(!1),!0):m?(r(!1),!0):a==="kundali"?p&&l.current?(l.current(),!0):(s("calendar"),!0):a==="converter"||a==="settings"||a==="privacy"||a==="radio"?(s("calendar"),!0):!1,[c,f,m,a,p]);t.useEffect(()=>{const o=()=>{k.current=0,T(!1),i.current&&(clearTimeout(i.current),i.current=null)};if(window.handleBackPress=()=>j()?(o(),!0):(k.current+=1,k.current===1?(T(!0),navigator.vibrate&&navigator.vibrate(50),i.current&&clearTimeout(i.current),i.current=window.setTimeout(()=>o(),2e3),!0):(o(),!1)),!u){const y=()=>{const S=new URL(window.location.href);S.hash=`#${Date.now()}`,window.history.pushState({dummy:!0},"",S.toString())};y();const b=()=>{if(j()){y();return}k.current+=1,k.current===1?(T(!0),navigator.vibrate&&navigator.vibrate(50),i.current&&clearTimeout(i.current),i.current=window.setTimeout(()=>o(),2e3),y()):(o(),window.history.go(-2))};return window.addEventListener("popstate",b),()=>{window.removeEventListener("popstate",b),o(),window.handleBackPress=void 0}}return()=>{u&&o()}},[u,j]);const C=o=>{d(o),h(!0)},_=t.useCallback(o=>{l.current=o},[]);return{activeView:a,setActiveView:s,selectedDate:g,isModalOpen:c,setIsModalOpen:h,isMenuOpen:m,setIsMenuOpen:r,isAboutOpen:f,setIsAboutOpen:x,isKundaliResultsVisible:p,setIsKundaliResultsVisible:n,showExitToast:I,handleDayClick:C,isAndroidWebView:u,setKundaliBackAction:_}},Me=(a,s)=>{const[g,d]=t.useState(!1),[c,h]=t.useState(null),[m,r]=t.useState(null),[f,x]=t.useState(!1),[p,n]=t.useState(null);return t.useEffect(()=>{typeof window.Android<"u"&&typeof window.Android.openWidgetSettings=="function"&&d(!0)},[]),t.useEffect(()=>{const i=k=>{if(k?.preventDefault?.(),a){s(!1);return}if(f)window.Android?.exitApp?window.Android.exitApp():window.history.length>1?window.history.back():window.close();else{x(!0);const u=window.setTimeout(()=>x(!1),2e3);n(u)}};return window.addEventListener("popstate",i),document.addEventListener("backbutton",i),()=>{window.removeEventListener("popstate",i),document.removeEventListener("backbutton",i),p&&clearTimeout(p)}},[a,f,p,s]),{isAndroidApp:g,showExitToast:f,handleTouchStart:i=>{h(i.touches[0].clientX),r(null)},handleTouchMove:i=>r(i.touches[0].clientX),handleTouchEnd:()=>{if(!c||!m)return;const i=m-c;i>60&&c<50?s(!0):i<-60&&a&&s(!1),h(null),r(null)}}},A=2e3,D=3e3,Be='id="root"',W=location.origin+"/",Oe=async()=>{try{const a=`${W}?t=${Date.now()}`,s=await fetch(a,{cache:"no-store",credentials:"omit",headers:{"Cache-Control":"no-cache"}});return s.ok?(s.headers.get("Content-Type")||"").includes("text/html")&&(await s.text()).includes(Be)?"fresh":"invalid":"unreachable"}catch{return"unreachable"}},Y=async()=>{if(!navigator.onLine){N("Offline! Full refresh aborted.","error",D);return}const a=await Oe();if(a==="unreachable"){N("Origin URL is not available. Using cached app...","error",D),typeof caches<"u"&&typeof caches.keys=="function"?setTimeout(()=>window.location.reload(),D):console.log("‚ÑπÔ∏è Cache API not available ‚Äî skipping reload for safety.");return}if(a==="invalid"){N("Warning: Cache data not replaced. Using cached app...","warning",A),typeof caches<"u"&&typeof caches.keys=="function"?setTimeout(()=>window.location.reload(),A):console.log("‚ÑπÔ∏è Cache API not available ‚Äî skipping reload for safety.");return}N("Fresh version confirmed. Reloading now...","info",A),setTimeout(()=>{window.location.href=W},A),typeof caches<"u"&&typeof caches.keys=="function"?setTimeout(async()=>{try{const s=await caches.keys();await Promise.all(s.map(g=>caches.delete(g))),console.log("‚úÖ Old cache cleared post-reload.")}catch(s){console.warn("Cache cleanup failed:",s)}},A+3e3):console.log("‚ÑπÔ∏è Cache API not available ‚Äî skipping cache clear for safety.")},Ve=t.lazy(()=>E(()=>import("./pages-CvuvPmlx.js").then(a=>a.K),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),Ye=t.lazy(()=>E(()=>import("./pages-CvuvPmlx.js").then(a=>a.c),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),Ue=t.lazy(()=>E(()=>import("./pages-CvuvPmlx.js").then(a=>a.S),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),We=t.lazy(()=>E(()=>import("./pages-CvuvPmlx.js").then(a=>a.b),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),ze=t.lazy(()=>E(()=>import("./pages-CvuvPmlx.js").then(a=>a.r),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),Ke=()=>{const{theme:a,toggleTheme:s,resetTheme:g}=_e(),{menuStyle:d,desktopLayoutStyle:c,handleSetMenuStyle:h,handleSetDesktopLayoutStyle:m,resetLayoutSettings:r}=Pe(),{isStandalone:f,canInstall:x,handleInstallClick:p}=Re(),{activeView:n,setActiveView:l,selectedDate:I,isModalOpen:T,setIsModalOpen:i,isMenuOpen:k,setIsMenuOpen:u,isAboutOpen:L,setIsAboutOpen:j,handleDayClick:C,setIsKundaliResultsVisible:_,setKundaliBackAction:o,showExitToast:y}=De(),{activeSystem:b,currentYear:S,currentMonth:P,currentBsYear:z,currentBsMonth:K,currentAdYear:X,currentAdMonth:$,switchSystem:F,goToToday:H,changeMonth:M,changeYear:B,setCurrentBsYear:G,setCurrentAdYear:J,setCurrentBsMonth:q,setCurrentAdMonth:Q,initialToday:O,initialTodayBs:Z,todayDetails:ee}=Te(),{isAndroidApp:te,handleTouchStart:ae,handleTouchMove:se,handleTouchEnd:ne}=Me(k,u),re=()=>{g(),r(),N.info("Settings reset to default",2e3)};t.useEffect(()=>{y&&N.info(b==="bs"?"‡§¨‡§®‡•ç‡§¶ ‡§ó‡§∞‡•ç‡§®‡§ï‡•ã ‡§≤‡§æ‡§ó‡§ø ‡§´‡•á‡§∞‡§ø ‡§•‡§ø‡§ö‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç":"Press back again to exit",2e3)},[y,b]);const oe=()=>{C(O)};return e.jsxs("div",{className:`min-h-screen flex flex-col bg-slate-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-colors relative ${c==="sidebar"?"md:flex-row":""} ${a==="dark"?"dark":""}`,onTouchStart:ae,onTouchMove:se,onTouchEnd:ne,children:[c==="topbar"&&e.jsxs("div",{className:"w-full flex items-center justify-between px-4 py-2 bg-slate-200 dark:bg-gray-800 z-30 print:hidden",children:[e.jsx(ge,{activeView:n,onNavigate:v=>{v==="about"?j(!0):l(v)}}),!f&&x&&e.jsxs("button",{onClick:p,className:"hidden md:flex ml-4 p-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 items-center gap-2 text-sm",children:[e.jsx(R,{className:"w-4 h-4"})," ",e.jsx("span",{children:w.installApp})]})]}),e.jsx("header",{className:"px-4 py-2 dark:border-gray-700 bg-slate-200 dark:bg-gray-800 z-30 md:hidden",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d==="slide"&&e.jsx("button",{onClick:()=>u(!0),className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(le,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-lg sm:text-xl font-semibold",children:w.Nepdate_calendar})]}),d==="tabs"&&!f&&x&&e.jsxs("button",{onClick:p,className:"px-3 py-2 text-left text-xs rounded bg-blue-600 text-white hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5"})," ",e.jsx("span",{children:w.installApp})]})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-40 md:hidden",onClick:()=>u(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-50 h-full bg-slate-200 dark:bg-gray-800 shadow-xl transform transition-transform duration-300 ease-in-out
          ${k?"translate-x-0":"-translate-x-full"}
          ${c==="sidebar"?"md:translate-x-0 md:sticky md:h-screen md:w-56":"md:hidden w-64"}`,children:e.jsxs("div",{className:"flex flex-col h-full p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Menu"}),e.jsx("button",{onClick:()=>u(!1),className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 md:hidden",children:e.jsx(ie,{className:"w-5 h-5"})})]}),e.jsxs("nav",{className:"flex flex-col space-y-3 text-gray-800 dark:text-gray-200",children:[e.jsxs("button",{onClick:()=>{l("calendar"),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded hover:bg-gray-300 dark:hover:bg-gray-700",children:[e.jsx(de,{className:"w-4 h-4"})," ",w.home]}),e.jsxs("button",{onClick:()=>{l("converter"),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded hover:bg-gray-300 dark:hover:bg-gray-700",children:[e.jsx(ce,{className:"w-4 h-4"})," ",w.converter]}),e.jsxs("button",{onClick:()=>{l("kundali"),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded hover:bg-gray-300 dark:hover:bg-gray-700",children:["üîØ ",w.kundali]}),e.jsxs("button",{onClick:()=>{l("settings"),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded hover:bg-gray-300 dark:hover:bg-gray-700",children:[e.jsx(ue,{className:"w-4 h-4"})," ",w.settings]}),e.jsxs("button",{onClick:()=>{l("privacy"),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded hover:bg-gray-300 dark:hover:bg-gray-700",children:[e.jsx(V,{className:"w-4 h-4"})," Privacy Policy"]}),e.jsxs("button",{onClick:()=>{j(!0),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded hover:bg-gray-300 dark:hover:bg-gray-700",children:[e.jsx(V,{className:"w-4 h-4"})," ",w.about]}),!f&&x&&e.jsxs("button",{onClick:()=>{p(),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded bg-blue-600 text-white hover:bg-blue-700",children:[e.jsx(R,{className:"w-4 h-4"})," ",w.installApp]}),e.jsxs("button",{onClick:()=>{s(),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded hover:bg-gray-300 dark:hover:bg-gray-700",children:[a==="light"?e.jsx(he,{className:"w-4 h-4"}):e.jsx(me,{className:"w-4 h-4"})," ",a==="light"?w.darkMode:w.lightMode]}),e.jsx("hr",{className:"border-gray-300 dark:border-gray-600 my-2"}),e.jsxs("button",{onClick:()=>{Y(),u(!1)},className:"px-3 py-2 flex items-center gap-2 rounded text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/50",children:[e.jsx(fe,{className:"w-4 h-4"})," Clear Cache & Reload"]})]}),e.jsxs("div",{className:"mt-auto text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700 pt-4",children:["¬© ",new Date().getFullYear()," ",w.project]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:`h-full overflow-auto px-4 md:px-6 max-w-7xl xl:max-w-6xl mx-auto w-full ${d==="tabs"?"pb-24 md:pb-6":"pb-20 md:pb-6"}`,children:n==="kundali"?e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:e.jsx(Ve,{onBack:()=>l("calendar"),setIsKundaliResultsVisible:_,setKundaliBackAction:o})}):n==="calendar"?e.jsxs(e.Fragment,{children:[e.jsx(xe,{activeSystem:b,bsYear:z,bsMonth:K,adYear:X,adMonth:$,onSystemChange:F,onTodayClick:H,theme:a,onThemeToggle:s}),e.jsxs("main",{className:"min-h-[60vh] md:grid md:grid-cols-12 md:gap-x-6",children:[e.jsx("aside",{className:"hidden md:block md:col-span-4",children:e.jsx(ye,{todayAd:O,todayBs:Z,todayDetails:ee,onShowDetailsClick:oe})}),e.jsxs("div",{className:"md:col-span-8 flex flex-col",children:[e.jsx(be,{activeSystem:b,currentYear:S,currentMonth:P,onYearChange:v=>b==="bs"?G(v):J(v),onMonthChange:v=>b==="bs"?q(v):Q(v),onPrevMonth:()=>M("prev"),onNextMonth:()=>M("next"),onPrevYear:()=>B("prev"),onNextYear:()=>B("next")}),e.jsx(ve,{activeSystem:b,currentYear:S,currentMonth:P,onDayClick:C}),e.jsx(we,{activeSystem:b,currentYear:S,currentMonth:P})]})]})]}):n==="converter"?e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:e.jsx(Ye,{onBack:()=>l("calendar")})}):n==="settings"?e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:e.jsx(Ue,{onBack:()=>l("calendar"),currentTheme:a,onThemeChange:s,currentMenuStyle:d,onMenuStyleChange:h,currentDesktopLayoutStyle:c,onDesktopLayoutStyleChange:m,onResetSettings:re,isAndroidApp:te,onReloadApp:Y})}):n==="privacy"?e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:e.jsx(We,{})}):n==="radio"?e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:e.jsx(ze,{})}):null})}),d==="slide"&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-slate-200 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-50 print:hidden md:hidden",children:e.jsx(ke,{})}),d==="tabs"&&e.jsx("div",{className:"md:hidden print:hidden",children:e.jsx(Se,{activeView:n,onNavigate:v=>{v==="about"?j(!0):l(v==="privacy"?"privacy":v)}})}),e.jsx(je,{date:I,isOpen:T,onClose:()=>i(!1)}),L&&e.jsx(Ne,{setIsAboutOpen:j}),e.jsx(Ee,{})]})};Ae.Icon.Default.mergeOptions({iconUrl:Le,shadowUrl:Ce,iconRetinaUrl:Ie});U({onNeedRefresh(){confirm("A new version is available. Reload to update?")&&window.location.reload()},onOfflineReady(){console.log("App ready to work offline")}});pe.createRoot(document.getElementById("root")).render(e.jsx(t.StrictMode,{children:e.jsx(Ke,{})}));
