import{r as i,j as e,b as ze,T as Be,u as Re,c as Fe,R as He}from"./vendor-react-bPX-m1Fo.js";import{n as Y,T as J,B as R,L as Ye,M as he,C as K,a as Ke,X as Ze}from"./data-rt8xS2sv.js";import{t as ae,N as s,g as We,a as m,b as se,f as Ve,c as E,d as Q,e as M,h as P,R as qe,i as ge,j as Ge,k as Xe}from"./bikram-BHmd_n6S.js";import{t as Ue}from"./vendor-utils-y-iLWhYP.js";const Je=Y.find(t=>t.romanization.toLowerCase()==="kathmandu"),w=Je??Y[0],Qe=({label:t,children:l,...c})=>e.jsxs("div",{className:"relative w-full",children:[e.jsx("select",{...c,className:"w-full appearance-none bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:focus:bg-blue-400 dark:focus:border-blue-400",children:l}),e.jsx("label",{className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:t}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx(K,{className:"w-4 h-4"})})]}),ea=({onClose:t,onLocationSelect:l,initialPosition:c})=>{const[o,r]=i.useState(c),h=()=>(Re({click(b){r([b.latlng.lat,b.latlng.lng])}}),e.jsx(Fe,{position:o})),n=()=>{l(o[0],o[1]),t()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 py-2 z-40 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-slate-50 rounded-lg w-full max-w-2xl h-[70vh] flex flex-col dark:bg-gray-800 dark:text-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center border-b p-3 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.selectOnMap}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100",children:e.jsx(Ze,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 relative",children:e.jsxs(ze,{center:c,zoom:7,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},children:[e.jsx(Be,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(h,{})]})}),e.jsxs("div",{className:"border-t p-3 flex justify-between items-center dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Lat: ",o[0].toFixed(4),", Lon: ",o[1].toFixed(4)]}),e.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 dark:bg-blue-400 dark:text-blue-900 dark:hover:bg-blue-500 dark:hover:text-white",children:s.selectLocation})]})]})})},ee=({children:t})=>e.jsx("div",{className:"grid grid-cols-3 border border-gray-300 rounded-md overflow-hidden divide-x divide-gray-300 focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500 dark:border-gray-600 dark:divide-gray-600 dark:focus-within:border-blue-400 dark:focus-within:ring-blue-400",children:t}),k=({label:t,children:l,...c})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute top-1 left-2 text-xs text-gray-500 z-10 dark:text-gray-400",children:t}),e.jsx("select",{...c,className:"relative w-full appearance-none bg-gray-100 pt-5 pb-1.5 px-2 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 z-0 dark:bg-gray-700 dark:text-gray-200 dark:focus:bg-gray-600",children:l}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 z-10 dark:text-gray-300",children:e.jsx(K,{className:"w-4 h-4"})})]}),ca=({onCalculate:t,isLoading:l})=>{const[c,o]=i.useState("प्रयोगकर्ता"),[r,h]=i.useState("BS"),n=i.useRef(null);i.useEffect(()=>{function a(x){n.current&&!n.current.contains(x.target)&&L(!1)}return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]);const b=new Date,y=ae(b),[d,g]=i.useState(b.getFullYear()),[p,j]=i.useState(b.getMonth()+1),[u,te]=i.useState(b.getDate()),[$,be]=i.useState(y.year),[_,pe]=i.useState(y.monthIndex+1),[O,re]=i.useState(y.day),[Z,je]=i.useState("PM"),[T,fe]=i.useState(4),[ne,ke]=i.useState(15),[le,ye]=i.useState(0),[Ne,ve]=i.useState(s.self),[N,W]=i.useState("nepal"),[f,Se]=i.useState(w),[v,V]=i.useState(w?.latitude??27.7172),[S,q]=i.useState(w?.longitude??85.324),[G,C]=i.useState(w?.zoneId??"Asia/Kathmandu"),[we,de]=i.useState(!1),[X,z]=i.useState(w?.name??"Kathmandu"),[Ie,L]=i.useState(!1);i.useEffect(()=>{if(!(typeof v!="number"||typeof S!="number"||isNaN(v)||isNaN(S)))try{const a=Ue(v,S),x=J.some(B=>B.zoneId===a);C(x?a:w?.zoneId??"Asia/Kathmandu")}catch(a){console.error("tzlookup failed:",a),C(w?.zoneId??"Asia/Kathmandu")}},[v,S,w?.zoneId]);const De=i.useMemo(()=>Array.from({length:R.BS_END_YEAR-R.BS_START_YEAR+1},(a,x)=>R.BS_END_YEAR-x),[]),Ae=i.useMemo(()=>Array.from({length:102},(a,x)=>2034-x),[]),Me=i.useMemo(()=>Array.from({length:12},(a,x)=>x+1),[]),oe=i.useMemo(()=>Array.from({length:60},(a,x)=>x),[]),I=i.useMemo(()=>{const a=R.NP_MONTHS_DATA[$];return r==="BS"?a?a[_-1]:30:We(d,p)},[r,$,_,d,p]),Ce=i.useMemo(()=>{const a=X.toLowerCase().trim();return!a||a===f?.name.toLowerCase().trim()?Y:Y.filter(x=>x.name.includes(a)||x.romanization&&x.romanization.toLowerCase().includes(a))},[X,f?.name]);i.useEffect(()=>{r==="BS"&&O>I&&re(I),r==="AD"&&u>I&&te(I)},[I,r,O,u]);const Le=a=>{Se(a),V(a.latitude),q(a.longitude),C(a.zoneId)},Ee=(a,x)=>{V(a),q(x)},Pe=a=>{a.preventDefault();const x=D=>D.toString().padStart(2,"0");let B=d,ie=p,ce=u;if(r==="BS"){const D=Ve($,_-1,O);B=D.getFullYear(),ie=D.getMonth()+1,ce=D.getDate()}let U=T;Z==="PM"&&T<12&&(U+=12),Z==="AM"&&T===12&&(U=0);const $e=`${B}-${x(ie)}-${x(ce)}T${x(U)}:${x(ne)}:${x(le)}`,_e=N==="nepal"?f?.latitude??27.7172:v,Oe=N==="nepal"?f?.longitude??85.324:S,xe=N==="nepal"?f?.zoneId??"Asia/Kathmandu":G,me=J.find(D=>D.zoneId===xe),Te=me?me.offset:5.75;t({name:c,datetime:$e,latitude:_e,longitude:Oe,zoneId:xe,offset:Te,options:{zodiac:"SIDEREAL",ayanamsa:"LAHIRI",houseSystem:"WHOLE_SIGN",divisionalCharts:[9],dashaSystem:"VIMSHOTTARI"}})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full min-h-screen bg-slate-200 dark:bg-gray-800 py-8 sm:px-4 lg:px-8 flex justify-center items-start overflow-y-auto",children:e.jsxs("form",{onSubmit:Pe,className:"kundali-card bg-slate-50 rounded-xl shadow-lg w-full max-w-md lg:max-w-3xl xl:max-w-6xl p-4  space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border dark:border-gray-700",children:[e.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-blue-700 text-center dark:text-blue-300",children:s.mainTitle}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 xl:gap-x-8",children:[e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-stone-700 mb-1 dark:text-stone-300",children:s.name}),e.jsx("input",{type:"text",value:c,onChange:a=>o(a.target.value),className:"w-full px-3 py-2 border border-stone-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:focus:ring-blue-400 dark:focus:border-blue-400",required:!0})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between py-1.5 items-center mb-1",children:[e.jsx("label",{className:"block font-medium text-stone-700 dark:text-stone-300",children:s.dateOfBirth}),e.jsx("div",{className:"flex bg-gray-200  py-2 rounded-md p-0.5 w-auto dark:bg-gray-700",children:["BS","AD"].map(a=>e.jsx("button",{type:"button",onClick:()=>h(a),className:`px-3 py-1 text-xs rounded-md transition-colors duration-200 ${r===a?"bg-blue-500 text-white shadow dark:bg-blue-400 dark:text-blue-900":"text-gray-600 hover:bg-gray-300 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:a==="BS"?s.bs:s.ad},a))})]}),r==="BS"?e.jsxs(ee,{children:[e.jsx(k,{label:s.year,value:$,onChange:a=>be(+a.target.value),children:De.map(a=>e.jsx("option",{value:a,children:m(a)},a))}),e.jsx(k,{label:s.month,value:_,onChange:a=>pe(+a.target.value),children:Array.from({length:12},(a,x)=>x+1).map(a=>e.jsx("option",{value:a,children:se[a-1]},a))}),e.jsx(k,{label:s.day,value:O,onChange:a=>re(+a.target.value),children:Array.from({length:I},(a,x)=>x+1).map(a=>e.jsx("option",{value:a,children:m(a)},a))})]}):e.jsxs(ee,{children:[e.jsx(k,{label:s.year,value:d,onChange:a=>g(+a.target.value),children:Ae.map(a=>e.jsx("option",{value:a,children:m(a)},a))}),e.jsx(k,{label:s.month,value:p,onChange:a=>j(+a.target.value),children:Array.from({length:12},(a,x)=>x+1).map(a=>e.jsx("option",{value:a,children:m(a)},a))}),e.jsx(k,{label:s.day,value:u,onChange:a=>te(+a.target.value),children:Array.from({length:I},(a,x)=>x+1).map(a=>e.jsx("option",{value:a,children:m(a)},a))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-stone-700 mb-1 dark:text-stone-300",children:s.birthTimeLabel}),e.jsxs(ee,{children:[e.jsx(k,{label:s.hour,value:T,onChange:a=>fe(+a.target.value),children:Me.map(a=>e.jsx("option",{value:a,children:m(a)},a))}),e.jsx(k,{label:s.minute,value:ne,onChange:a=>ke(+a.target.value),children:oe.map(a=>e.jsx("option",{value:a,children:m(a.toString().padStart(2,"0"))},a))}),e.jsx(k,{label:s.second,value:le,onChange:a=>ye(+a.target.value),children:oe.map(a=>e.jsx("option",{value:a,children:m(a.toString().padStart(2,"0"))},a))})]}),e.jsx("div",{className:"mt-1.5",children:e.jsx("div",{className:"flex bg-gray-200 rounded-md p-0.5 w-full dark:bg-gray-700",children:["AM","PM"].map(a=>e.jsx("button",{type:"button",onClick:()=>je(a),className:`w-full px-3 py-1.5 text-sm rounded-md transition-colors duration-200 ${Z===a?"bg-blue-500 text-white shadow dark:bg-blue-400 dark:text-blue-900":"text-gray-600 hover:bg-gray-300 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:s[a.toLowerCase()]},a))})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-stone-700 mb-1 dark:text-stone-300",children:s.relation}),e.jsxs("select",{value:Ne,onChange:a=>ve(a.target.value),className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:focus:bg-gray-600 dark:focus:border-blue-400",children:[e.jsx("option",{children:s.self}),e.jsx("option",{children:"छोरा"}),e.jsx("option",{children:"छोरी"}),e.jsx("option",{children:"जीवनसाथी"})]})]})]}),e.jsx("div",{className:"space-y-3 md:space-y-4 mt-3 xl:mt-0",children:e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-stone-700 mb-1 dark:text-stone-300",children:s.birthPlace}),e.jsxs("div",{className:"flex bg-gray-200 rounded-md p-0.5 w-full mb-2 dark:bg-gray-700",children:[e.jsxs("button",{type:"button",onClick:()=>{W("nepal"),f&&z(f.name)},className:`w-full px-3 py-1.5 text-sm rounded-md transition-colors duration-200 ${N==="nepal"?"bg-blue-500 text-white shadow dark:bg-blue-400 dark:text-blue-900":"text-gray-600 hover:bg-gray-300 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:[e.jsx(Ye,{className:"w-4 h-4 inline-block -mt-0.5 mr-1"}),s.selectFromList]}),e.jsxs("button",{type:"button",onClick:()=>W("manual"),className:`w-full px-3 py-1.5 text-sm rounded-md transition-colors duration-200 ${N==="manual"?"bg-blue-500 text-white shadow dark:bg-blue-400 dark:text-blue-900":"text-gray-600 hover:bg-gray-300 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:[e.jsx(he,{className:"w-4 h-4 inline-block -mt-0.5 mr-1"}),s.enterManually]})]}),N==="nepal"&&e.jsxs("div",{className:"relative",ref:n,children:[e.jsx("input",{type:"text",placeholder:s.searchLocation,value:X,onChange:a=>{z(a.target.value),L(!0)},onFocus:a=>{a.target.select(),z(""),L(!0)},className:"w-full px-3 py-2 border border-stone-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:ring-blue-400 dark:focus:border-blue-400"}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx(K,{className:"w-4 h-4"})}),Ie&&e.jsxs("div",{className:"absolute z-10 w-full bg-slate-50 border border-gray-300 rounded-md mt-1 max-h-60 overflow-y-auto shadow-lg dark:bg-gray-800 dark:border-gray-600",children:[Ce.map(a=>e.jsx("div",{className:"p-2 cursor-pointer hover:bg-gray-100 text-sm dark:hover:bg-gray-700",onMouseDown:()=>{Le(a),z(a.name),L(!1)},children:a.name},a.name)),e.jsxs("div",{className:"p-2 cursor-pointer hover:bg-gray-100 border-t text-sm font-medium dark:hover:bg-gray-700 dark:border-gray-600",onMouseDown:()=>{W("manual"),L(!1)},children:["--- ",s.outsideNepal," ---"]})]})]}),N==="manual"&&e.jsxs("div",{className:"space-y-2 p-3 border border-gray-200 rounded-md dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-0.5 dark:text-gray-400",children:s.latitude}),e.jsx("input",{type:"number",step:"any",value:v,onChange:a=>V(parseFloat(a.target.value)),className:"w-full px-3 py-2 text-sm border border-stone-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:ring-blue-400 dark:focus:border-blue-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-0.5 dark:text-gray-400",children:s.longitude}),e.jsx("input",{type:"number",step:"any",value:S,onChange:a=>q(parseFloat(a.target.value)),className:"w-full px-3 py-2 text-sm border border-stone-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:ring-blue-400 dark:focus:border-blue-400"})]})]}),e.jsx("div",{children:e.jsx(Qe,{label:s.timezone,value:G,onChange:a=>C(a.target.value),children:J.map(a=>e.jsx("option",{value:a.zoneId,children:a.label},a.zoneId))})}),e.jsxs("button",{type:"button",onClick:()=>de(!0),className:"w-full flex items-center justify-center gap-2 bg-blue-50 text-blue-700 border border-blue-200 rounded-md text-sm py-2 hover:bg-blue-100 dark:bg-blue-900 dark:text-blue-200 dark:border-blue-700 dark:hover:bg-blue-800",children:[e.jsx(he,{className:"w-4 h-4"}),s.selectOnMap]})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1 dark:text-gray-400",children:N==="nepal"?`${s.latitudeShort} : ${f?.latitude.toFixed(2)} ${s.longitudeShort} : ${f?.longitude.toFixed(2)}`:`${s.latitudeShort} : ${v.toFixed(2)} ${s.longitudeShort} : ${S.toFixed(2)} (TZ: ${G})`})]})})]}),e.jsx("div",{className:"sticky bottom-0 bg-slate-50/90 backdrop-blur-sm pt-4 pb-2 -mb-4  sm:-mb-6  md:-mb-8  px-4 sm:px-6 md:px-8 rounded-b-xl dark:bg-gray-800/90",children:e.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center items-center py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-300 disabled:cursor-not-allowed dark:bg-blue-400 dark:text-blue-900 dark:hover:bg-blue-500 dark:hover:text-white dark:focus:ring-blue-300 dark:disabled:bg-blue-200 dark:disabled:text-gray-500",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"w-5 h-5 mr-3 animate-spin"}),s.calculating]}):s.calculate})})]})}),we&&e.jsx(ea,{initialPosition:[v,S],onClose:()=>de(!1),onLocationSelect:Ee})]})},aa=({cx:t,cy:l,onSelect:c})=>e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 400",children:[e.jsx("defs",{children:e.jsx("path",{id:"lotus-petal",d:`M 200 200
             C 150 150, 150 50, 200 0
             C 250 50, 250 150, 200 200 Z`})}),Array.from({length:12},(o,r)=>e.jsx("use",{href:"#lotus-petal",fill:"transparent",className:"overlay-wedge",style:{cursor:"pointer",pointerEvents:"auto"},transform:`rotate(${-r*30-90}, ${t}, ${l})`,onClick:()=>c(r+1)},r))]}),sa={10:0,11:-30,12:-60,1:-90,2:-120,3:-150,4:-180,5:-210,6:-240,7:-270,8:-300,9:-330};function F(t){const l=Math.floor(t),c=Math.floor((t-l)*60);return`${m(l)}°${m(c)}′`}function ue(t){const l=Math.round(t/30*100);return`${m(l)}%`}const A=({planets:t,ascendantSign:l,ascendantDegrees:c,chartType:o="lagna"})=>{const[r,h]=i.useState(null),n=t.find(d=>d.planet==="MOON"),b=n?.rashi??1,y=i.useMemo(()=>{const d=new Map;return t.forEach(g=>{const p=g.rashi,j=o==="chandra"?(p-b+12)%12+1:p;d.has(j)||d.set(j,[]),d.get(j).push(g)}),d},[t,o,b]);return e.jsxs("div",{className:"birth-chart-wrapper text-stone-800 dark:text-stone-100",children:[e.jsxs("div",{className:"birth-chart relative",children:[Array.from({length:12},(d,g)=>g+1).map(d=>{const g=y.get(d)||[],p=sa[d];if(p===void 0)return null;const j=[];return["lagna","dashamsa","hora","saptamsa"].includes(o)&&d===l&&j.push(e.jsxs("div",{className:"planet-item ascendant",children:[e.jsx("span",{children:E.ASCENDANT}),c!==void 0&&e.jsx("span",{className:"planet-deg",children:F(c)})]},"asc")),o==="chandra"&&d===1&&j.push(e.jsx("div",{className:"planet-item ascendant",children:e.jsxs("span",{children:[E.ASCENDANT," (चन्द्र)"]})},"asc-chandra")),g.forEach(u=>{j.push(e.jsxs("div",{className:"planet-item",children:[e.jsx("span",{className:u.retrograde?"retrograde":"",children:E[u.planet]}),o==="navamsha"&&u.nakshatraPada!==void 0&&e.jsxs("span",{children:["(",Q[u.nakshatra],m(u.nakshatraPada),")"]}),o!=="navamsha"&&u.degreesInSign!==void 0&&e.jsx("span",{className:"planet-deg",children:F(u.degreesInSign)})]},u.planet))}),e.jsxs("div",{className:"petal",style:{transform:`translateX(-50%) rotate(${p}deg)`},children:[e.jsx("div",{className:"rashi-number font-semibold",children:m(d)}),e.jsx("div",{className:"planets-container",children:j})]},d)}),e.jsx("div",{className:"chart-center-dot text-2xl font-bold dark:text-blue-400",children:"ॐ"}),["lagna","chandra","dashamsa","hora","saptamsa"].includes(o)&&e.jsx(aa,{cx:200,cy:200,onSelect:d=>h(d)})]}),["lagna","chandra","dashamsa","hora","saptamsa"].includes(o)&&r&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",onClick:()=>h(null),children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 dark:text-stone-100 rounded-lg shadow-lg p-6 max-w-md w-full transition-colors duration-300",onClick:d=>d.stopPropagation(),children:[e.jsxs("h3",{className:"font-bold text-lg mb-2",children:["घर ",m(r)," – ",M[r-1]," (स्वामी:"," ",P[qe[r]],")"]}),["lagna","dashamsa","hora","saptamsa"].includes(o)&&r===l&&c!==void 0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[E.ASCENDANT," (",M[l-1],")"]}),e.jsxs("span",{children:[F(c)," (",ue(c),")"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-800 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round(c/30*100)}%`}})})]}),o==="chandra"&&r===1&&n&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex justify-between",children:e.jsxs("span",{children:[E.ASCENDANT," (चन्द्र)"]})}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-800 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round((n.degreesInSign||0)/30*100)}%`}})}),n.nakshatra&&n.nakshatraPada&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 font-semibold mt-1",children:["जनम नक्षत्र:"," ",Q[n.nakshatra],m(n.nakshatraPada)]})]}),(y.get(r)||[]).map(d=>{if(o==="chandra"&&r===1&&d.planet==="MOON")return null;const g=d.degreesInSign!==void 0?Math.round(d.degreesInSign/30*100):null;return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:d.retrograde?"retrograde font-bold":"",children:P[d.planet]}),d.degreesInSign!==void 0&&e.jsxs("span",{children:[F(d.degreesInSign)," (",ue(d.degreesInSign),")"]})]}),d.nakshatra&&d.nakshatraPada&&o==="navamsha"&&e.jsxs("div",{className:"text-sm ml-2 text-gray-600 dark:text-gray-400",children:[Q[d.nakshatra],m(d.nakshatraPada)]}),g!==null&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-800 h-2 rounded",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded",style:{width:`${g}%`}})})]},d.planet)})]})})]})},ta=({planets:t})=>e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg overflow-x-auto dark:bg-gray-800 dark:text-stone-100 transition-colors duration-300",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:s.planetaryPositions}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:s.planet}),e.jsx("th",{className:"py-2 px-2",children:s.rashi}),e.jsx("th",{className:"py-2 px-2",children:s.degrees}),e.jsx("th",{className:"py-2 px-2",children:s.nakshatra}),e.jsx("th",{className:"py-2 px-2",children:s.pada})]})}),e.jsx("tbody",{children:t.map(l=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-stone-700 hover:bg-amber-50/70 dark:hover:bg-gray-800 transition-colors duration-200",children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100",children:[P[l.planet],l.retrograde&&e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 ml-1",children:["(",s.retrograde,")"]})]}),e.jsx("td",{className:"py-2 px-2",children:M[l.rashi-1]}),e.jsx("td",{className:"py-2 px-2 font-mono",children:ge(l.degreesInSign)}),e.jsx("td",{className:"py-2 px-2",children:l.nakshatra}),e.jsx("td",{className:"py-2 px-2",children:m(l.nakshatraPada)})]},l.planet))})]})]}),ra=({data:t})=>{const l=t.planets.find(u=>u.planet==="MOON"),c=t.planets.find(u=>u.planet==="SUN"),o=new Date(t.birthDetails.datetime),r=ae(o),h=`${m(r.year)} ${se[r.monthIndex]} ${m(r.day)}`,n=Ge[o.getDay()],b=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(o),y=new Intl.DateTimeFormat("ne-NP",{hour:"numeric",minute:"numeric",hour12:!0}).format(o),d=Xe[t.nakshatra.index],g=d?d.syllables[t.nakshatra.pada-1]:"?",p=M[t.ascendant.sign-1],j=ge(t.ascendant.degreesInSign);return e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg h-full bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:s.generalInfo}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start ",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.birthDateBS,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:h})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.birthDateAD,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:b})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.birthTime,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:y})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.dayOfWeek,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:n})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.lagna,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[p," (",j,")"]})]}),l&&e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.moonSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:M[l.rashi-1]})]}),c&&e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.sunSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:M[c.rashi-1]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.birthNakshatra,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.nakshatra.nameNepali," (",m(t.nakshatra.pada),")"]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.suggestedSyllable,":"]}),e.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-600 text-lg",children:g})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.tithi,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.tithi.paksha," - ",m(t.tithi.tithiNumber)]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.yoga,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.yoga})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.karana,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.karana})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-2",children:s.calculationDetails}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.backend,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.calculationMeta.backend})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.ayanamsa,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.calculationMeta.ayanamsa})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[s.houseSystem,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.calculationMeta.houseSystem})]})]})]})]})},H=t=>{try{const l=ae(new Date(t)),c=m(l.year.toString()),o=se[l.monthIndex],r=m(l.day.toString());return`${c} ${o} ${r}`}catch(l){return console.error("Date formatting error:",l),m(t.split("T")[0])+" AD"}},na=({dashaSequence:t})=>{const[l,c]=i.useState(null),o=r=>{c(h=>h===r?null:r)};return e.jsxs("div",{className:"kundali-card p-4 sm:p-6 mb-11 rounded-lg bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:s.dashaPeriods}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base border-collapse",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:s.mahaDasha}),e.jsx("th",{className:"py-2 px-2",children:s.startsOn}),e.jsx("th",{className:"py-2 px-2",children:s.endsOn})]})}),e.jsx("tbody",{children:t.map(r=>e.jsxs(He.Fragment,{children:[e.jsxs("tr",{className:"border-b border-amber-100 dark:border-amber-800 cursor-pointer hover:bg-amber-50/70 dark:hover:bg-amber-900/40",onClick:()=>o(r.planet),"aria-expanded":l===r.planet,"aria-controls":`antardasha-${r.planet}`,children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100 flex items-center relative",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(K,{className:`w-4 h-4 mr-2 text-amber-700 dark:text-blue-400 transition-transform duration-300 ${l===r.planet?"rotate-180":""}`}),e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-1 px-2 py-1 bg-zinc-800 text-white text-xs rounded shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-[999] dark:bg-gray-800 dark:text-stone-200",children:s.antarDasha_clickToExpand})]}),e.jsx("span",{className:"z-0",children:P[r.planet]})]}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:H(r.start)}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:H(r.end)})]}),r.subDashas&&r.subDashas.length>0&&e.jsx("tr",{className:"bg-slate-200 dark:bg-gray-800",children:e.jsx("td",{colSpan:3,className:"p-0 border-none",children:e.jsx("div",{id:`antardasha-${r.planet}`,className:`overflow-hidden transition-all duration-500 ease-in-out ${l===r.planet?"max-h-[1000px]":"max-h-0"}`,children:e.jsxs("div",{className:"p-4 bg-amber-50/50 dark:bg-amber-900/20",children:[e.jsx("h4",{className:"font-semibold text-blue-400 dark:text-blue-400 mb-2 pl-2",children:s.antarDasha}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-stone-500 dark:text-stone-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:s.planet}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:s.startsOn}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:s.endsOn})]})}),e.jsx("tbody",{children:r.subDashas.map(h=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-amber-800 last:border-b-0",children:[e.jsx("td",{className:"py-1.5 px-2 text-stone-800 dark:text-stone-100",children:P[h.planet]}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:H(h.start)}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:H(h.end)})]},h.planet))})]})]})})})})]},r.planet))})]})]})},xa=({data:t,onReturnToForm:l})=>{const c=t.divisionalCharts.find(n=>n.name==="Navamsa (D9)"),o=t.divisionalCharts.find(n=>n.name==="Dashamsa (D10)"),r=t.divisionalCharts.find(n=>n.name==="Hora (D2)"),h=t.divisionalCharts.find(n=>n.name==="Saptamsa (D7)");return e.jsxs("div",{className:"dashboard-container  bg-slate-50 rounded-xl shadow-lg w-full  lg:max-w-4xl xl:max-w-6xl p-4 space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border dark:border-gray-700",children:[e.jsx("header",{className:"kundali-card rounded-lg text-center dark:bg-gray-800 dark:text-blue-400 transition-colors duration-300",children:e.jsx("h2",{className:"text-3xl self-center font-bold text-blue-400 dark:text-blue-400",children:s.kundaliOf(t.birthDetails.name)})}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"lg:col-span-2 flex flex-col",children:e.jsx("div",{className:"flex-1 kundali-card p-4 rounded-lg bg-slate-200 dark:bg-gray-800 dark:text-stone-100 shadow transition-colors duration-300",children:e.jsx(ra,{data:t,layout:"two-column"})})}),e.jsx("div",{className:"flex-1 kundali-card p-4 rounded-lg bg-slate-200 dark:bg-gray-800 dark:text-stone-100 shadow transition-colors duration-300",children:e.jsx(ta,{planets:t.planets})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{className:"chart-instance dark:bg-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-center dark:text-blue-400",children:s.rashiChart}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(A,{planets:t.planets,ascendantSign:t.ascendant.sign,ascendantDegrees:t.ascendant.degreesInSign,chartType:"lagna"})})]}),c&&e.jsxs("div",{className:"chart-instance",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-center dark:text-blue-400",children:s.navamsaChart}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(A,{planets:c.planets.map(n=>({planet:n.planet,rashi:n.sign,retrograde:n.retrograde,nakshatra:n.nakshatra,nakshatraPada:n.nakshatraPada})),ascendantSign:c.ascendant.sign,chartType:"navamsha"})})]}),o&&e.jsxs("div",{className:"chart-instance",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-center dark:text-blue-400",children:s.dashamsaChart}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(A,{planets:o.planets.map(n=>({planet:n.planet,rashi:n.sign,retrograde:n.retrograde,nakshatra:n.nakshatra,nakshatraPada:n.nakshatraPada,degreesInSign:n.degreesInSign})),ascendantSign:o.ascendant.sign,ascendantDegrees:o.ascendant.degreesInSign,chartType:"dashamsa"})})]}),r&&e.jsxs("div",{className:"chart-instance",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-center dark:text-blue-400",children:s.horaChart}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(A,{planets:r.planets.map(n=>({planet:n.planet,rashi:n.sign,retrograde:n.retrograde,nakshatra:n.nakshatra,nakshatraPada:n.nakshatraPada,degreesInSign:n.degreesInSign})),ascendantSign:r.ascendant.sign,ascendantDegrees:r.ascendant.degreesInSign,chartType:"hora"})})]}),h&&e.jsxs("div",{className:"chart-instance",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-center dark:text-blue-400",children:s.saptamsaChart}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(A,{planets:h.planets.map(n=>({planet:n.planet,rashi:n.sign,retrograde:n.retrograde,nakshatra:n.nakshatra,nakshatraPada:n.nakshatraPada,degreesInSign:n.degreesInSign})),ascendantSign:h.ascendant.sign,ascendantDegrees:h.ascendant.degreesInSign,chartType:"saptamsa"})})]}),e.jsxs("div",{className:"chart-instance",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-center dark:text-blue-400",children:s.chandraChart}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(A,{planets:t.planets,ascendantSign:t.ascendant.sign,ascendantDegrees:t.ascendant.degreesInSign,chartType:"chandra"})})]})]}),e.jsx(na,{dashaSequence:t.dashaSequence}),e.jsx("div",{className:"fixed bottom-12 left-1/2 transform -translate-x-1/2 z-[999]",children:e.jsxs("button",{className:"bg-blue-600 dark:bg-blue-600 text-white px-6 py-2 rounded shadow-md hover:bg-blue-700 dark:hover:bg-blue-800 transition",onClick:l,children:["← ",s.returnToForm]})})]})};export{ca as K,xa as a};
