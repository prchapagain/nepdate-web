const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./pages-Gq685JUo.js","./vendor-react-CMh7LEwM.js","./vendor-other-B6zHyxvG.js","./vendor-leaflet-Ch3uxlbW.js","./vendor-leaflet-Dgihpmma.css","./data-B8LYF7zK.js","./kundali-7zcep2j7.js","./bikram-B7Ssp7vD.js","./vendor-utils-y-iLWhYP.js"])))=>i.map(i=>d[i]);
import{r,j as e,e as Z,X as pe,H as ge,f as xe,I as ee,D as we,M as ye,S as be,g as ve}from"./vendor-react-CMh7LEwM.js";import{t as te,N as x,C as je,D as ke,E as Se,M as Ne,F as Ee,H as Ce,l as Me,B as Ie,f as Pe}from"./bikram-B7Ssp7vD.js";import{A as Te}from"./pages-Gq685JUo.js";import{l as Le,m as Ae,a as _e,b as De}from"./vendor-leaflet-Ch3uxlbW.js";import"./vendor-other-B6zHyxvG.js";import"./data-B8LYF7zK.js";import"./kundali-7zcep2j7.js";import"./vendor-utils-y-iLWhYP.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))w(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&w(u)}).observe(document,{childList:!0,subtree:!0});function m(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function w(n){if(n.ep)return;n.ep=!0;const l=m(n);fetch(n.href,l)}})();const Oe="modulepreload",Re=function(i,c){return new URL(i,c).href},se={},W=function(c,m,w){let n=Promise.resolve();if(m&&m.length>0){let k=function(a){return Promise.all(a.map(t=>Promise.resolve(t).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const u=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),y=d?.nonce||d?.getAttribute("nonce");n=k(m.map(a=>{if(a=Re(a,w),a in se)return;se[a]=!0;const t=a.endsWith(".css"),p=t?'[rel="stylesheet"]':"";if(w)for(let b=u.length-1;b>=0;b--){const S=u[b];if(S.href===a&&(!t||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${p}`))return;const f=document.createElement("link");if(f.rel=t?"stylesheet":Oe,t||(f.as="script"),f.crossOrigin="",f.href=a,y&&f.setAttribute("nonce",y),document.head.appendChild(f),t)return new Promise((b,S)=>{f.addEventListener("load",b),f.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${a}`)))})}))}function l(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return n.then(u=>{for(const d of u||[])d.status==="rejected"&&l(d.reason);return c().catch(l)})};function ne(i={}){const{immediate:c=!1,onNeedRefresh:m,onOfflineReady:w,onRegistered:n,onRegisteredSW:l,onRegisterError:u}=i;let d,y;const k=async(t=!0)=>{await y};async function a(){if("serviceWorker"in navigator){if(d=await W(async()=>{const{Workbox:t}=await import("./vendor-other-B6zHyxvG.js").then(p=>p.w);return{Workbox:t}},[],import.meta.url).then(({Workbox:t})=>new t("./sw.js",{scope:"./",type:"classic"})).catch(t=>{u?.(t)}),!d)return;d.addEventListener("activated",t=>{(t.isUpdate||t.isExternal)&&window.location.reload()}),d.addEventListener("installed",t=>{t.isUpdate||w?.()}),d.register({immediate:c}).then(t=>{l?l("./sw.js",t):n?.(t)}).catch(t=>{u?.(t)})}}return y=a(),k}const Ye=r.lazy(()=>W(()=>import("./pages-Gq685JUo.js").then(i=>i.K),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),Be=r.lazy(()=>W(()=>import("./pages-Gq685JUo.js").then(i=>i.C),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),Fe=({message:i,visible:c})=>e.jsx("div",{className:`fixed bottom-16 left-1/2 -translate-x-1/2 px-4 py-2 rounded shadow z-50 text-sm text-white bg-black transition-opacity duration-500 ${c?"opacity-100":"opacity-0 pointer-events-none"}`,children:i}),Ue=()=>{r.useEffect(()=>{ne({immediate:!0})},[]);const[i,c]=r.useState("calendar"),[m,w]=r.useState("light"),[n,l]=r.useState("bs"),[u,d]=r.useState(null),[y,k]=r.useState(!1),[a,t]=r.useState(!1),[p,f]=r.useState(!1),[b,S]=r.useState(null),[X,Y]=r.useState(null),[$,B]=r.useState(!1),[A,re]=r.useState(!1),[ae,_]=r.useState(()=>localStorage.getItem("pwa_installed")==="true"),[F,V]=r.useState(null),[H,K]=r.useState(!1),[oe,q]=r.useState(!1),N=r.useRef(null);r.useEffect(()=>{const s=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone;if(re(!!s),s){_(!0);return}const o=()=>{localStorage.setItem("pwa_installed","true"),_(!0),B(!1)};window.addEventListener("appinstalled",o),"getInstalledRelatedApps"in navigator&&navigator.getInstalledRelatedApps().then(j=>{j.length>0&&(localStorage.getItem("pwa_installed")!=="true"&&localStorage.setItem("pwa_installed","true"),_(!0))});const h=j=>{j.preventDefault(),localStorage.removeItem("pwa_installed"),_(!1),V(j),B(!0)};return window.addEventListener("beforeinstallprompt",h),()=>{window.removeEventListener("appinstalled",o),window.removeEventListener("beforeinstallprompt",h)}},[]);const le=async()=>{F&&(F.prompt(),await F.userChoice,V(null),B(!1))},[g]=r.useState(new Date),[v]=r.useState(()=>te(g)),[L,E]=r.useState(v.year),[C,M]=r.useState(v.monthIndex),[D,I]=r.useState(g.getFullYear()),[P,T]=r.useState(g.getMonth());r.useEffect(()=>{const o=localStorage.getItem("theme")||"light";w(o),document.documentElement.classList.toggle("dark",o==="dark")},[]);const J=()=>{const s=m==="light"?"dark":"light";w(s),localStorage.setItem("theme",s),document.documentElement.classList.toggle("dark",s==="dark")},ie=s=>{if(s===n)return;const o=D===g.getFullYear()&&P===g.getMonth(),h=L===v.year&&C===v.monthIndex;if(s==="bs"&&o||s==="ad"&&h)O();else if(s==="bs"){const j=D??g.getFullYear(),he=Me(j,P,12),me=Ie(he),R=te(me);R.year===0||!R.year?O():(E(R.year),M(R.monthIndex))}else if(L===null)O();else{const j=Pe(L,C,18);I(j.getUTCFullYear()),T(j.getUTCMonth())}l(s)},O=()=>{E(v.year),M(v.monthIndex),I(g.getFullYear()),T(g.getMonth())},ce=s=>{d(s),k(!0)},G=s=>{if(n==="bs"){const o=s==="prev"?C-1:C+1;o<0?(M(11),E(h=>(h??v.year)-1)):o>11?(M(0),E(h=>(h??v.year)+1)):M(o)}else{const o=s==="prev"?P-1:P+1;o<0?(T(11),I(h=>(h??g.getFullYear())-1)):o>11?(T(0),I(h=>(h??g.getFullYear())+1)):T(o)}},Q=s=>{n==="bs"?E(o=>(o??v.year)+(s==="next"?1:-1)):I(o=>(o??g.getFullYear())+(s==="next"?1:-1))},U=n==="bs"?L:D,z=n==="bs"?C:P,de=s=>{S(s.touches[0].clientX),Y(null)},ue=s=>Y(s.touches[0].clientX),fe=()=>{if(!b||!X)return;const s=X-b;s>60&&b<50?t(!0):s<-60&&a&&t(!1),S(null),Y(null)};return r.useEffect(()=>{const s=o=>{a&&o.key==="Backspace"&&(o.preventDefault(),t(!1))};return a&&window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[a]),r.useEffect(()=>{if(!A)return;const s=()=>{if(y){k(!1),window.history.pushState(null,"",window.location.href);return}if(p){f(!1),window.history.pushState(null,"",window.location.href);return}if(a){t(!1),window.history.pushState(null,"",window.location.href);return}if(i!=="calendar"){c("calendar"),window.history.pushState(null,"",window.location.href);return}H?window.history.go(-2):(K(!0),q(!0),navigator.vibrate&&navigator.vibrate(50),N.current&&clearTimeout(N.current),N.current=window.setTimeout(()=>{K(!1),q(!1),N.current=null},2e3),window.history.pushState(null,"",window.location.href))};return window.history.pushState(null,"",window.location.href),window.addEventListener("popstate",s),()=>{window.removeEventListener("popstate",s),N.current&&clearTimeout(N.current)}},[A,H,a,y,p,i]),e.jsxs("div",{className:"min-h-screen flex flex-col bg-slate-200 dark:bg-gray-800 text-gray-900 dark:text-gray-100 transition-colors relative",onTouchStart:de,onTouchMove:ue,onTouchEnd:fe,children:[e.jsxs("header",{className:"px-4 print:hidden py-2 border-b dark:border-gray-700 bg-slate-200 dark:bg-gray-800 z-30",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>t(!0),className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-800","aria-label":"Open menu",children:e.jsx(Z,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-100",children:x.Nepdate_calendar})]})}),i==="calendar"&&e.jsx("div",{className:"flex justify-center sm:justify-end",children:e.jsx(je,{activeSystem:n,bsYear:L,bsMonth:C,adYear:D,adMonth:P,onSystemChange:ie,onTodayClick:O,theme:m,onThemeToggle:J})})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:()=>t(!1)}),e.jsx("aside",{className:`fixed top-0 left-0 z-50 w-64 h-full bg-slate-200 dark:bg-gray-800 shadow-xl transform transition-transform duration-300 ease-in-out
        ${a?"translate-x-0":"-translate-x-full"}`,"inert-hidden":!a,children:e.jsxs("div",{className:"flex flex-col h-full p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Menu"}),e.jsx("button",{onClick:()=>t(!1),className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-800","aria-label":"Close menu",children:e.jsx(pe,{className:"w-5 h-5"})})]}),e.jsxs("nav",{className:"flex flex-col space-y-3 text-gray-800 dark:text-gray-200",children:[e.jsxs("button",{onClick:()=>{c("calendar"),t(!1)},className:"px-3 py-2 text-left rounded hover:bg-gray-200 dark:hover:bg-gray-800 flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4"})," ",x.home]}),e.jsxs("button",{onClick:()=>{c("converter"),t(!1)},className:"px-3 py-2 text-left rounded hover:bg-gray-200 dark:hover:bg-gray-800 flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"})," ",x.converter]}),e.jsxs("button",{onClick:()=>{c("kundali"),t(!1)},className:"px-3 py-2 text-left rounded hover:bg-gray-200 dark:hover:bg-gray-800 flex items-center gap-2",children:[e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 2v20M2 12h20"})]})," ",x.kundali]}),e.jsxs("a",{href:"https://github.com/khumnath/nepdate/tree/page",target:"_blank",rel:"noopener noreferrer",onClick:()=>t(!1),className:"px-3 py-2 text-left rounded hover:bg-gray-200 dark:hover:bg-gray-800 flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4"}),"  ",x.sourceCode]}),e.jsxs("button",{onClick:()=>{f(!0),t(!1)},className:"px-3 py-2 text-left rounded hover:bg-gray-200 dark:hover:bg-gray-800 flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4"})," ",x.about]}),!A&&$&&e.jsxs("button",{onClick:()=>{le(),t(!1)},className:"px-3 py-2 text-left rounded bg-blue-600 text-white hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4"})," ",x.installApp]}),!A&&ae&&!$&&e.jsxs("a",{href:"web+nepdate://open",onClick:()=>t(!1),className:"px-3 py-2 text-left rounded bg-green-600 text-white hover:bg-green-700 flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4"})," ",x.openApp]}),e.jsxs("button",{onClick:()=>{J(),t(!1)},className:"px-3 py-2 text-left rounded hover:bg-gray-200 dark:hover:bg-gray-800 flex items-center gap-2",children:[m==="light"?e.jsx(ye,{className:"w-4 h-4"}):e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{children:m==="light"?x.darkMode:x.lightMode})]})]}),e.jsxs("div",{className:"mt-auto text-xs text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700 pt-4",children:["© ",new Date().getFullYear()," ",x.project]})]})}),p&&e.jsx(Te,{setIsAboutOpen:f}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:"h-full overflow-auto px-2 sm:px-4 md:px-6 lg:px-40 max-w-7xl mx-auto w-full pb-20",children:i==="kundali"?e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:e.jsx(Ye,{onBack:()=>c("calendar")})}):i==="calendar"?e.jsxs("main",{className:"flex flex-col min-h-[60vh]",children:[e.jsx("section",{className:"py-2 sm:py-3",children:e.jsx(ke,{activeSystem:n,currentYear:U,currentMonth:z,onYearChange:s=>n==="bs"?E(s):I(s),onMonthChange:s=>n==="bs"?M(s):T(s),onPrevMonth:()=>G("prev"),onNextMonth:()=>G("next"),onPrevYear:()=>Q("prev"),onNextYear:()=>Q("next")})}),e.jsxs("section",{className:"flex-1 overflow-auto p-2 sm:p-3 md:p-4",children:[e.jsx(Se,{activeSystem:n,currentYear:U,currentMonth:z,onDayClick:ce}),e.jsx("section",{className:"events mt-3 sm:mt-4",children:e.jsx(Ne,{activeSystem:n,currentYear:U,currentMonth:z})})]})]}):i==="converter"?e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:e.jsx(Be,{onBack:()=>c("calendar")})}):null})}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-slate-200 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-50 print:hidden",children:e.jsx(Ee,{})}),e.jsx(Ce,{date:u,isOpen:y,onClose:()=>k(!1)}),e.jsx(Fe,{message:n==="bs"?"बन्द गर्नको लागि फेरि थिच्नुहोस्":"Press back again to exit",visible:oe})]})};Le.Icon.Default.mergeOptions({iconUrl:De,shadowUrl:_e,iconRetinaUrl:Ae});ne({onNeedRefresh(){confirm("A new version is available. Reload to update?")&&window.location.reload()},onOfflineReady(){console.log("App ready to work offline")}});ve.createRoot(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(Ue,{})}));
