import{r as h,j as e,m as dt,n as it,u as ct,o as xt,p as mt,d as ht}from"./vendor-react-BJBClTZX.js";import{t as I,g as ut,a as gt,N as t,b,c as ne,G as bt,f as pt,d as yt,e as ae,h as F,i as X,R as ft,j as Ne,k as Ke,l as jt,m as ke,r as Nt,n as kt,o as vt}from"./bikram-E_1354dj.js";import{n as he,T as ce,L as St,a as Re,X as we,S as wt,M as Dt,C as ue,P as Oe}from"./data-DIPIpdjH.js";import{t as Ct}from"./vendor-utils-y-iLWhYP.js";const Mt=he.find(a=>a.romanization.toLowerCase()==="kathmandu"),xe=Mt??he[0],It=({label:a,children:l,...n})=>e.jsxs("div",{className:"relative w-full",children:[e.jsx("select",{...n,className:"w-full appearance-none bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:focus:bg-blue-400 dark:focus:border-blue-400",children:l}),e.jsx("label",{className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:a}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx(ue,{className:"w-4 h-4"})})]}),At=()=>{const a=ct();return h.useEffect(()=>{const l=setTimeout(()=>{try{a.invalidateSize()}catch{}},150);return()=>clearTimeout(l)},[a]),null},Pt=({onClose:a,onLocationSelect:l,initialPosition:n})=>{const[d,c]=h.useState(n),m=()=>(xt({click(o){c([o.latlng.lat,o.latlng.lng])}}),e.jsx(mt,{position:d})),r=()=>{l(d[0],d[1]),a()};return e.jsx("div",{style:{position:"fixed",inset:0,top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center",padding:12},children:e.jsxs("div",{style:{width:"95%",maxWidth:960,height:620,display:"flex",flexDirection:"column",borderRadius:12,overflow:"hidden",background:void 0},className:"bg-slate-50 dark:bg-gray-800 dark:text-gray-200 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center border-b p-3 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:t.selectOnMap}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100",children:e.jsx(we,{className:"w-5 h-5"})})]}),e.jsx("div",{style:{flex:1,minHeight:420,display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:e.jsxs(dt,{center:n,zoom:7,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},children:[e.jsx(it,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(At,{}),e.jsx(m,{})]},`${n[0]}-${n[1]}`)}),e.jsxs("div",{className:"border-t p-3 flex justify-between items-center dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Lat: ",d[0].toFixed(4),", Lon: ",d[1].toFixed(4)]}),e.jsx("button",{onClick:r,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 dark:bg-blue-400 dark:text-blue-900 dark:hover:bg-blue-500 dark:hover:text-white",children:t.selectLocation})]})]})})},Ee=({children:a})=>e.jsx("div",{className:"grid grid-cols-3 border border-gray-300 rounded-md overflow-hidden divide-x divide-gray-300 focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500 dark:border-gray-600 dark:divide-gray-600 dark:focus-within:border-blue-400 dark:focus-within:ring-blue-400",children:a}),se=({label:a,children:l,...n})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute top-1 left-2 text-xs text-gray-500 z-10 dark:text-gray-400",children:a}),e.jsx("select",{...n,className:"relative w-full appearance-none bg-gray-100 pt-5 pb-1.5 px-2 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 z-0 dark:bg-gray-700 dark:text-gray-200 dark:focus:bg-gray-600",children:l}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 z-10 dark:text-gray-300",children:e.jsx(ue,{className:"w-4 h-4"})})]}),Lt=({label:a,type:l="number",...n})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute top-1 left-2 text-xs text-gray-500 z-10 dark:text-gray-400",children:a}),e.jsx("input",{...n,type:l,className:"relative w-full bg-gray-100 pt-5 pb-1.5 px-2 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 z-0 dark:bg-gray-700 dark:text-gray-200 dark:focus:bg-gray-600"})]}),Tt=1900,$t=2150,Bt=1960,Ft=2210,ze=h.forwardRef(({onCalculate:a,isLoading:l,hideSubmitButton:n=!1,defaultValues:d},c)=>{const m=new Date,r=I(m),[o,g]=h.useState(d?.name||"प्रयोगकर्ता"),[i,w]=h.useState(d?.dateSystem||"BS"),[x,f]=h.useState(!1),[S,v]=h.useState("search"),[k,p]=h.useState(m.getFullYear()),[K,le]=h.useState(m.getMonth()+1),[R,y]=h.useState(m.getDate()),[j,N]=h.useState(d?.bsYear||r.year),[D,A]=h.useState(d?.bsMonth||r.monthIndex+1),[P,J]=h.useState(d?.bsDay||r.day),C=h.useRef(null),[O,L]=h.useState(!1),[E,Y]=h.useState(null);let M=m.getHours(),z="AM";M===0?(M=12,z="AM"):M===12?z="PM":M>12?(M=M-12,z="PM"):z="AM";const[H,oe]=h.useState(d?.period||z),[V,T]=h.useState(d?.hour||M),[De,Ye]=h.useState(d?.minute||m.getMinutes()),[Ce,He]=h.useState(d?.second||m.getSeconds()),de=d?.location||xe,[Q,Me]=h.useState(de),[q,ge]=h.useState(de.latitude),[G,be]=h.useState(de.longitude),[pe,ee]=h.useState(de.zoneId),[Ve,Ie]=h.useState(!1),[ie,qe]=h.useState(""),Ge=h.useMemo(()=>{const s=ie.trim().toLowerCase();return s?he.filter(u=>u.romanization.toLowerCase().includes(s)||u.name.includes(ie.trim())):he},[ie]);h.useEffect(()=>{if(!(typeof q!="number"||typeof G!="number"||isNaN(q)||isNaN(G)))try{const s=Ct(q,G),u=ce.some(_=>_.zoneId===s);ee(u?s:xe?.zoneId??"Asia/Kathmandu")}catch{ee(xe?.zoneId??"Asia/Kathmandu")}},[q,G,xe?.zoneId]);const Ue=h.useMemo(()=>Array.from({length:12},(s,u)=>u+1),[]),Ae=h.useMemo(()=>Array.from({length:60},(s,u)=>u),[]),U=h.useMemo(()=>{const u=(i==="BS"?j:k)||(i==="BS"?r.year:m.getFullYear());return i==="BS"?ut(u,D-1).totalDays:gt(u,K)},[i,j,D,k,K,r.year,m]);h.useEffect(()=>{i==="BS"&&P>U&&J(U),i==="AD"&&R>U&&y(U)},[U,i,P,R]);const We=s=>{const u=s.target.value,$=pt(u).replace(/[^0-9]/g,"");if($===""){i==="BS"?N(null):p(null);return}const W=parseInt($,10);isNaN(W)||(i==="BS"?N(W):p(W))},Ze=()=>{const s=i==="BS"?j:k;C.current=s,i==="BS"?N(null):p(null)},Xe=()=>{const s=i==="BS"?j:k;(s===null||String(s).trim()==="")&&(i==="BS"?N(C.current):p(C.current))},ye=()=>{const s=new Date,u=I(s);p(s.getFullYear()),le(s.getMonth()+1),y(s.getDate()),N(u.year),A(u.monthIndex+1),J(u.day)},Je=s=>{Me(s),ge(s.latitude),be(s.longitude),ee(s.zoneId),f(!1)},Qe=(s,u)=>{ge(s),be(u),Me({name:`${s.toFixed(4)}, ${u.toFixed(4)}`,romanization:"Manual Selection",latitude:s,longitude:u,zoneId:pe,offset:ce.find(_=>_.zoneId===pe)?.offset??5.75}),f(!1)},Pe=()=>{let s=j,u=k;if(s===null&&u===null&&(ye(),s=r.year,u=m.getFullYear()),(i==="BS"?s:k)===null)return null;const $=te=>te.toString().padStart(2,"0");let W=u??m.getFullYear(),Te=K,$e=R;if(i==="BS"){const te=s??r.year,je=yt(te,D-1,P);W=je.getFullYear(),Te=je.getMonth()+1,$e=je.getDate()}let fe=V;H==="PM"&&V<12&&(fe+=12),H==="AM"&&V===12&&(fe=0);const rt=`${W}-${$(Te)}-${$($e)}T${$(fe)}:${$(De)}:${$(Ce)}`,nt=Q.latitude,lt=Q.longitude,Be=Q.zoneId,Fe=ce.find(te=>te.zoneId===Be),ot=Fe?Fe.offset:5.75;return{name:o,datetime:rt,latitude:nt,longitude:lt,zoneId:Be,offset:ot,options:{zodiac:"SIDEREAL",ayanamsa:"LAHIRI",houseSystem:"WHOLE_SIGN",divisionalCharts:[9],dashaSystem:"VIMSHOTTARI"}}},et=()=>{const s=i==="BS"?j:k;if(s===null||String(s).length<4)return!1;const[u,_]=i==="BS"?[Bt,Ft]:[Tt,$t];return!(s<u||s>_)},Le=()=>new Promise(s=>{et()?s(Pe()):(ye(),L(!0),Y(()=>s))});h.useImperativeHandle(c,()=>({validateAndGetData:Le}));const tt=()=>{L(!1);const s=Pe();E&&(E(s),Y(null))},at=()=>{L(!1),E&&(E(null),Y(null))},st=async s=>{s.preventDefault();const u=await Le();u&&a(u)};return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:st,className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"name",value:o,onChange:s=>g(s.target.value),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"}),e.jsx("label",{htmlFor:"name",className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:t.name})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-700 rounded-md",children:[e.jsx("button",{type:"button",onClick:()=>{w("BS")},className:`px-4 py-1 text-sm rounded ${i==="BS"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:t.bs}),e.jsx("button",{type:"button",onClick:()=>{w("AD")},className:`px-4 py-1 text-sm rounded ${i==="AD"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:t.ad})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(Ee,{children:[e.jsx(Lt,{label:t.year,value:i==="BS"?b(j??""):k??"",onChange:We,onFocus:Ze,onBlur:Xe,type:"tel",inputMode:"numeric",autoComplete:"off"}),e.jsx(se,{label:t.month,value:i==="BS"?D:K,onChange:s=>i==="BS"?A(Number(s.target.value)):le(Number(s.target.value)),children:Array.from({length:12},(s,u)=>e.jsx("option",{value:u+1,children:i==="BS"?ne[u]:bt[u]},u+1))}),e.jsx(se,{label:t.day,value:i==="BS"?P:R,onChange:s=>i==="BS"?J(Number(s.target.value)):y(Number(s.target.value)),children:Array.from({length:U},(s,u)=>e.jsx("option",{value:u+1,children:b(u+1)},u+1))})]})}),e.jsx("button",{type:"button",onClick:ye,className:"px-3 py-2 text-sm bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500","aria-label":t.resetToToday,children:t.resetToToday})]})}),e.jsxs(Ee,{children:[e.jsx(se,{label:t.hour,value:V,onChange:s=>T(Number(s.target.value)),children:Ue.map(s=>e.jsx("option",{value:s,children:b(s)},s))}),e.jsx(se,{label:t.minute,value:De,onChange:s=>Ye(Number(s.target.value)),children:Ae.map(s=>e.jsx("option",{value:s,children:b(s)},s))}),e.jsx(se,{label:t.second,value:Ce,onChange:s=>He(Number(s.target.value)),children:Ae.map(s=>e.jsx("option",{value:s,children:b(s)},s))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-700 rounded-md",children:[e.jsx("button",{type:"button",onClick:()=>oe("AM"),className:`px-4 py-1 text-sm rounded ${H==="AM"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:t.am}),e.jsx("button",{type:"button",onClick:()=>oe("PM"),className:`px-4 py-1 text-sm rounded ${H==="PM"?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-300"}`,children:t.pm})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400 z-10",children:t.location}),e.jsxs("button",{type:"button",onClick:()=>{f(!0),v("search")},className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 flex justify-between items-center text-left",children:[e.jsxs("span",{children:[Q.name," ",e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["(",Q.romanization,")"]})]}),e.jsx(St,{className:"w-4 h-4 text-gray-500"})]})]}),!n&&e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center items-center py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed dark:bg-blue-600 dark:hover:bg-blue-700 dark:disabled:bg-gray-500",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-5 h-5 mr-3 animate-spin"}),t.calculating]}):t.calculate})})]}),x&&e.jsx("div",{className:"fixed inset-0 flex items-start justify-center bg-black/60 z-50 p-4 pt-8 sm:pt-8 transition-opacity",onClick:()=>f(!1),children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 w-full h-3/6 sm:h-3/5 sm:max-h-[90vh] sm:rounded-lg shadow-xl max-w-lg p-4 flex flex-col transition-transform",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:S==="search"?t.searchOrSelectLocation:t.enterManually}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100",children:e.jsx(we,{className:"w-5 h-5"})})]}),S==="search"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative my-4",children:[e.jsx(wt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:t.locationSearchPlaceholder,value:ie,onChange:s=>qe(s.target.value),className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 pl-10 pr-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:Ge.map(s=>e.jsxs("div",{onClick:()=>Je(s),className:"p-2.5 cursor-pointer hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-md text-sm flex justify-between",children:[e.jsx("span",{children:s.name}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:s.romanization})]},s.name))}),e.jsx("div",{className:"pt-3 mt-3 border-t dark:border-gray-700 text-center",children:e.jsxs("button",{onClick:()=>v("manual"),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:[t.cantFindLocation," ",t.enterManuallyOrMap]})})]}):e.jsxs("div",{className:"pt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.0001",id:"latitude",value:q,onChange:s=>ge(parseFloat(s.target.value)),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"}),e.jsx("label",{htmlFor:"latitude",className:"absolute -top-2 left-2.5 bg-slate-200 px-1 text-xs text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:t.latitudeShort})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.0001",id:"longitude",value:G,onChange:s=>be(parseFloat(s.target.value)),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-blue-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-blue-400"}),e.jsx("label",{htmlFor:"longitude",className:"absolute -top-2 left-2.5 bg-slate-200 px-1 text-xs text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:t.longitudeShort})]})]}),e.jsx(It,{label:t.timezone,value:pe,onChange:s=>ee(s.target.value),children:ce.map(s=>e.jsx("option",{value:s.zoneId,children:s.label},s.zoneId))}),e.jsxs("button",{type:"button",onClick:()=>Ie(!0),className:"w-full flex justify-center items-center gap-2 py-2 bg-gray-200 hover:bg-gray-300 rounded-md dark:bg-gray-600 dark:hover:bg-gray-500","aria-label":t.selectOnMap,children:[e.jsx(Dt,{className:"w-5 h-5"})," ",t.selectOnMap]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:()=>v("search"),className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:["← ",t.backToSearch]})})]})]})}),Ve&&e.jsx(Pt,{onClose:()=>Ie(!1),onLocationSelect:Qe,initialPosition:[q,G]}),O&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50 p-4 transition-opacity",children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full p-6 text-center",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-semibold text-amber-700 dark:text-amber-400",children:t.invalidDateTitle}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:t.invalidDateMessage(i)}),e.jsxs("div",{className:"mt-6 flex justify-center gap-4",children:[e.jsx("button",{onClick:at,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-300 rounded-md hover:bg-gray-400 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:t.edit}),e.jsx("button",{onClick:tt,className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600",children:t.proceed})]})]})})]})}),Et=({cx:a,cy:l,onSelect:n})=>e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 400",children:[e.jsx("defs",{children:e.jsx("path",{id:"lotus-petal",d:`M 200 200
             C 150 150, 150 50, 200 0
             C 250 50, 250 150, 200 200 Z`})}),Array.from({length:12},(d,c)=>e.jsx("use",{href:"#lotus-petal",fill:"transparent",className:"overlay-wedge",style:{cursor:"pointer",pointerEvents:"auto"},transform:`rotate(${-c*30-90}, ${a}, ${l})`,onClick:()=>n(c+1)},c))]}),zt={10:0,11:-30,12:-60,1:-90,2:-120,3:-150,4:-180,5:-210,6:-240,7:-270,8:-300,9:-330};function me(a){const l=Math.floor(a),n=Math.floor((a-l)*60);return`${b(l)}°${b(n)}′`}function _e(a){const l=Math.round(a/30*100);return`${b(l)}%`}const _t=({planets:a,ascendantSign:l,ascendantDegrees:n,ascendantNakshatra:d,ascendantNakshatraPada:c,chartType:m="lagna"})=>{const[r,o]=h.useState(null),g=a.find(x=>x.planet==="MOON"),i=g?.rashi??1,w=h.useMemo(()=>{const x=new Map;return a.forEach(f=>{const S=f.rashi,v=m==="chandra"?(S-i+12)%12+1:S;x.has(v)||x.set(v,[]),x.get(v).push(f)}),x},[a,m,i]);return e.jsxs("div",{className:"birth-chart-wrapper text-stone-800 dark:text-stone-100",children:[e.jsxs("div",{className:"birth-chart",children:[Array.from({length:12},(x,f)=>f+1).map(x=>{const f=w.get(x)||[],S=zt[x];if(S===void 0)return null;const v=[];return m!=="chandra"&&x===l&&v.push(e.jsxs("div",{className:"planet-item ascendant",children:[e.jsx("span",{children:ae.ASCENDANT}),n!==void 0&&e.jsx("span",{className:"planet-deg",children:me(n)})]},"asc")),m==="chandra"&&x===1&&v.push(e.jsx("div",{className:"planet-item ascendant",children:e.jsxs("span",{children:[ae.ASCENDANT," (चन्द्र)"]})},"asc-chandra")),f.forEach(k=>{v.push(e.jsxs("div",{className:"planet-item",children:[e.jsx("span",{className:k.retrograde?"retrograde":"",children:ae[k.planet]}),k.degreesInSign!==void 0&&e.jsx("span",{className:"planet-deg",children:me(k.degreesInSign)})]},k.planet))}),e.jsxs("div",{className:"petal",style:{transform:`translateX(-50%) rotate(${S}deg)`},children:[e.jsx("div",{className:"rashi-number font-semibold",children:b(x)}),e.jsx("div",{className:"planets-container",children:v})]},x)}),e.jsx("div",{className:"chart-center-dot text-2xl font-bold dark:text-red-400",children:"ॐ"}),e.jsx(Et,{cx:200,cy:200,onSelect:x=>o(x)})]}),r&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",onClick:()=>o(null),children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 dark:text-stone-100 rounded-lg shadow-lg p-6 max-w-md w-full transition-colors duration-300",onClick:x=>x.stopPropagation(),children:[e.jsxs("h3",{className:"font-bold text-lg mb-2 text-blue-600 dark:text-blue-400",children:["घर ",b(r)," – ",F[r-1]," (स्वामी:"," ",X[ft[r]],")"]}),m!=="chandra"&&r===l&&n!==void 0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsxs("span",{children:[ae.ASCENDANT," (",F[l-1],")"]}),e.jsxs("span",{children:[me(n)," (",_e(n),")"]})]}),d&&c&&e.jsxs("div",{className:"text-sm ml-2 text-gray-600 dark:text-gray-400",children:[Ne[d],b(c)]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round(n/30*100)}%`}})})]}),m==="chandra"&&r===1&&g&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:e.jsxs("span",{children:[ae.ASCENDANT," (चन्द्र)"]})}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round((g.degreesInSign||0)/30*100)}%`}})}),g.nakshatra&&g.nakshatraPada&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 font-semibold mt-1",children:["जनम नक्षत्र:"," ",Ne[g.nakshatra],b(g.nakshatraPada)]})]}),(w.get(r)||[]).map(x=>{if(m==="chandra"&&r===1&&x.planet==="MOON")return null;const f=x.degreesInSign!==void 0?Math.round(x.degreesInSign/30*100):null;return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsx("span",{className:x.retrograde?"font-bold text-blue-600 dark:text-blue-400":"",children:X[x.planet]}),x.degreesInSign!==void 0&&e.jsxs("span",{children:[me(x.degreesInSign)," (",_e(x.degreesInSign),")"]})]}),x.nakshatra&&x.nakshatraPada&&e.jsxs("div",{className:"text-sm ml-2 text-gray-600 dark:text-gray-400",children:[Ne[x.nakshatra],b(x.nakshatraPada)]}),f!==null&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded",style:{width:`${f}%`}})})]},x.planet)})]})})]})},Kt=({planets:a})=>e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg overflow-x-auto dark:bg-gray-800 dark:text-stone-100 transition-colors duration-300",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:t.planetaryPositions}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:t.planet}),e.jsx("th",{className:"py-2 px-2",children:t.rashi}),e.jsx("th",{className:"py-2 px-2",children:t.degrees}),e.jsx("th",{className:"py-2 px-2",children:t.nakshatra}),e.jsx("th",{className:"py-2 px-2",children:t.pada})]})}),e.jsx("tbody",{children:a.map(l=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-stone-700 hover:bg-amber-50/70 dark:hover:bg-gray-800 transition-colors duration-200",children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100",children:[X[l.planet],l.retrograde&&e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 ml-1",children:["(",t.retrograde,")"]})]}),e.jsx("td",{className:"py-2 px-2",children:F[l.rashi-1]}),e.jsx("td",{className:"py-2 px-2 font-mono",children:Ke(l.degreesInSign)}),e.jsx("td",{className:"py-2 px-2",children:l.nakshatra}),e.jsx("td",{className:"py-2 px-2",children:b(l.nakshatraPada)})]},l.planet))})]})]}),Se=({data:a,title:l,titleClassName:n})=>{const d=y=>{if(!y)return"?";try{const j=new Date(y),N=j.getUTCHours(),D=j.getUTCMinutes(),A=kt(N),P=N%12===0?12:N%12;return`${b(P)}:${b(D.toString().padStart(2,"0"))} ${A}`}catch{return"?"}};function c(y){let j,N;if(y>=1&&y<=15)j=y,N="शुक्ल पक्ष";else if(y>=16&&y<=30)j=y-15,N="कृष्ण पक्ष";else return`अवैध तिथि (${y})`;return Nt(j,N)}const m=(y,j,N)=>{if(!y||!j||!N)return"?";try{const D=V=>{const T=new Date(V);return new Date(T.getUTCFullYear(),T.getUTCMonth(),T.getUTCDate(),T.getUTCHours(),T.getUTCMinutes(),T.getUTCSeconds())},A=D(N),P=D(y),J=D(j),C=I(A),O=I(P),L=I(J),E=d(y),Y=d(j),M=O.year===C.year&&O.monthIndex===C.monthIndex&&O.day===C.day,z=L.year===C.year&&L.monthIndex===C.monthIndex&&L.day===C.day,H=M?E:`${b(O.day)} गते ${E}`,oe=z?Y:`${b(L.day)} गते ${Y}`;return`${H} देखि ${oe} सम्म`}catch{return"N/A"}},r=a.planets.find(y=>y.planet==="MOON"),o=a.planets.find(y=>y.planet==="SUN"),g=new Date(a.birthDetails.datetime),i=I(g),w=`${b(i.year)} ${ne[i.monthIndex]} ${b(i.day)}`,x=jt[g.getDay()],f=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(g),S=new Intl.DateTimeFormat("ne-NP",{hour:"numeric",minute:"numeric",hour12:!0}).format(g),v=ke[a.nakshatra.index],k=v?v.syllables[a.nakshatra.pada-1]:"?";function p(y,j){const N=ke.findIndex(A=>A.name===y);return N===-1?"?":ke[N].syllables[j-1]||"?"}const K=r?p(r.nakshatra,r.nakshatraPada):"?",le=F[a.ascendant.sign-1],R=Ke(a.ascendant.degreesInSign);return e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg h-full bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:`text-xl font-bold mb-4 text-center ${n||"text-blue-400 dark:text-blue-400"}`,children:l||t.birthDetails}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start ",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.birthDateBS,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:w})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.birthDateAD,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:f})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.birthTime,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:S})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.dayOfWeek,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:x})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:t.dailyTimings}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr] sm:grid-cols-[auto_1fr_auto_1fr] items-center gap-x-4 gap-y-2 text-sm",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.sunrise,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:b(a.sunRise)}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right sm:text-right",children:[t.sunset,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:b(a.sunSet)})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:t.astrologicalDetails}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr] items-center gap-x-4 gap-y-3 text-sm",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.lagna,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:[le," (",R,")"]}),a.ashtaKoota.lagnesh&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.lagnesh,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:a.ashtaKoota.lagnesh})]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.moonSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:F[r.rashi-1]})]}),a.ashtaKoota.rashiLord&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.rashiLord,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:a.ashtaKoota.rashiLord})]}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.sunSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:F[o.rashi-1]})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.birthNakshatra,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.nakshatra.nameNepali}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:m(a.nakshatra.start,a.nakshatra.end,a.birthDetails.datetime)}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsxs("span",{className:"font-semibold",children:["पद ",b(a.nakshatra.pada),": "]}),m(a.nakshatra.padaStart,a.nakshatra.padaEnd,a.birthDetails.datetime)]}),r&&(a.nakshatra.nameNepali!==r.nakshatra||a.nakshatra.pada!==r.nakshatraPada)&&e.jsxs("span",{className:"font-semibold text-green-700 dark:text-green-600",children:[t.modernAstroInfo,": ",t.nakshatra,": ",r.nakshatra," ",t.pada,": ",b(r.nakshatraPada)]})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.tithi,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[a.tithi.paksha,"  ",c(a.tithi.tithiNumber),"(",b(a.tithi.tithiNumber),")"]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:m(a.tithi.start,a.tithi.end,a.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.yoga,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.yoga.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:m(a.yoga.start,a.yoga.end,a.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.karana,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.karana.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:m(a.karana.start,a.karana.end,a.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[t.suggestedSyllable,":"]}),e.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-600 text-lg text-left",children:k})]}),r&&(a.nakshatra.nameNepali!==r.nakshatra||a.nakshatra.pada!==r.nakshatraPada)&&e.jsxs("span",{className:"font-semibold text-green-700 dark:text-green-600",children:[t.modernAstroInfo,": ",K]})]}),a.ashtaKoota&&e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:t.gunaMilanDetails}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto_1fr] sm:grid-cols-[auto_1fr_auto_1fr_auto_1fr] gap-x-4 gap-y-2 text-sm items-baseline",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.varna,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.varna}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.vasya,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.vasya}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.gana,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.gana}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.yoni,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.yoni}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.nadi,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.nadi}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.tatva,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.tatva}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.paya,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.ashtaKoota.paya})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-2",children:t.calculationDetails}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.backend,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[a.calculationMeta.backend,": ",a.calculationMeta.version]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.ayanamsa,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[a.calculationMeta.ayanamsa," (",a.calculationMeta.ayanamsaString,")"]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[t.houseSystem,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:a.calculationMeta.houseSystem})]})]})]})]})},Z=a=>{if(!a||a==="N/A")return"N/A";try{const l=new Date(a);if(isNaN(l.getTime()))return"N/A";const n=I(l),d=b(n.year.toString()),c=ne[n.monthIndex],m=b(n.day.toString());return`${d} ${c} ${m}`}catch(l){return console.error("Date formatting error:",l),"N/A"}},re=({dashaSequence:a,title:l})=>{const[n,d]=h.useState(null),c=l===t.jaiminiDasha,m=r=>{d(o=>o===r?null:r)};return e.jsxs("div",{className:"kundali-card p-2 sm:p-6 mb-11 print:mb-2 rounded-lg bg-slate-200 dark:bg-gray-800 break-inside-avoid-page page-break-inside-avoid",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4 print:hidden",children:l}),c&&e.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 -mt-3 mb-3 px-2 print:hidden",children:t.jaiminiProportionalNote}),e.jsx("div",{className:"print:hidden",children:e.jsxs("table",{className:"w-full text-left text-sm sm:text-base border-collapse",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:c?"दशा राशि":t.mahaDasha}),e.jsx("th",{className:"py-2 px-2",children:t.startsOn}),e.jsx("th",{className:"py-2 px-2",children:t.endsOn})]})}),e.jsx("tbody",{children:a.map(r=>{const o=r.planet+r.start,g=r.subDashas&&r.subDashas.length>0;return e.jsxs(ht.Fragment,{children:[e.jsxs("tr",{className:`border-b border-amber-100 dark:border-amber-800 ${g?"cursor-pointer hover:bg-amber-50/70 dark:hover:bg-amber-900/40":""}`,onClick:()=>g&&m(o),"aria-expanded":g&&n===o,"aria-controls":`antardasha-${o}`,children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100 flex items-center relative",children:[g&&e.jsxs("div",{className:"relative group",children:[e.jsx(ue,{className:`w-4 h-4 mr-2 text-amber-700 dark:text-blue-400 transition-transform duration-300 ${n===o?"rotate-180":""}`}),e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-1 px-2 py-1 bg-zinc-800 text-white text-xs rounded shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-[999] dark:bg-gray-800 dark:text-stone-200",children:t.antarDasha_clickToExpand})]}),e.jsx("span",{className:`z-0 ${g?"":"ml-6"}`,children:c?r.planet:X[r.planet]})]}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:Z(r.start)}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:Z(r.end)})]}),g&&e.jsx("tr",{className:"bg-slate-200 dark:bg-gray-800",children:e.jsx("td",{colSpan:3,className:"p-0 border-none",children:e.jsx("div",{id:`antardasha-${o}`,className:`overflow-hidden transition-all duration-500 ease-in-out ${n===o?"max-h-[1000px]":"max-h-0"}`,children:e.jsxs("div",{className:"p-4 bg-amber-50/50 dark:bg-amber-900/20",children:[e.jsx("h4",{className:"font-semibold text-blue-400 dark:text-blue-400 mb-2 pl-2",children:c?"अन्तरदशा राशि":t.antarDasha}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-stone-500 dark:text-stone-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:c?"राशि":t.planet}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:t.startsOn}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:t.endsOn})]})}),e.jsx("tbody",{children:r.subDashas.map(i=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-amber-800 last:border-b-0",children:[e.jsx("td",{className:"py-1.5 px-2 text-stone-800 dark:text-stone-100",children:c?i.planet:X[i.planet]}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:Z(i.start)}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:Z(i.end)})]},i.planet+i.start))})]})]})})})})]},o)})})]})}),e.jsxs("div",{className:"hidden print:block mt-1",children:[e.jsx("h4",{className:"text-lg font-semibold mb-1 text-stone-800",children:l}),c&&e.jsx("p",{className:"text-xs text-stone-500 -mt-1 mb-1 px-2 italic",children:t.jaiminiProportionalNote}),e.jsxs("table",{className:"w-full text-left text-sm border-collapse mb-1",children:[e.jsx("thead",{className:"border-b-2 border-stone-400 text-stone-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-1 px-2",children:c?"दशा राशि":t.mahaDasha}),e.jsx("th",{className:"py-1 px-2",children:t.startsOn}),e.jsx("th",{className:"py-1 px-2",children:t.endsOn})]})}),e.jsx("tbody",{children:a.slice(0,12).map(r=>e.jsxs("tr",{className:"border-b border-stone-200",children:[e.jsx("td",{className:"py-1 px-2 font-medium text-stone-800",children:c?r.planet:X[r.planet]}),e.jsx("td",{className:"py-1 px-2 text-stone-700",children:Z(r.start)}),e.jsx("td",{className:"py-1 px-2 text-stone-700",children:Z(r.end)})]},`print-${r.planet}-${r.start}`))})]}),e.jsx("p",{className:"text-xs text-stone-600 px-2 italic",children:t.subDashaPrintNote})]})]})},ve=({chart:a})=>{if(!a.chartData)return null;const l="planets"in a.chartData?a.chartData.planets:[],n="ascendant"in a.chartData?a.chartData.ascendant.sign:1,d="ascendant"in a.chartData?a.chartData.ascendant.degreesInSign:void 0,c="ascendant"in a.chartData?a.chartData.ascendant.nakshatra:void 0,m="ascendant"in a.chartData?a.chartData.ascendant.nakshatraPada:void 0;return e.jsxs("div",{className:"chart-instance dark:bg-gray-800 break-inside-avoid-page page-break-inside-avoid print:mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 text-center dark:text-blue-400",children:a.title}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(_t,{planets:l.map(r=>({planet:r.planet,rashi:"rashi"in r?r.rashi:r.sign,degreesInSign:"degreesInSign"in r?r.degreesInSign:void 0,retrograde:r.retrograde,nakshatra:r.nakshatra,nakshatraPada:r.nakshatraPada})),ascendantSign:n,ascendantDegrees:d,ascendantNakshatra:c,ascendantNakshatraPada:m,chartType:a.type})})]},a.title)},Gt=({data:a,onReturnToForm:l})=>{const[n,d]=h.useState(!1),c=a.divisionalCharts.find(p=>p.name.includes("D9")),m=a.divisionalCharts.find(p=>p.name.includes("D10")),r=a.divisionalCharts.find(p=>p.name.includes("D3")),o=a.divisionalCharts.find(p=>p.name.includes("D12")),g=a.divisionalCharts.find(p=>p.name.includes("D4")),i=a.divisionalCharts.find(p=>p.name.includes("D60")),w=[{type:"lagna",title:t.rashiChart,chartData:a},{type:"chandra",title:t.chandraChart,chartData:a},{type:"navamsha",title:t.navamsaChart,chartData:c},{type:"dashamsa",title:t.dashamsaChart,chartData:m}],x=[{type:"drekkana",title:t.drekkanaChart,chartData:r},{type:"dwadamsha",title:t.dwadamshaChart,chartData:o},{type:"chaturthamsha",title:t.chaturthamshaChart,chartData:g},{type:"shashtiamsha",title:t.shashtiamshaChart,chartData:i}].filter(p=>p.chartData),f=new Date,S=I(f),v=`${b(S.year)} ${ne[S.monthIndex]} ${b(S.day)}`,k=f.toLocaleTimeString("ne-NP",{hour:"numeric",minute:"2-digit",hour12:!0});return e.jsxs("div",{className:"kundali-display-container flex flex-col bg-slate-200 rounded-xl shadow-lg w-full lg:max-w-4xl xl:max-w-6xl lg:p-4 md:p-1 space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border dark:border-gray-700 pb-32 print:pb-2 print:space-y-2",children:[e.jsxs("header",{className:"kundali-card rounded-lg text-center dark:bg-gray-800 dark:text-blue-400 transition-colors duration-300",children:[e.jsx("h2",{className:"text-3xl self-center font-bold text-blue-400 dark:text-blue-400",children:t.kundaliOf(a.birthDetails.name)}),e.jsxs("div",{className:"hidden text-xs self-center print:block font-bold text-gray-400 dark:text-gray-400",children:[t.printedDate,": ",v," ",k]}),e.jsx("div",{className:"mt-2 text-xs text-orange-600 dark:text-orange-400 text-center px-2",children:t.kundaliDisclaimer})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 print:gap-2",children:e.jsxs("div",{className:"flex flex-col gap-4 print:gap-2",children:[e.jsx("div",{className:"kundali-card p-4 print:p-2 rounded-lg bg-slate-200 dark:bg-gray-800 shadow",children:e.jsx(Se,{data:a})}),e.jsx("div",{className:"kundali-card p-4 print:p-2 rounded-lg bg-slate-200 dark:bg-gray-800 shadow",children:e.jsx(Kt,{planets:a.planets})})]})}),e.jsxs("div",{className:"print:break-inside-avoid-page",children:[e.jsxs("div",{className:"print:hidden",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:w.map(p=>e.jsx(ve,{chart:p},p.type))}),x.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-6 mt-6 transition-all duration-500 overflow-hidden ${n?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:n&&x.map(p=>e.jsx(ve,{chart:p},p.type))}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("button",{onClick:()=>d(!n),className:"flex items-center justify-center gap-2 mx-auto px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-100/50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/40 transition",children:[e.jsx("span",{children:n?t.showLessCharts:t.showMoreCharts}),e.jsx(ue,{className:`w-4 h-4 transition-transform duration-300 ${n?"rotate-180":""}`})]})})]})]}),e.jsx("div",{className:"hidden print:block",children:e.jsx("div",{className:"flex flex-wrap -mx-2 mt-2 pt-4 border-t border-gray-300 dark:border-gray-700",children:[...w,...x].map(p=>e.jsx("div",{className:"w-1/2 px-2 mb-4 ",children:e.jsx(ve,{chart:p})},`print-${p.type}`))})})]}),e.jsxs("div",{className:"space-y-4 print:space-y-2 print:pt-2",children:[e.jsx(re,{dashaSequence:a.dashaSequence,title:t.dashaPeriods}),a.tribhagiDasha?.length>0&&e.jsx(re,{dashaSequence:a.tribhagiDasha,title:t.tribhagiDasha}),a.yoginiDasha?.length>0&&e.jsx(re,{dashaSequence:a.yoginiDasha,title:t.yoginiDasha}),a.ashtottariDasha?.length>0&&e.jsx(re,{dashaSequence:a.ashtottariDasha,title:t.ashtottariDasha}),a.jaiminiDasha?.length>0&&e.jsx(re,{dashaSequence:a.jaiminiDasha,title:t.jaiminiDasha})]}),e.jsx("div",{className:"hidden print:block text-center text-xs text-gray-500 pt-2 mt-2 border-t border-gray-300",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," ",t.project]})}),e.jsx("div",{className:"fixed bottom-12 left-1/2 transform -translate-x-1/2 z-[999] print:hidden print:h-0 w-full px-4 text-center",children:e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{className:"bg-blue-600 dark:bg-blue-600 text-white px-6 py-2 rounded shadow-md hover:bg-blue-700 transition flex items-center gap-2",onClick:l,children:["← ",t.returnToForm]}),e.jsxs("button",{className:"bg-gray-600 dark:bg-gray-500 text-white px-6 py-2 rounded shadow-md hover:bg-gray-700 transition flex items-center gap-2",onClick:vt,children:[e.jsx(Oe,{className:"w-4 h-4"})," ",t.print]})]})})]})},Rt={name:"सुरज",dateSystem:"BS",bsYear:2050,bsMonth:2,bsDay:2,hour:10,minute:15,second:0,period:"AM",location:{name:"काठमाडौं",romanization:"kathmandu",latitude:27.7172,longitude:85.324,offset:5.75,zoneId:"Asia/Kathmandu"}},Ot={name:"अम्रिता",dateSystem:"BS",bsYear:2053,bsMonth:8,bsDay:9,hour:2,minute:30,second:0,period:"PM",location:{name:"काठमाडौं",romanization:"kathmandu",latitude:27.7172,longitude:85.324,offset:5.75,zoneId:"Asia/Kathmandu"}},Ut=({onCalculate:a,isLoading:l,defaultValues:n})=>{const d=h.useRef(null),c=h.useRef(null),m=async()=>{const r=d.current?.validateAndGetData(),o=c.current?.validateAndGetData();if(r&&o){const[g,i]=await Promise.all([r,o]);g&&i&&a(g,i)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-lg p-4 dark:bg-gray-800/50",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700 dark:text-blue-300 mb-4 text-center",children:t.groomDetails}),e.jsx(ze,{ref:d,onCalculate:()=>{},isLoading:!1,hideSubmitButton:!0,defaultValues:n?.groom||Rt})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-lg p-4 dark:bg-gray-800/50",children:[e.jsx("h2",{className:"text-xl font-bold text-pink-700 dark:text-pink-400 mb-4 text-center",children:t.brideDetails}),e.jsx(ze,{ref:c,onCalculate:()=>{},isLoading:!1,hideSubmitButton:!0,defaultValues:n?.bride||Ot})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"button",onClick:m,disabled:l,className:"w-full flex justify-center items-center py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed dark:bg-green-600 dark:hover:bg-green-700 dark:disabled:bg-gray-500",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-5 h-5 mr-3 animate-spin"}),t.calculating]}):t.calculateComparison})})]})},B=({label:a,groomValue:l,brideValue:n,typeLabel:d,maxPoints:c,obtainedPoints:m})=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-stone-700 last:border-b-0",children:[e.jsx("td",{className:"py-2 font-medium text-stone-800 dark:text-stone-100",children:a}),e.jsx("td",{className:"py-2 text-stone-700 dark:text-stone-200",children:l}),e.jsx("td",{className:"py-2 text-stone-700 dark:text-stone-200",children:n}),e.jsx("td",{className:"py-2 text-center text-blue-600 dark:text-blue-400 font-medium",children:d??""}),e.jsx("td",{className:"py-2 text-center text-stone-700 dark:text-stone-200",children:b(c)}),e.jsx("td",{className:"py-2 text-center font-semibold text-stone-800 dark:text-stone-100",children:b(m)})]}),Wt=({result:a,onReturnToForm:l})=>{const{groom:n,bride:d,score:c,conclusion:m,labels:r}=a,o=new Date,g=I(o),i=`${b(g.year)} ${ne[g.monthIndex]} ${b(g.day)}`,w=o.toLocaleTimeString("ne-NP",{hour:"numeric",minute:"2-digit",hour12:!0});return e.jsxs("div",{className:"kundali-display-container flex flex-col bg-slate-200 rounded-xl shadow-lg w-full lg:max-w-4xl xl:max-w-6xl lg:p-4 md:p-1 space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border dark:border-gray-700 pb-32 print:pb-0 print:m-0 print:rounded-none print:shadow-none print:bg-transparent",children:[e.jsxs("header",{className:"kundali-card rounded-lg text-center p-4 dark:bg-gray-800",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-400 dark:text-blue-400",children:[n.birthDetails.name," र ",d.birthDetails.name," को गुण मिलान"]}),e.jsxs("div",{className:"hidden text-xs self-center print:block font-bold text-gray-400 dark:text-gray-400",children:[t.printedDate,": ",i," ",w]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Se,{data:n,title:t.groomDetails,titleClassName:"text-blue-700 dark:text-blue-300"}),e.jsx(Se,{data:d,title:t.brideDetails,titleClassName:"text-pink-700 dark:text-pink-400"})]}),e.jsxs("div",{className:"kundali-card p-3 sm:p-5 rounded-lg overflow-x-auto bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:t.gunaMilanTableTitle}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:t.koota}),e.jsx("th",{className:"py-2 px-2",children:t.groom}),e.jsx("th",{className:"py-2 px-2",children:t.bride}),e.jsx("th",{className:"py-2 px-2 text-center",children:t.kootaType}),e.jsx("th",{className:"py-2 px-2 text-center",children:t.maxPoints}),e.jsx("th",{className:"py-2 px-2 text-center",children:t.obtainedPoints})]})}),e.jsxs("tbody",{children:[e.jsx(B,{label:t.varna,groomValue:n.ashtaKoota.varna,brideValue:d.ashtaKoota.varna,typeLabel:r.varnaLabel,maxPoints:1,obtainedPoints:c.varna}),e.jsx(B,{label:t.vasya,groomValue:n.ashtaKoota.vasya,brideValue:d.ashtaKoota.vasya,typeLabel:r.vasyaLabel,maxPoints:2,obtainedPoints:c.vasya}),e.jsx(B,{label:t.tara,groomValue:n.nakshatra.nameNepali,brideValue:d.nakshatra.nameNepali,typeLabel:r.taraLabel,maxPoints:3,obtainedPoints:c.tara}),e.jsx(B,{label:t.yoni,groomValue:n.ashtaKoota.yoni,brideValue:d.ashtaKoota.yoni,typeLabel:r.yoniLabel,maxPoints:4,obtainedPoints:c.yoni}),e.jsx(B,{label:t.grahaMaitri,groomValue:n.ashtaKoota.rashiLord,brideValue:d.ashtaKoota.rashiLord,typeLabel:r.grahaMaitriLabel,maxPoints:5,obtainedPoints:c.grahaMaitri}),e.jsx(B,{label:t.gana,groomValue:n.ashtaKoota.gana,brideValue:d.ashtaKoota.gana,typeLabel:r.ganaLabel,maxPoints:6,obtainedPoints:c.gana}),e.jsx(B,{label:t.bhakoot,groomValue:F[n.planets.find(x=>x.planet==="MOON").rashi-1],brideValue:F[d.planets.find(x=>x.planet==="MOON").rashi-1],typeLabel:r.bhakootLabel,maxPoints:7,obtainedPoints:c.bhakoot}),e.jsx(B,{label:t.nadi,groomValue:n.ashtaKoota.nadi,brideValue:d.ashtaKoota.nadi,typeLabel:r.nadiLabel,maxPoints:8,obtainedPoints:c.nadi})]}),e.jsx("tfoot",{className:"border-t-2 border-amber-300 dark:border-amber-600 font-bold",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"py-2 px-2 text-right text-stone-800 dark:text-stone-100",children:t.totalPoints}),e.jsx("td",{className:"px-2 text-center text-stone-800 dark:text-stone-100",children:b(36)}),e.jsx("td",{className:"px-2 text-center text-lg text-blue-600 dark:text-blue-400",children:b(c.total)})]})})]})]}),e.jsxs("div",{className:"kundali-card rounded-lg bg-slate-200 dark:bg-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400",children:t.conclusion}),e.jsx("p",{className:"text-stone-800 dark:text-stone-100",children:m})]}),e.jsx("div",{className:"hidden print:block text-center text-xs text-gray-500 mt-4 border-t border-gray-300",children:e.jsxs("p",{children:["© ",new Date().getFullYear()," ",t.project]})}),e.jsxs("div",{className:"fixed bottom-12 left-1/2 transform -translate-x-1/2 z-[999] w-full px-4 text-center screen-only-footer print:hidden",children:[e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{className:"bg-blue-600 dark:bg-blue-600 text-white px-6 py-2 rounded shadow-md hover:bg-blue-700 dark:hover:bg-blue-800 transition flex items-center gap-2",onClick:l,children:["← ",t.returnToForm]}),e.jsx("button",{className:"bg-gray-600 dark:bg-gray-500 text-white px-6 py-2 rounded shadow-md hover:bg-gray-700 dark:hover:bg-gray-600 transition flex items-center gap-2",onClick:()=>window.print(),children:e.jsx(Oe,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 md:hidden",children:t.mobilePrintHint})]})]})},Zt=({onClose:a,onEdit:l,onView:n})=>{const[d,c]=h.useState([]);h.useEffect(()=>{try{const o=localStorage.getItem("savedKundalis");o&&c(JSON.parse(o))}catch(o){console.error("Failed to load saved kundalis:",o)}},[]);const m=o=>{if(window.confirm(t.deleteConfirm)){const g=d.filter(i=>i.id!==o);c(g),localStorage.setItem("savedKundalis",JSON.stringify(g))}},r=o=>{const g=new Date(o);return new Intl.DateTimeFormat("ne-NP-u-nu-deva",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(g)};return e.jsx("div",{className:"fixed inset-0 flex flex-wrap items-center justify-center bg-black/60 z-50 p-4 transition-opacity",onClick:a,children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full max-h-[80vh] flex flex-wrap flex-col p-6",onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-500 dark:text-blue-400",children:t.savedKundalis}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(we,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:d.length===0?e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-10",children:t.noSavedKundalis}):e.jsx("ul",{className:"space-y-3",children:d.map(o=>e.jsx("li",{className:"bg-slate-50 dark:bg-gray-700 p-3 rounded-md shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-600 dark:text-blue-300",children:o.type==="individual"?o.name:`${o.groomName} र ${o.brideName}`}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${o.type==="individual"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:o.type==="individual"?t.individual:t.comparison}),e.jsxs("span",{className:"ml-2",children:[t.savedOn," ",r(o.timestamp)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>n(o),className:"px-3 py-1 text-sm text-white bg-blue-500 rounded hover:bg-blue-600",children:t.view}),e.jsx("button",{onClick:()=>l(o),className:"px-3 py-1 text-sm text-gray-700 bg-gray-300 rounded hover:bg-gray-400 dark:bg-gray-500 dark:text-gray-100 dark:hover:bg-gray-400",children:t.edit}),e.jsx("button",{onClick:()=>m(o.id),className:"px-3 py-1 text-sm text-white bg-red-500 rounded hover:bg-red-600",children:t.delete})]})]})},o.id))})})]})})};export{Wt as C,Gt as K,Zt as S,Ut as a,ze as b};
