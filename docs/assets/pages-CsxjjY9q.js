import{j as N,r as T}from"./vendor-react-CMh7LEwM.js";import{X as Nt,G as bt,U as yt,b as kt,n as Dt}from"./data-CMNPzb4Y.js";import{K as At,C as It,a as vt,b as wt,S as Lt}from"./kundali-DAPDwyK4.js";import{V as ot,n as W,Y as Ot,i as B,o as ct,b as Pt,p as Z,q as Ut,r as _t,s as Rt,u as Tt,v as Et,R as rt,T as jt,w as Ct,x as Kt,y as Yt,z as Vt,h as tt,A as Jt,B as Ht,C as lt,D as Ft,E as zt,N as K,t as Bt,F as Gt}from"./bikram-Du7PEpk5.js";const $t="2.1.0",ye=({setIsAboutOpen:e})=>N.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:N.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 rounded-2xl shadow-xl p-6 max-w-sm w-full text-center relative border border-gray-200 dark:border-gray-700",children:[N.jsx("button",{onClick:()=>e(!1),className:"absolute top-3 right-3 p-1.5 rounded-full text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Close",children:N.jsx(Nt,{className:"w-5 h-5"})}),N.jsx("h2",{className:"text-xl font-bold mb-2 text-gray-900 dark:text-gray-100",children:"About Bikram Calendar"}),N.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"A modern Nepali Bikram Sambat and Gregorian calendar app built using React and PWA technology."}),N.jsx("span",{children:"App Version: "}),N.jsx("span",{className:"font-mono",children:$t}),N.jsxs("div",{className:"space-y-3 my-6",children:[N.jsxs("a",{href:"https://github.com/khumnath/nepdate/tree/page",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-3 w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold py-2.5 px-4 rounded-lg transition-colors",children:[N.jsx(bt,{className:"w-5 h-5"}),N.jsx("span",{children:"Source Code"})]}),N.jsxs("a",{href:"https://github.com/khumnath/nepdate/graphs/contributors",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-3 w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold py-2.5 px-4 rounded-lg transition-colors",children:[N.jsx(yt,{className:"w-5 h-5"}),N.jsx("span",{children:"Contributors"})]}),N.jsxs("a",{href:"https://github.com/khumnath/nepdate/issues/new",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-3 w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold py-2.5 px-4 rounded-lg transition-colors",children:[N.jsx(kt,{className:"w-5 h-5"}),N.jsx("span",{children:"Suggestions and issues"})]})]}),N.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[N.jsxs("p",{className:"mt-1",children:["© 2024–",new Date().getFullYear()," khumnath cg"]}),N.jsx("p",{className:"mt-1",children:"All rights reserved."})]})]})}),b=Math.PI/180,et=180/Math.PI;function s(e,a,t,n,g){return{mlcor:e,mscor:a,fcor:t,dcor:n,lcor:g}}function L(e,a,t,n,g){return{l:e,ml:a,ms:t,f:n,d:g}}const j=[s(0,0,0,4,13.902),s(0,0,0,2,2369.912),s(1,0,0,4,1.979),s(1,0,0,2,191.953),s(1,0,0,0,22639.5),s(1,0,0,-2,-4586.465),s(1,0,0,-4,-38.428),s(1,0,0,-6,-.393),s(0,1,0,4,-.289),s(0,1,0,2,-24.42),s(0,1,0,0,-668.146),s(0,1,0,-2,-165.145),s(0,1,0,-4,-1.877),s(0,0,0,3,.403),s(0,0,0,1,-125.154),s(2,0,0,4,.213),s(2,0,0,2,14.387),s(2,0,0,0,769.016),s(2,0,0,-2,-211.656),s(2,0,0,-4,-30.773),s(2,0,0,-6,-.57),s(1,1,0,2,-2.921),s(1,1,0,0,-109.673),s(1,1,0,-2,-205.962),s(1,1,0,-4,-4.391),s(1,-1,0,4,.283),s(1,-1,0,2,14.577),s(1,-1,0,0,147.687),s(1,-1,0,-2,28.475),s(1,-1,0,-4,.636),s(0,2,0,2,-.189),s(0,2,0,0,-7.486),s(0,2,0,-2,-8.096),s(0,0,2,2,-5.741),s(0,0,2,0,-411.608),s(0,0,2,-2,-55.173),s(0,0,2,-4,.025),s(1,0,0,1,-8.466),s(1,0,0,-1,18.609),s(1,0,0,-3,3.215),s(0,1,0,1,18.023),s(0,1,0,-1,.56),s(3,0,0,2,1.06),s(3,0,0,0,36.124),s(3,0,0,-2,-13.193),s(3,0,0,-4,-1.187),s(3,0,0,-6,-.293),s(2,1,0,2,-.29),s(2,1,0,0,-7.649),s(2,1,0,-2,-8.627),s(2,1,0,-4,-2.74),s(2,-1,0,2,1.181),s(2,-1,0,0,9.703),s(2,-1,0,-2,-2.494),s(2,-1,0,-4,.36),s(1,2,0,0,-1.167),s(1,2,0,-2,-7.412),s(1,2,0,-4,-.311),s(1,-2,0,2,.757),s(1,-2,0,0,2.58),s(1,-2,0,-2,2.533),s(0,3,0,-2,-.344),s(1,0,2,2,-.992),s(1,0,2,0,-45.099),s(1,0,2,-2,-.179),s(1,0,-2,2,-6.382),s(1,0,-2,0,39.528),s(1,0,-2,-2,9.366),s(0,1,2,0,.415),s(0,1,2,-2,-2.152),s(0,1,-2,2,-1.44),s(0,1,-2,-2,.384),s(2,0,0,1,-.586),s(2,0,0,-1,1.75),s(2,0,0,-3,1.225),s(1,1,0,1,1.267),s(1,-1,0,-1,-1.089),s(0,0,2,-1,.584),s(4,0,0,0,1.938),s(4,0,0,-2,-.952),s(3,1,0,0,-.551),s(3,1,0,-2,-.482),s(3,-1,0,0,.681),s(2,0,2,0,-3.996),s(2,0,2,-2,.557),s(2,0,-2,2,-.459),s(2,0,-2,0,-1.298),s(2,0,-2,-2,.538),s(1,1,-2,-2,.426),s(1,-1,2,0,-.304),s(1,-1,-2,2,-.372),s(0,0,4,0,.418),s(2,-1,0,-1,-.352)],z=[L(.127,0,0,0,6),L(-.151,0,2,0,-4),L(-.085,0,0,2,4),L(.15,0,1,0,3),L(-.091,2,1,0,-6),L(-.103,0,3,0,0),L(-.301,1,0,2,-4),L(.202,1,0,-2,-4),L(.137,1,1,0,-1),L(.233,1,1,0,-3),L(-.122,1,-1,0,1),L(-.276,1,-1,0,-3),L(.255,0,0,2,1),L(.254,0,0,2,-3),L(-.1,3,1,0,-4),L(-.183,3,-1,0,-2),L(-.297,2,2,0,-2),L(-.161,2,2,0,-4),L(.197,2,-2,0,0),L(.254,2,-2,0,-2),L(-.25,1,3,0,-2),L(-.123,2,0,2,2),L(.173,2,0,-2,-4),L(.263,1,1,2,0),L(.13,3,0,0,-1),L(.113,5,0,0,0),L(.092,3,0,2,-2)];function D(e){return e=e-Math.floor(e/360)*360,e<0?e+360:e}function mt(e,a){let t=e;for(let n=0;n<7;n++)t=e+a*Math.sin(t);return t}function pt(e){const a=(e-2415020)/36525,t=a*a,n=(279.6967+36000.7689*a+303e-6*t)*b,g=(270.4341639+481267.8831417*a-.0011333333*t)*b,c=(358.4758333+35999.04975*a-15e-5*t)*b,r=(296.1046083+477198.8491083*a+.0091916667*t)*b,h=(259.183275-1934.1420083*a+.0020777778*t)*b;return((-17.2327-.01737*a)*Math.sin(h)+.2088*Math.sin(2*h)-1.2729*Math.sin(2*n)+.1261*Math.sin(c)-.2037*Math.sin(2*g)+.0675*Math.sin(r)-.0497*Math.sin(2*n+c)+.0214*Math.sin(2*n-c)+.0261*Math.sin(2*g+r))/3600}function Y(e){const a=(e-2451545)/36525;return 24.144206-.013972*a-9e-6*a*a}function X(e){let a=e+.5,t=Math.floor(a),n=a-t,g=t;if(t>=2299161){const p=Math.floor((t-186721625e-2)/36524.25);g=t+1+p-Math.floor(p/4)}const c=g+1524,r=Math.floor((c-122.1)/365.25),h=Math.floor(365.25*r),x=Math.floor((c-h)/30.6001),l=c-h-Math.floor(30.6001*x)+n,o=Math.floor(l),u=x<13.5?x-1:x-13,M=u>2.5?r-4716:r-4715,i=(l-o)*24,m=Math.floor(i),d=(i-m)*3600,S=Math.floor(d/60),f=Math.floor(d%60);return new Date(Date.UTC(M,u-1,o,m,S,f))}function Q(e){const a=[124,85,62,48,37,26,16,10,9,10,11,11,12,13,15,16,17,17,13.7,12.5,12,7.5,5.7,7.1,7.9,1.6,-5.4,-5.9,-2.7,10.5,21.2,24,24.3,29.2,33.2,40.2,50.5,56.9,63.8,67,69.4,71],t=X(e),n=t.getUTCFullYear()+t.getUTCMonth()/12+(t.getUTCDate()-1)/365.25,g=(e-2378497)/36525;let c;if(n>=1620&&n<2030){const r=Math.floor((n-1620)/10),h=n-(1620+r*10);c=a[r]+(a[r+1]-a[r])*h/10}else n>=2030?c=71+.5*(n-2030):n>=948?c=25.5*g*g:c=1361.7+320*g+44.3*g*g;return c/3600}function R(e){const a=e-2415020,t=a/36525;let n=270.4337361+13.1763965445281*a-5.86*t*t/3600+.0068*t*t*t/3600,g=350.7374861110581+445267.1142166667*t-t*t*.001436111132303874+18888889e-13*t*t*t;const c=334.329556+1464852252e-2*t/3600-37.17*t*t/3600-.045*t*t*t/3600;let r=358.4758333333334+35999.04974999958*t-t*t*.0001500000059604645-t*t*t*33333333623078e-19,h=D(n-c);const x=259.183275-696291123e-2*t/3600+7.48*t*t/3600+.008*t*t*t/3600;let l=D(n-x),o=b*h,u=b*r,M=b*l,i=b*g,m=0,d=0;const S=1-6832e-11*a,f=1,p=f*f;for(let A=0;A<j.length;A++){const O=j[A].mlcor*o+j[A].mscor*u+j[A].fcor*M+j[A].dcor*i;let k=Math.sin(O);j[A].mscor!=0&&(k*=S,(j[A].mscor==2||j[A].mscor==-2)&&(k*=S)),j[A].fcor!=0&&(k*=p),m+=j[A].lcor*k}for(let A=0;A<z.length;A++){const O=z[A].ml*o+z[A].ms*u+z[A].f*M+z[A].d*i;d+=z[A].l*Math.sin(O)}const y=360*b;let I=.822*Math.sin(y*(.3248-.0017125594*a))+.307*Math.sin(y*(.14905-.0034251187*a))+.348*Math.sin(y*(.68266-.0006873156*a))+.662*Math.sin(y*(.65162+.0365724168*a))+.643*Math.sin(y*(.88098-.0025069941*a))+1.137*Math.sin(y*(.85823+.036448727*a))+.436*Math.sin(y*(.71892+.036217918*a))+.327*Math.sin(y*(.97639+173491e-9*a));return n=n+pt(e)+(m+d+I)/3600,D(n)}function V(e){const a=e-2415020,t=a/36525,n=279.696678+.9856473354*a+1.089*t*t/3600,g=281.220833+1.7192*t+45e-5*t*t,c=D(n-g),r=.01675104-418e-7*t-126e-9*t*t,h=mt(c*b,r),x=2*et*Math.atan(Math.sqrt((1+r)/(1-r))*Math.tan(h/2));let l=n+x-c;const o=(153.23+22518.7541*t)*b,u=(216.57+45037.5082*t)*b,M=(312.69+32964.3577*t)*b,i=(350.74+445267.1142*t-.00144*t*t)*b;let m=.00134*Math.cos(o)+.00154*Math.cos(u)+.002*Math.cos(M)+.00179*Math.sin(i)+.00178*Math.sin((5.4-1.5*t)*b);const d=1.0000002*(1-r*r)/(1+r*Math.cos(x*b)),S=20.4898/3600/d;let f=l+m+pt(e)-S;return D(f)}const Wt=2451545,Xt={MERCURY:{N:[48.3313,324587e-10],i:[7.0047,5e-8],w:[29.1241,420258e-10],a:[.387098,0],e:[.205635,559e-12],M:[168.6562,4.0923344368]},VENUS:{N:[76.6799,24659e-9],i:[3.3946,275e-10],w:[54.891,138374e-10],a:[.72333,0],e:[.006773,-132e-11],M:[48.0052,1.6021302244]},EARTH:{N:[0,0],i:[0,0],w:[102.9376,713e-7],a:[1,0],e:[.016709,-1151e-12],M:[356.047,.985609102]},MARS:{N:[49.5574,211081e-10],i:[1.8497,-178e-10],w:[286.5016,292961e-10],a:[1.523688,0],e:[.093405,2516e-12],M:[18.6021,.5240207766]},JUPITER:{N:[100.4542,276854e-10],i:[1.303,-1557e-10],w:[273.8777,164505e-10],a:[5.20256,0],e:[.048498,1611e-12],M:[19.895,.0830853001]},SATURN:{N:[113.6634,23898e-9],i:[2.4886,-1081e-10],w:[339.3939,297661e-10],a:[9.55475,0],e:[.055546,-9499e-12],M:[316.967,.0334442282]}};function Qt(e,a,t){if(a==="SUN"){const i=V(e),m=D(i-t),d=V(e-.1),S=D(d-t);let f=m-S;f<-180&&(f+=360),f>180&&(f-=360);const p=f/.1;return{planet:a,eclipticLongitude:m,rashi:Math.floor(m/30)+1,degreesInSign:m%30,retrograde:p<0,eclipticLatitude:0,speedLon:p}}if(a==="MOON"){const i=R(e),m=D(i-t),d=R(e-.1),S=D(d-t);let f=m-S;f<-180&&(f+=360),f>180&&(f-=360);const p=f/.1;return{planet:a,eclipticLongitude:m,rashi:Math.floor(m/30)+1,degreesInSign:m%30,retrograde:!1,eclipticLatitude:0,speedLon:p}}if(a==="RAHU"||a==="KETU"){const i=(e-2451545)/36525,m=D(125.04452-1934.136261*i),d=D(218.3164477+481267.88123421*i),S=D(280.46646+36000.76983*i),f=D(d-S),p=D(d-m);let y=-1.274*Math.sin((m-2*f)*b)-.227*Math.sin(2*p*b);const I=D(m+y),A=D(I-t),O=a==="RAHU"?A:D(A+180);return{planet:a,eclipticLongitude:O,rashi:Math.floor(O/30)+1,degreesInSign:O%30,retrograde:!0,eclipticLatitude:0,speedLon:-.0529}}const n=e-Wt,g=(i,m)=>{const d=Xt[m],S=D(d.N[0]+d.N[1]*i),f=d.i[0]+d.i[1]*i,p=D(d.w[0]+d.w[1]*i),y=d.a[0],I=d.e[0]+d.e[1]*i;let A=D(d.M[0]+d.M[1]*i);const O=mt(A*b,I),k=y*(Math.cos(O)-I),P=y*Math.sqrt(1-I*I)*Math.sin(O),w=(Math.cos(p*b)*Math.cos(S*b)-Math.sin(p*b)*Math.sin(S*b)*Math.cos(f*b))*k+(-Math.sin(p*b)*Math.cos(S*b)-Math.cos(p*b)*Math.sin(S*b)*Math.cos(f*b))*P,U=(Math.cos(p*b)*Math.sin(S*b)+Math.sin(p*b)*Math.cos(S*b)*Math.cos(f*b))*k+(-Math.sin(p*b)*Math.sin(S*b)+Math.cos(p*b)*Math.cos(S*b)*Math.cos(f*b))*P,v=Math.sin(p*b)*Math.sin(f*b)*k+Math.cos(p*b)*Math.sin(f*b)*P;return{x:w,y:U,z:v}},c=(i,m)=>{const d=g(i,m),S=g(i,"EARTH"),f=d.x-S.x,p=d.y-S.y,y=d.z-S.z,I=D(Math.atan2(p,f)*et),A=Math.sqrt(f*f+p*p),O=Math.atan2(y,A)*et;return{longitude:I,latitude:O}},{longitude:r,latitude:h}=c(n,a),{longitude:x}=c(n-.1,a),l=D(r-t),o=D(x-t);let u=l-o;u<-180&&(u+=360),u>180&&(u-=360);const M=u/.1;return{planet:a,eclipticLongitude:l,rashi:Math.floor(l/30)+1,degreesInSign:l%30,retrograde:M<0,eclipticLatitude:h,speedLon:M}}function dt(e,a,t){let n={};const g=t?6:12,c=t?60:30,r=Y(e),h=D(V(e)-r),x=D(R(e)-r),l=D(x-h),o=Math.floor(l/g);for(let u=0;u<2;u++){const i=(o+u+c)%c*g;let m=e,d,S,f;for(let y=0;y<5;y++){const I=Y(m),A=V(m),O=R(m),k=A,P=O;if(d=D(k-I),S=D(P-I),f=D(d+i)-S,f>180&&(f-=360),f<-180&&(f+=360),Math.abs(f)<1e-4)break;const U=(V(m+.001)-k)*1e3,E=(R(m+.001)-P)*1e3-U;m+=f/E}const p=X(m+(a-Q(m))/24);u===0?n.start=p:n.end=p}return{start:n.start.toISOString(),end:n.end.toISOString()}}function Zt(e,a){let t={};const n=13.333333333333334,g=Y(e),c=Math.floor(D(R(e)-g)/n);for(let r=0;r<2;r++){const x=(c+r+27)%27*n;let l=e,o,u;for(let i=0;i<5;i++){const m=Y(l),S=R(l);if(o=D(S-m),u=x-o,u>180&&(u-=360),u<-180&&(u+=360),Math.abs(u)<1e-4)break;const f=(R(l+.001)-S)*1e3;l+=u/f}const M=X(l+(a-Q(l))/24);r===0?t.start=M:t.end=M}return{start:t.start.toISOString(),end:t.end.toISOString()}}function qt(e,a){const t=13.333333333333334,n=t/4,g=Y(e),c=D(R(e)-g),r=Math.floor(c/t),h=c%t,x=Math.floor(h/n);let l={};for(let o=0;o<2;o++){const M=(r*4+x+o)*n;let i=e,m,d;for(let f=0;f<5;f++){const p=Y(i),I=R(i);if(m=D(I-p),d=M-m,d>180&&(d-=360),d<-180&&(d+=360),Math.abs(d)<1e-4)break;const A=(R(i+.001)-I)*1e3;i+=d/A}const S=X(i+(a-Q(i))/24);o===0?l.start=S:l.end=S}return{start:l.start.toISOString(),end:l.end.toISOString()}}function te(e,a){let t={};const n=13.333333333333334,g=Y(e),c=D(V(e)-g),r=D(R(e)-g),h=Math.floor(D(c+r)/n);for(let x=0;x<2;x++){const o=(h+x+27)%27*n;let u=e,M,i,m,d;for(let f=0;f<5;f++){const p=Y(u),y=V(u),I=R(u),A=y,O=I;if(M=D(A-p),i=D(O-p),m=D(M+i),d=o-m,d>180&&(d-=360),d<-180&&(d+=360),Math.abs(d)<1e-4)break;const k=(V(u+.001)-A)*1e3,P=(R(u+.001)-O)*1e3;u+=d/(P+k)}const S=X(u+(a-Q(u))/24);x===0?t.start=S:t.end=S}return{start:t.start.toISOString(),end:t.end.toISOString()}}function ee(e,a,t){const n=(e-2451545)/36525,g=280.46061837+360.98564736629*(e-2451545)+387933e-9*n*n-n*n*n/3871e4,c=D(g+t),r=23.439291-.0130042*n,h=et*Math.atan2(Math.cos(c*b),-(Math.sin(c*b)*Math.cos(r*b)+Math.tan(a*b)*Math.sin(r*b)));return D(h)}function ae(e){return Array.from({length:12},(a,t)=>({houseNumber:t+1,cuspLongitude:D(e+t*30),sign:Math.floor(D(e+t*30)/30)+1}))}function ne(e){const a=13.333333333333334,t=Math.floor(e/a),n=e%a/a,g=["KETU","VENUS","SUN","MOON","MARS","RAHU","JUPITER","SATURN","MERCURY"],c=[7,20,6,10,7,18,16,19,17],r=t%9,h=g[r],x=(1-n)*c[r];return{lord:h,balance:x}}function ut(e,a){const t=["KETU","VENUS","SUN","MOON","MARS","RAHU","JUPITER","SATURN","MERCURY"],n=[7,20,6,10,7,18,16,19,17],g=n.reduce((l,o)=>l+o),c=t.indexOf(e),r=n[c];let h=new Date(a);const x=[];for(let l=0;l<9;l++){const o=(c+l)%9,u=t[o],M=n[o]*r/g,i=new Date(h);i.setDate(i.getDate()+M*365.25),x.push({planet:u,start:h.toISOString(),end:i.toISOString()}),h=i}return x}function xt(e,a){const{lord:t,balance:n}=ne(e),g=["KETU","VENUS","SUN","MOON","MARS","RAHU","JUPITER","SATURN","MERCURY"],c=[7,20,6,10,7,18,16,19,17],r=[];let h=new Date(a);const x=new Date(h);x.setDate(x.getDate()+n*365.25),r.push({planet:t,start:h.toISOString(),end:x.toISOString(),subDashas:ut(t,h)}),h=x;let l=(g.indexOf(t)+1)%9;for(let o=0;o<15;o++){const u=g[l],M=c[l],i=new Date(h);i.setDate(i.getDate()+M*365.25),r.push({planet:u,start:h.toISOString(),end:i.toISOString(),subDashas:ut(u,h)}),h=i,l=(l+1)%9}return r}function se(e,a){return xt(e,a).map(n=>({...n,start:n.start,end:new Date(new Date(n.start).getTime()+(new Date(n.end).getTime()-new Date(n.start).getTime())/3).toISOString()}))}function ht(e,a,t){const n=["SUN","MOON","MARS","MERCURY","SATURN","JUPITER","RAHU","VENUS"],g=[6,15,8,17,10,19,12,21],c=108,r=n.indexOf(e);if(r===-1)return[];let h=new Date(a);const x=[];for(let l=0;l<8;l++){const o=(r+l)%8,u=n[o],M=g[o]*t/c,i=new Date(h);i.setDate(i.getDate()+M*365.25),x.push({planet:u,start:h.toISOString(),end:i.toISOString()}),h=i}return x}function oe(e,a,t){const n=Math.floor(e/13.333333333333334),g=["SUN","MOON","MARS","MERCURY","SATURN","JUPITER","RAHU","VENUS"],c=[6,15,8,17,10,19,12,21],r=t==="कृष्ण पक्ष",x=(()=>{if(r){if(n===5)return"SATURN";if(n===6)return"JUPITER";if(n===11)return"RAHU";if(n===15)return"VENUS"}return n>=2&&n<=5?"SUN":n>=6&&n<=8?"MOON":n>=9&&n<=11?"MARS":n>=12&&n<=14?"MERCURY":n>=15&&n<=17?"SATURN":n>=18&&n<=20?"JUPITER":n>=21&&n<=23?"RAHU":"VENUS"})(),l=g.indexOf(x);if(l===-1)return[];const o=360/27,M=(1-e%o/o)*c[l],i=[];let m=new Date(a);const d=new Date(m);d.setDate(d.getDate()+M*365.25),i.push({planet:x,start:m.toISOString(),end:d.toISOString(),subDashas:ht(x,m,c[l])}),m=d;let S=(l+1)%8;for(let f=0;f<10;f++){const p=g[S],y=c[S],I=new Date(m);I.setDate(I.getDate()+y*365.25),i.push({planet:p,start:m.toISOString(),end:I.toISOString(),subDashas:ht(p,m,y)}),m=I,S=(S+1)%8}return i}function ft(e,a,t){const n=["Mangala","Pingala","Dhanya","Bhramari","Bhadrika","Ulka","Siddha","Sankata"],g=[1,2,3,4,5,6,7,8],c=36,r=n.indexOf(e);if(r===-1)return[];let h=new Date(a);const x=[];for(let l=0;l<8;l++){const o=(r+l)%8,u=n[o],M=g[o]*t/c,i=new Date(h);i.setDate(i.getDate()+M*365.25),x.push({planet:u,start:h.toISOString(),end:i.toISOString()}),h=i}return x}function re(e,a){const t=13.333333333333334,n=Math.floor(e/t),g=["Mangala","Pingala","Dhanya","Bhramari","Bhadrika","Ulka","Siddha","Sankata"],c=[1,2,3,4,5,6,7,8],r=(n+3)%8,h=g[r],x=(1-e%t/t)*c[r],l=[];let o=new Date(a);const u=new Date(o);u.setDate(u.getDate()+x*365.25),l.push({planet:h,start:o.toISOString(),end:u.toISOString(),subDashas:ft(h,o,c[r])}),o=u;let M=(r+1)%8;for(let i=0;i<10;i++){const m=g[M],d=c[M],S=new Date(o);S.setDate(S.getDate()+d*365.25),l.push({planet:m,start:o.toISOString(),end:S.toISOString(),subDashas:ft(m,o,d)}),o=S,M=(M+1)%8}return l}const ie={SUN:1,MOON:2,MARS:10,MERCURY:6,JUPITER:4,VENUS:12,SATURN:7},ce={SUN:7,MOON:8,MARS:4,MERCURY:12,JUPITER:10,VENUS:6,SATURN:1};function le(e,a,t){const n=t/12,g=[0,3,6,9],c=[1,4,7,10];let r;g.includes(e)?r=e:c.includes(e)?r=(e+6)%12:r=(e+4)%12;let h=new Date(a);const x=[];for(let l=0;l<12;l++){const o=(r+l)%12,u=new Date(h);u.setDate(u.getDate()+n*365.25),x.push({planet:tt[o],start:h.toISOString(),end:u.toISOString()}),h=u}return x}function de(e,a,t){const n=Math.floor(a/30),g=(n+1)%2!==0;let c=[];if(g)for(let o=0;o<12;o++)c.push((n+o)%12);else for(let o=0;o<12;o++)c.push((n-o+12)%12);let r=new Date(t);const h=[],x=new Map;e.forEach(o=>{x.set(o.planet,o.rashi-1)});const l=[0,1,2,6,7,8];for(const o of c){const u=o+1,M=rt[u],i=x.get(M);if(i===void 0){h.push({planet:tt[o],start:"N/A",end:"N/A"});continue}let m;l.includes(o)?m=(i-o+12)%12:m=(o-i+12)%12;let d=m;m===0&&(d=12);const S=i+1;ie[M]===S&&(d+=1),ce[M]===S&&(d-=1),d>12&&(d=12),d<1&&(d=1);const f=new Date(r),p=new Date(f);if(p.setFullYear(f.getFullYear()+d),isNaN(p.getTime())){h.push({planet:tt[o],start:f.toISOString(),end:"N/A"});continue}h.push({planet:tt[o],start:f.toISOString(),end:p.toISOString(),subDashas:le(o,f,d)}),r=p}return h}function ue(e,a,t){const n=r=>{const h=Math.floor(r/30),x=r%30,l=30/e,o=Math.floor(x/l);let u,M=r*e%30;switch(e){case 3:u=(h+[0,4,8][o])%12;break;case 4:u=(h+o*3)%12;break;case 9:const m=Math.floor(h/4);u=([0,4,8][m]+o)%12;break;case 10:u=((h%2===0?h:(h+8)%12)+o)%12;break;case 12:u=(h+o)%12;break;case 60:const p=r*e;u=Math.floor(p/30)%12;break;default:const y=r*e;u=Math.floor(y/30)%12,M=y%30;break}return{sign:u+1,degreesInSign:M}},g=a.map(r=>{const{sign:h,degreesInSign:x}=n(r.eclipticLongitude);return{planet:r.planet,sign:h,degreesInSign:x,retrograde:r.retrograde,nakshatra:r.nakshatra,nakshatraPada:r.nakshatraPada}}),c=n(t);return{name:`D${e}`,planets:g,ascendant:{...c,nakshatra:"",nakshatraPada:0}}}function he(e,a,t){return{varna:Et[Vt[e]],vasya:Tt[ot[e]],yoni:W[Yt[a]],gana:Rt[Kt[a]],nadi:_t[Ct[a]],tatva:Ut[jt[e]],paya:(e-1)%4===0?Z.Suvarna:(e-2)%4===0?Z.Rajat:(e-3)%4===0?Z.Tamra:Z.Loha,rashiLord:B[rt[e]],lagnesh:B[rt[t]]}}function fe(e,a){const t={varna:0,vasya:0,tara:0,yoni:0,grahaMaitri:0,gana:0,bhakoot:0,nadi:0,total:0},n={ब्राह्मण:4,क्षत्रिय:3,वैश्य:2,शूद्र:1};t.varna=n[e.ashtaKoota.varna]>=n[a.ashtaKoota.varna]?1:0;const g=ot[e.planets.find(p=>p.planet==="MOON").rashi],c=ot[a.planets.find(p=>p.planet==="MOON").rashi];g===c?t.vasya=1:g==="Vanachara"&&c==="Chatushpada"||g==="Dwipada"&&c!=="Jalachara"?t.vasya=2:g==="Jalachara"&&c==="Dwipada"?t.vasya=0:t.vasya=.5;const r=(a.nakshatra.index-e.nakshatra.index+27)%9;t.tara=[0,2,4,6,8].includes(r)?3:1.5;const h=Object.keys(W).find(p=>W[p]===e.ashtaKoota.yoni),x=Object.keys(W).find(p=>W[p]===a.ashtaKoota.yoni);h&&x&&(t.yoni=Ot[h][x]??0);const l=Object.keys(B).find(p=>B[p]===e.ashtaKoota.rashiLord),o=Object.keys(B).find(p=>B[p]===a.ashtaKoota.rashiLord),u=ct[l][o];u==="Friend"?t.grahaMaitri=5:u==="Neutral"?t.grahaMaitri=4:ct[o][l]==="Neutral"?t.grahaMaitri=3:t.grahaMaitri=.5;const M=e.ashtaKoota.gana,i=a.ashtaKoota.gana;M===i||M==="देव"&&i==="मनुष्य"||M==="मनुष्य"&&i==="देव"?t.gana=6:M==="देव"&&i==="राक्षस"||M==="राक्षस"&&i==="देव"?t.gana=1:t.gana=0;const m=e.planets.find(p=>p.planet==="MOON").rashi,d=a.planets.find(p=>p.planet==="MOON").rashi,S=Math.abs(m-d);S===0||S===6?t.bhakoot=0:S===1||S===7?t.bhakoot=7:S===2||S===12?t.bhakoot=0:S===3||S===11||S===4||S===10?t.bhakoot=7:S===5||S===9?t.bhakoot=0:t.bhakoot=7,t.nadi=e.ashtaKoota.nadi===a.ashtaKoota.nadi?0:8,t.total=Object.values(t).reduce((p,y)=>p+y),t.total=Math.round(t.total*2)/2;let f=`कुल ${Pt(t.total)}/३६ गुण मिलान भएको छ। `;return t.total>=28?f+="यो अति उत्तम मिलान हो।":t.total>=24?f+="यो उत्तम मिलान हो।":t.total>=18?f+="यो मध्यम मिलान हो, विवाह गर्न सकिन्छ।":f+="यो मिलान विवाहको लागि उपयुक्त मानिदैन।",{score:t,conclusion:f}}async function it(e){try{const[a,t]=e.datetime.split("T"),[n,g,c]=a.split("-").map(Number),[r,h,x]=t.split(":").map(Number),l=new Date(Date.UTC(n,g-1,c,r,h,x)-e.offset*3600*1e3),o=Jt(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate())+(l.getUTCHours()+l.getUTCMinutes()/60+l.getUTCSeconds()/3600)/24,u=Q(o),M=o+u/24,i=Ht(l,e.latitude,e.longitude,e.offset),m=Y(M),d=["SUN","MOON","MARS","MERCURY","JUPITER","VENUS","SATURN","RAHU","KETU"].map(J=>{const at=Qt(M,J,m),nt=360/27,Mt=Math.floor(at.eclipticLongitude/nt);return{...at,nakshatra:lt[Mt],nakshatraPada:Math.floor(at.eclipticLongitude%nt/(nt/4))+1}}),f=ee(o,e.latitude,e.longitude),p=ae(f),y=d.find(J=>J.planet==="MOON"),I=d.find(J=>J.planet==="SUN"),A=Math.floor(y.eclipticLongitude/(360/27)),O=dt(M,e.offset,!1),k=Zt(M,e.offset),P=qt(M,e.offset),w=te(M,e.offset),U=dt(M,e.offset,!0),v=(y.eclipticLongitude-I.eclipticLongitude+360)%360,E=Math.floor(v/12)+1,_=v<180?"शुक्ल पक्ष":"कृष्ण पक्ष",C=(y.eclipticLongitude+I.eclipticLongitude)%360,G=Ft[Math.floor(C/(360/27))],H=Math.floor(v/6);let F;H===0||H===59?F=0:H===56?F=7:H===57?F=8:H===58?F=9:F=(H-1)%7+1;const St=zt[F],$=new Date(e.datetime);return{birthDetails:{...e},calculationMeta:{backend:"Nepdate-astroCalc",version:"2.1.0",ayanamsa:"Lahiri",ayanamsaValue:m,zodiac:"Sidereal",houseSystem:"Whole Sign",calculationUtc:new Date().toISOString()},sunRise:i.sunrise,sunSet:i.sunset,planets:d,ascendant:{longitude:f,sign:Math.floor(f/30)+1,degreesInSign:f%30,nakshatra:lt[Math.floor(f/(360/27))],nakshatraPada:Math.floor(f%(360/27)/(360/27/4))+1},houses:p,nakshatra:{index:A,pada:y.nakshatraPada,nameNepali:y.nakshatra,start:k.start,end:k.end,padaStart:P.start,padaEnd:P.end},tithi:{tithiNumber:E,paksha:_,start:O.start,end:O.end},yoga:{name:G,start:w.start,end:w.end},karana:{name:St,start:U.start,end:U.end},dashaSequence:xt(y.eclipticLongitude,$),tribhagiDasha:se(y.eclipticLongitude,$),yoginiDasha:re(y.eclipticLongitude,$),ashtottariDasha:oe(y.eclipticLongitude,$,_),jaiminiDasha:de(d,f,$),divisionalCharts:[9,10,3,12,4,60].map(J=>ue(J,d,f)),ashtaKoota:he(y.rashi,A,Math.floor(f/30)+1)}}catch(a){return{error:a instanceof Error?a.message:"Unknown error during calculation."}}}async function ge(e,a){const t=await it(e),n=await it(a);if("error"in t||"error"in n)return{error:"Could not calculate kundali for one or both individuals."};const{score:g,conclusion:c}=fe(t,n);return{groom:t,bride:n,score:g,conclusion:c}}const q={getKundali:it,getComparison:ge},me=(e,a)=>Dt.find(t=>t.latitude===e&&t.longitude===a),st=e=>{const a=new Date(e.datetime),t=Bt(a),n=a.getHours(),g=n>=12?"PM":"AM";let c=n%12;c===0&&(c=12);const r=me(e.latitude,e.longitude)||{name:`${e.latitude.toFixed(4)}, ${e.longitude.toFixed(4)}`,romanization:"Manual Selection",latitude:e.latitude,longitude:e.longitude,zoneId:e.zoneId,offset:e.offset};return{name:e.name,dateSystem:"BS",bsYear:t.year,bsMonth:t.monthIndex+1,bsDay:t.day,hour:c,minute:a.getMinutes(),second:a.getSeconds(),period:g,location:r}},pe=({mode:e,onModeChange:a})=>{const t=()=>e==="individual"?"translateX(0%)":e==="comparison"?"translateX(100%)":"translateX(200%)";return N.jsxs("div",{className:"relative flex w-full max-w-md mx-auto p-1 bg-gray-200 dark:bg-gray-700 rounded-full mb-6",children:[N.jsx("span",{className:"absolute inset-y-0 w-1/3 bg-blue-500 rounded-full shadow-md transition-transform duration-300 ease-in-out",style:{transform:t()}}),N.jsx("button",{type:"button",onClick:()=>a("individual"),className:`relative w-1/3 py-2 text-sm font-medium transition-colors duration-300 rounded-full ${e==="individual"?"text-white":"text-gray-600 dark:text-gray-300"}`,children:K.individual}),N.jsx("button",{type:"button",onClick:()=>a("comparison"),className:`relative w-1/3 py-2 text-sm font-medium transition-colors duration-300 rounded-full ${e==="comparison"?"text-white":"text-gray-600 dark:text-gray-300"}`,children:K.comparison}),N.jsx("button",{type:"button",onClick:()=>a("saved"),className:`relative w-1/3 py-2 text-sm font-medium transition-colors duration-300 rounded-full ${e==="saved"?"text-white":"text-gray-600 dark:text-gray-300"}`,children:K.saved})]})},gt=({onBack:e})=>{const[a,t]=T.useState("individual"),[n,g]=T.useState(null),[c,r]=T.useState(null),[h,x]=T.useState(!1),[l,o]=T.useState(null),[u,M]=T.useState(!1),[i,m]=T.useState(null),[d,S]=T.useState(Date.now());T.useEffect(()=>{M(a==="saved")},[a]);const f=T.useCallback(()=>{g(null),r(null),x(!1),o(null),m(null)},[]);T.useEffect(()=>{const k=()=>{u?(M(!1),t("individual")):n||c||l?f():e()};return window.addEventListener("popstate",k),()=>window.removeEventListener("popstate",k)},[f,e,n,c,l,u]),T.useEffect(()=>{(n||c||l||u)&&window.history.state?.kundaliState!=="subpage"&&window.history.pushState({kundaliState:"subpage"},"")},[n,c,l,u]);const p=()=>{!n&&!c&&!l&&!u?e():window.history.back()},y=(k,P)=>{try{let w=JSON.parse(localStorage.getItem("savedKundalis")||"[]"),U,v=-1;if(k==="individual"){const _=P;v=w.findIndex(C=>C.type==="individual"&&C.name===_.name),U={id:v!==-1?w[v].id:Date.now(),type:"individual",name:_.name,timestamp:new Date().toISOString(),data:_,defaultValues:st(_)}}else{const{groom:_,bride:C}=P;v=w.findIndex(G=>G.type==="comparison"&&G.groomName===_.name&&G.brideName===C.name),U={id:v!==-1?w[v].id:Date.now(),type:"comparison",groomName:_.name,brideName:C.name,timestamp:new Date().toISOString(),data:{groom:_,bride:C},defaultValues:{groom:st(_),bride:st(C)}}}v!==-1&&w.splice(v,1);const E=[U,...w].slice(0,10);localStorage.setItem("savedKundalis",JSON.stringify(E))}catch(w){console.error("Failed to save data:",w)}},I=k=>{k.type==="individual"?(m({individual:k.defaultValues}),t("individual")):(m({groom:k.defaultValues.groom,bride:k.defaultValues.bride}),t("comparison")),S(Date.now()),M(!1)},A=async k=>{M(!1),x(!0),o(null);const P=new Promise(w=>setTimeout(w,1e3));try{if(k.type==="individual"){const w=q.getKundali(k.data),[U,v]=await Promise.all([P,w]);"error"in v?o(v.error):(g(v),y("individual",k.data))}else{const w=q.getComparison(k.data.groom,k.data.bride),[U,v]=await Promise.all([P,w]);"error"in v?o(v.error):(r(v),y("comparison",k.data))}}catch(w){o(w instanceof Error?w.message:"An unexpected error occurred.")}finally{x(!1)}},O=()=>h?N.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px]",children:[N.jsxs("svg",{className:"animate-spin h-10 w-10 text-amber-800 dark:text-amber-400 mb-4",viewBox:"0 0 24 24",children:[N.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),N.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),N.jsx("div",{className:"text-lg font-semibold text-amber-800 dark:text-amber-400",children:K.calculating})]}):l?N.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-900/30 rounded-lg text-center p-4",children:N.jsxs("div",{className:"flex flex-col items-center justify-center",children:[N.jsxs("svg",{className:"w-16 h-16 text-red-500 dark:text-red-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[N.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),N.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),N.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),N.jsx("p",{className:"mt-4 text-xl text-red-700 dark:text-red-400",children:l}),N.jsx("button",{className:"mt-4 text-blue-600 dark:text-blue-400 underline",onClick:p,children:K.returnToForm})]})}):n?N.jsx(At,{data:n,onReturnToForm:p}):c?N.jsx(It,{result:c,onReturnToForm:p}):N.jsxs(N.Fragment,{children:[N.jsx(pe,{mode:a,onModeChange:k=>{k==="saved"?M(!0):t(k)}}),a==="comparison"?N.jsx(vt,{onCalculate:async(k,P)=>{x(!0),o(null);const w=new Promise(_=>setTimeout(_,1e3)),U=q.getComparison(k,P),[v,E]=await Promise.all([w,U]);"error"in E?o(E.error):(y("comparison",{groom:k,bride:P}),r(E)),x(!1)},isLoading:h,defaultValues:i||{}},d):N.jsx(wt,{onCalculate:async k=>{x(!0),o(null);const P=new Promise(E=>setTimeout(E,1e3)),w=q.getKundali(k),[U,v]=await Promise.all([P,w]);"error"in v?o(v.error):(y("individual",k),g(v)),x(!1)},isLoading:h,defaultValues:i?.individual},d),u&&N.jsx(Lt,{onClose:()=>{M(!1),t("individual")},onEdit:I,onView:A})]});return N.jsx("main",{className:"flex-1 flex flex-col overflow-hidden px-2 md:px-3 max-w-7xl mx-auto w-full bg-slate-200 text-gray-900 dark:bg-gray-800 dark:text-gray-100 transition-colors",children:N.jsxs("div",{className:"min-h-3 sm:p-6 md:p-6 lg:p-8",children:[N.jsx("div",{className:"flex overflow-hidden print:hidden print:h-0 items-center mb-4",children:N.jsxs("button",{onClick:p,className:"flex return-to-main items-center gap-2 px-3 py-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[N.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:N.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),K.returnTomain]})}),N.jsxs("div",{className:"flex justify-center text-base mb-4 font-bold text-gray-500 dark:text-gray-400",children:[K.Software_name,": ",K.Software_version]}),O()]})})},ke=Object.freeze(Object.defineProperty({__proto__:null,KundaliPage:gt,default:gt},Symbol.toStringTag,{value:"Module"})),xe=({onBack:e})=>N.jsx("main",{className:"flex-1 flex flex-col overflow-hidden px-2 sm:px-4 md:px-6 lg:px-40 max-w-7xl mx-auto w-full",children:N.jsxs("div",{className:"min-h-screen p-4 sm:p-6 md:p-8",children:[N.jsx("div",{className:"flex items-center mb-4",children:N.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-3 py-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[N.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:N.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),K.returnTomain]})}),N.jsx(Gt,{onBack:e})]})}),De=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"}));export{ye as A,De as C,ke as K};
