import{j as N,r as E}from"./vendor-react-CMh7LEwM.js";import{X as bt,G as yt,U as kt,b as Dt,n as At}from"./data-CMNPzb4Y.js";import{K as It,C as vt,a as wt,b as Lt,S as Ot}from"./kundali-DAPDwyK4.js";import{V as ot,n as W,Y as Pt,i as B,o as ct,b as Ut,p as Z,q as _t,r as Tt,s as Rt,u as Et,v as jt,R as rt,T as Ct,w as Kt,x as Yt,y as Vt,z as Jt,h as tt,A as Ht,B as Ft,C as lt,D as zt,E as Bt,N as K,t as Gt,F as $t}from"./bikram-Du7PEpk5.js";const Wt="2.1.0",ke=({setIsAboutOpen:e})=>N.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:N.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 rounded-2xl shadow-xl p-6 max-w-sm w-full text-center relative border border-gray-200 dark:border-gray-700",children:[N.jsx("button",{onClick:()=>e(!1),className:"absolute top-3 right-3 p-1.5 rounded-full text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Close",children:N.jsx(bt,{className:"w-5 h-5"})}),N.jsx("h2",{className:"text-xl font-bold mb-2 text-gray-900 dark:text-gray-100",children:"About Bikram Calendar"}),N.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"A modern Nepali Bikram Sambat and Gregorian calendar app built using React and PWA technology."}),N.jsx("span",{children:"App Version: "}),N.jsx("span",{className:"font-mono",children:Wt}),N.jsxs("div",{className:"space-y-3 my-6",children:[N.jsxs("a",{href:"https://github.com/khumnath/nepdate/tree/page",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-3 w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold py-2.5 px-4 rounded-lg transition-colors",children:[N.jsx(yt,{className:"w-5 h-5"}),N.jsx("span",{children:"Source Code"})]}),N.jsxs("a",{href:"https://github.com/khumnath/nepdate/graphs/contributors",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-3 w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold py-2.5 px-4 rounded-lg transition-colors",children:[N.jsx(kt,{className:"w-5 h-5"}),N.jsx("span",{children:"Contributors"})]}),N.jsxs("a",{href:"https://github.com/khumnath/nepdate/issues/new",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-3 w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-semibold py-2.5 px-4 rounded-lg transition-colors",children:[N.jsx(Dt,{className:"w-5 h-5"}),N.jsx("span",{children:"Suggestions and issues"})]})]}),N.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[N.jsxs("p",{className:"mt-1",children:["© 2024–",new Date().getFullYear()," khumnath cg"]}),N.jsx("p",{className:"mt-1",children:"All rights reserved."})]})]})}),b=Math.PI/180,et=180/Math.PI;function s(e,n,t,a,g){return{mlcor:e,mscor:n,fcor:t,dcor:a,lcor:g}}function L(e,n,t,a,g){return{l:e,ml:n,ms:t,f:a,d:g}}const C=[s(0,0,0,4,13.902),s(0,0,0,2,2369.912),s(1,0,0,4,1.979),s(1,0,0,2,191.953),s(1,0,0,0,22639.5),s(1,0,0,-2,-4586.465),s(1,0,0,-4,-38.428),s(1,0,0,-6,-.393),s(0,1,0,4,-.289),s(0,1,0,2,-24.42),s(0,1,0,0,-668.146),s(0,1,0,-2,-165.145),s(0,1,0,-4,-1.877),s(0,0,0,3,.403),s(0,0,0,1,-125.154),s(2,0,0,4,.213),s(2,0,0,2,14.387),s(2,0,0,0,769.016),s(2,0,0,-2,-211.656),s(2,0,0,-4,-30.773),s(2,0,0,-6,-.57),s(1,1,0,2,-2.921),s(1,1,0,0,-109.673),s(1,1,0,-2,-205.962),s(1,1,0,-4,-4.391),s(1,-1,0,4,.283),s(1,-1,0,2,14.577),s(1,-1,0,0,147.687),s(1,-1,0,-2,28.475),s(1,-1,0,-4,.636),s(0,2,0,2,-.189),s(0,2,0,0,-7.486),s(0,2,0,-2,-8.096),s(0,0,2,2,-5.741),s(0,0,2,0,-411.608),s(0,0,2,-2,-55.173),s(0,0,2,-4,.025),s(1,0,0,1,-8.466),s(1,0,0,-1,18.609),s(1,0,0,-3,3.215),s(0,1,0,1,18.023),s(0,1,0,-1,.56),s(3,0,0,2,1.06),s(3,0,0,0,36.124),s(3,0,0,-2,-13.193),s(3,0,0,-4,-1.187),s(3,0,0,-6,-.293),s(2,1,0,2,-.29),s(2,1,0,0,-7.649),s(2,1,0,-2,-8.627),s(2,1,0,-4,-2.74),s(2,-1,0,2,1.181),s(2,-1,0,0,9.703),s(2,-1,0,-2,-2.494),s(2,-1,0,-4,.36),s(1,2,0,0,-1.167),s(1,2,0,-2,-7.412),s(1,2,0,-4,-.311),s(1,-2,0,2,.757),s(1,-2,0,0,2.58),s(1,-2,0,-2,2.533),s(0,3,0,-2,-.344),s(1,0,2,2,-.992),s(1,0,2,0,-45.099),s(1,0,2,-2,-.179),s(1,0,-2,2,-6.382),s(1,0,-2,0,39.528),s(1,0,-2,-2,9.366),s(0,1,2,0,.415),s(0,1,2,-2,-2.152),s(0,1,-2,2,-1.44),s(0,1,-2,-2,.384),s(2,0,0,1,-.586),s(2,0,0,-1,1.75),s(2,0,0,-3,1.225),s(1,1,0,1,1.267),s(1,-1,0,-1,-1.089),s(0,0,2,-1,.584),s(4,0,0,0,1.938),s(4,0,0,-2,-.952),s(3,1,0,0,-.551),s(3,1,0,-2,-.482),s(3,-1,0,0,.681),s(2,0,2,0,-3.996),s(2,0,2,-2,.557),s(2,0,-2,2,-.459),s(2,0,-2,0,-1.298),s(2,0,-2,-2,.538),s(1,1,-2,-2,.426),s(1,-1,2,0,-.304),s(1,-1,-2,2,-.372),s(0,0,4,0,.418),s(2,-1,0,-1,-.352)],z=[L(.127,0,0,0,6),L(-.151,0,2,0,-4),L(-.085,0,0,2,4),L(.15,0,1,0,3),L(-.091,2,1,0,-6),L(-.103,0,3,0,0),L(-.301,1,0,2,-4),L(.202,1,0,-2,-4),L(.137,1,1,0,-1),L(.233,1,1,0,-3),L(-.122,1,-1,0,1),L(-.276,1,-1,0,-3),L(.255,0,0,2,1),L(.254,0,0,2,-3),L(-.1,3,1,0,-4),L(-.183,3,-1,0,-2),L(-.297,2,2,0,-2),L(-.161,2,2,0,-4),L(.197,2,-2,0,0),L(.254,2,-2,0,-2),L(-.25,1,3,0,-2),L(-.123,2,0,2,2),L(.173,2,0,-2,-4),L(.263,1,1,2,0),L(.13,3,0,0,-1),L(.113,5,0,0,0),L(.092,3,0,2,-2)];function k(e){return e=e-Math.floor(e/360)*360,e<0?e+360:e}function mt(e,n){let t=e;for(let a=0;a<7;a++)t=e+n*Math.sin(t);return t}function pt(e){const n=(e-2415020)/36525,t=n*n,a=(279.6967+36000.7689*n+303e-6*t)*b,g=(270.4341639+481267.8831417*n-.0011333333*t)*b,i=(358.4758333+35999.04975*n-15e-5*t)*b,r=(296.1046083+477198.8491083*n+.0091916667*t)*b,u=(259.183275-1934.1420083*n+.0020777778*t)*b;return((-17.2327-.01737*n)*Math.sin(u)+.2088*Math.sin(2*u)-1.2729*Math.sin(2*a)+.1261*Math.sin(i)-.2037*Math.sin(2*g)+.0675*Math.sin(r)-.0497*Math.sin(2*a+i)+.0214*Math.sin(2*a-i)+.0261*Math.sin(2*g+r))/3600}function Y(e){const n=(e-2451545)/36525;return 24.144206-.013972*n-9e-6*n*n}function X(e){let n=e+.5,t=Math.floor(n),a=n-t,g=t;if(t>=2299161){const f=Math.floor((t-186721625e-2)/36524.25);g=t+1+f-Math.floor(f/4)}const i=g+1524,r=Math.floor((i-122.1)/365.25),u=Math.floor(365.25*r),x=Math.floor((i-u)/30.6001),l=i-u-Math.floor(30.6001*x)+a,o=Math.floor(l),d=x<13.5?x-1:x-13,M=d>2.5?r-4716:r-4715,c=(l-o)*24,p=Math.floor(c),h=(c-p)*3600,m=Math.floor(h/60),S=Math.floor(h%60);return new Date(Date.UTC(M,d-1,o,p,m,S))}function Q(e){const n=[124,85,62,48,37,26,16,10,9,10,11,11,12,13,15,16,17,17,13.7,12.5,12,7.5,5.7,7.1,7.9,1.6,-5.4,-5.9,-2.7,10.5,21.2,24,24.3,29.2,33.2,40.2,50.5,56.9,63.8,67,69.4,71],t=X(e),a=t.getUTCFullYear()+t.getUTCMonth()/12+(t.getUTCDate()-1)/365.25,g=(e-2378497)/36525;let i;if(a>=1620&&a<2030){const r=Math.floor((a-1620)/10),u=a-(1620+r*10);i=n[r]+(n[r+1]-n[r])*u/10}else a>=2030?i=71+.5*(a-2030):a>=948?i=25.5*g*g:i=1361.7+320*g+44.3*g*g;return i/3600}function _(e){const n=e-2415020,t=n/36525;let a=270.4337361+13.1763965445281*n-5.86*t*t/3600+.0068*t*t*t/3600,g=350.7374861110581+445267.1142166667*t-t*t*.001436111132303874+18888889e-13*t*t*t;const i=334.329556+1464852252e-2*t/3600-37.17*t*t/3600-.045*t*t*t/3600;let r=358.4758333333334+35999.04974999958*t-t*t*.0001500000059604645-t*t*t*33333333623078e-19,u=k(a-i);const x=259.183275-696291123e-2*t/3600+7.48*t*t/3600+.008*t*t*t/3600;let l=k(a-x),o=b*u,d=b*r,M=b*l,c=b*g,p=0,h=0;const m=1-6832e-11*n,S=1,f=S*S;for(let D=0;D<C.length;D++){const O=C[D].mlcor*o+C[D].mscor*d+C[D].fcor*M+C[D].dcor*c;let y=Math.sin(O);C[D].mscor!=0&&(y*=m,(C[D].mscor==2||C[D].mscor==-2)&&(y*=m)),C[D].fcor!=0&&(y*=f),p+=C[D].lcor*y}for(let D=0;D<z.length;D++){const O=z[D].ml*o+z[D].ms*d+z[D].f*M+z[D].d*c;h+=z[D].l*Math.sin(O)}const A=360*b;let I=.822*Math.sin(A*(.3248-.0017125594*n))+.307*Math.sin(A*(.14905-.0034251187*n))+.348*Math.sin(A*(.68266-.0006873156*n))+.662*Math.sin(A*(.65162+.0365724168*n))+.643*Math.sin(A*(.88098-.0025069941*n))+1.137*Math.sin(A*(.85823+.036448727*n))+.436*Math.sin(A*(.71892+.036217918*n))+.327*Math.sin(A*(.97639+173491e-9*n));return a=a+pt(e)+(p+h+I)/3600,k(a)}function V(e){const n=e-2415020,t=n/36525,a=279.696678+.9856473354*n+1.089*t*t/3600,g=281.220833+1.7192*t+45e-5*t*t,i=k(a-g),r=.01675104-418e-7*t-126e-9*t*t,u=mt(i*b,r),x=2*et*Math.atan(Math.sqrt((1+r)/(1-r))*Math.tan(u/2));let l=a+x-i;const o=(153.23+22518.7541*t)*b,d=(216.57+45037.5082*t)*b,M=(312.69+32964.3577*t)*b,c=(350.74+445267.1142*t-.00144*t*t)*b;let p=.00134*Math.cos(o)+.00154*Math.cos(d)+.002*Math.cos(M)+.00179*Math.sin(c)+.00178*Math.sin((5.4-1.5*t)*b);const h=1.0000002*(1-r*r)/(1+r*Math.cos(x*b)),m=20.4898/3600/h;let S=l+p+pt(e)-m;return k(S)}const Xt=2451545,Qt={MERCURY:{N:[48.3313,324587e-10],i:[7.0047,5e-8],w:[29.1241,420258e-10],a:[.387098,0],e:[.205635,559e-12],M:[168.6562,4.0923344368]},VENUS:{N:[76.6799,24659e-9],i:[3.3946,275e-10],w:[54.891,138374e-10],a:[.72333,0],e:[.006773,-132e-11],M:[48.0052,1.6021302244]},EARTH:{N:[0,0],i:[0,0],w:[102.9376,713e-7],a:[1,0],e:[.016709,-1151e-12],M:[356.047,.985609102]},MARS:{N:[49.5574,211081e-10],i:[1.8497,-178e-10],w:[286.5016,292961e-10],a:[1.523688,0],e:[.093405,2516e-12],M:[18.6021,.5240207766]},JUPITER:{N:[100.4542,276854e-10],i:[1.303,-1557e-10],w:[273.8777,164505e-10],a:[5.20256,0],e:[.048498,1611e-12],M:[19.895,.0830853001]},SATURN:{N:[113.6634,23898e-9],i:[2.4886,-1081e-10],w:[339.3939,297661e-10],a:[9.55475,0],e:[.055546,-9499e-12],M:[316.967,.0334442282]}};function Zt(e,n,t){if(n==="SUN"){const c=V(e),p=k(c-t),h=V(e-.1),m=k(h-t);let S=p-m;S<-180&&(S+=360),S>180&&(S-=360);const f=S/.1;return{planet:n,eclipticLongitude:p,rashi:Math.floor(p/30)+1,degreesInSign:p%30,retrograde:f<0,eclipticLatitude:0,speedLon:f}}if(n==="MOON"){const c=_(e),p=k(c-t),h=_(e-.1),m=k(h-t);let S=p-m;S<-180&&(S+=360),S>180&&(S-=360);const f=S/.1;return{planet:n,eclipticLongitude:p,rashi:Math.floor(p/30)+1,degreesInSign:p%30,retrograde:!1,eclipticLatitude:0,speedLon:f}}if(n==="RAHU"||n==="KETU"){const c=(e-2451545)/36525,p=k(125.04452-1934.136261*c),h=k(218.3164477+481267.88123421*c),m=k(280.46646+36000.76983*c),S=k(h-m),f=k(h-p);let A=-1.274*Math.sin((p-2*S)*b)-.227*Math.sin(2*f*b);const I=k(p+A),D=k(I-t),O=n==="RAHU"?D:k(D+180);return{planet:n,eclipticLongitude:O,rashi:Math.floor(O/30)+1,degreesInSign:O%30,retrograde:!0,eclipticLatitude:0,speedLon:-.0529}}const a=e-Xt,g=(c,p)=>{const h=Qt[p],m=k(h.N[0]+h.N[1]*c),S=h.i[0]+h.i[1]*c,f=k(h.w[0]+h.w[1]*c),A=h.a[0],I=h.e[0]+h.e[1]*c;let D=k(h.M[0]+h.M[1]*c);const O=mt(D*b,I),y=A*(Math.cos(O)-I),P=A*Math.sqrt(1-I*I)*Math.sin(O),v=(Math.cos(f*b)*Math.cos(m*b)-Math.sin(f*b)*Math.sin(m*b)*Math.cos(S*b))*y+(-Math.sin(f*b)*Math.cos(m*b)-Math.cos(f*b)*Math.sin(m*b)*Math.cos(S*b))*P,U=(Math.cos(f*b)*Math.sin(m*b)+Math.sin(f*b)*Math.cos(m*b)*Math.cos(S*b))*y+(-Math.sin(f*b)*Math.sin(m*b)+Math.cos(f*b)*Math.cos(m*b)*Math.cos(S*b))*P,w=Math.sin(f*b)*Math.sin(S*b)*y+Math.cos(f*b)*Math.sin(S*b)*P;return{x:v,y:U,z:w}},i=(c,p)=>{const h=g(c,p),m=g(c,"EARTH"),S=h.x-m.x,f=h.y-m.y,A=h.z-m.z,I=k(Math.atan2(f,S)*et),D=Math.sqrt(S*S+f*f),O=Math.atan2(A,D)*et;return{longitude:I,latitude:O}},{longitude:r,latitude:u}=i(a,n),{longitude:x}=i(a-.1,n),l=k(r-t),o=k(x-t);let d=l-o;d<-180&&(d+=360),d>180&&(d-=360);const M=d/.1;return{planet:n,eclipticLongitude:l,rashi:Math.floor(l/30)+1,degreesInSign:l%30,retrograde:M<0,eclipticLatitude:u,speedLon:M}}function dt(e,n,t){let a={};const g=t?6:12,i=t?60:30,r=Y(e),u=k(V(e)-r),x=k(_(e)-r),l=k(x-u),o=Math.floor(l/g);for(let d=0;d<2;d++){const c=(o+d+i)%i*g;let p=e,h,m,S;for(let A=0;A<5;A++){const I=Y(p),D=V(p),O=_(p),y=D,P=O;if(h=k(y-I),m=k(P-I),S=k(h+c)-m,S>180&&(S-=360),S<-180&&(S+=360),Math.abs(S)<1e-4)break;const U=(V(p+.001)-y)*1e3,T=(_(p+.001)-P)*1e3-U;p+=S/T}const f=X(p+(n-Q(p))/24);d===0?a.start=f:a.end=f}return{start:a.start.toISOString(),end:a.end.toISOString()}}function qt(e,n){let t={};const a=13.333333333333334,g=Y(e),i=Math.floor(k(_(e)-g)/a);for(let r=0;r<2;r++){const x=(i+r+27)%27*a;let l=e,o,d;for(let c=0;c<5;c++){const p=Y(l),m=_(l);if(o=k(m-p),d=x-o,d>180&&(d-=360),d<-180&&(d+=360),Math.abs(d)<1e-4)break;const S=(_(l+.001)-m)*1e3;l+=d/S}const M=X(l+(n-Q(l))/24);r===0?t.start=M:t.end=M}return{start:t.start.toISOString(),end:t.end.toISOString()}}function te(e,n){const t=13.333333333333334,a=t/4,g=Y(e),i=k(_(e)-g),r=Math.floor(i/t),u=i%t,x=Math.floor(u/a);let l={};for(let o=0;o<2;o++){const M=(r*4+x+o)*a;let c=e,p,h;for(let S=0;S<5;S++){const f=Y(c),I=_(c);if(p=k(I-f),h=M-p,h>180&&(h-=360),h<-180&&(h+=360),Math.abs(h)<1e-4)break;const D=(_(c+.001)-I)*1e3;c+=h/D}const m=X(c+(n-Q(c))/24);o===0?l.start=m:l.end=m}return{start:l.start.toISOString(),end:l.end.toISOString()}}function ee(e,n){let t={};const a=13.333333333333334,g=Y(e),i=k(V(e)-g),r=k(_(e)-g),u=Math.floor(k(i+r)/a);for(let x=0;x<2;x++){const o=(u+x+27)%27*a;let d=e,M,c,p,h;for(let S=0;S<5;S++){const f=Y(d),A=V(d),I=_(d),D=A,O=I;if(M=k(D-f),c=k(O-f),p=k(M+c),h=o-p,h>180&&(h-=360),h<-180&&(h+=360),Math.abs(h)<1e-4)break;const y=(V(d+.001)-D)*1e3,P=(_(d+.001)-O)*1e3;d+=h/(P+y)}const m=X(d+(n-Q(d))/24);x===0?t.start=m:t.end=m}return{start:t.start.toISOString(),end:t.end.toISOString()}}function ae(e,n,t){const a=(e-2451545)/36525,g=280.46061837+360.98564736629*(e-2451545)+387933e-9*a*a-a*a*a/3871e4,i=k(g+t),r=23.439291-.0130042*a,u=et*Math.atan2(Math.cos(i*b),-(Math.sin(i*b)*Math.cos(r*b)+Math.tan(n*b)*Math.sin(r*b)));return k(u)}function ne(e){return Array.from({length:12},(n,t)=>({houseNumber:t+1,cuspLongitude:k(e+t*30),sign:Math.floor(k(e+t*30)/30)+1}))}function se(e){const n=13.333333333333334,t=Math.floor(e/n),a=e%n/n,g=["KETU","VENUS","SUN","MOON","MARS","RAHU","JUPITER","SATURN","MERCURY"],i=[7,20,6,10,7,18,16,19,17],r=t%9,u=g[r],x=(1-a)*i[r];return{lord:u,balance:x}}function ut(e,n){const t=["KETU","VENUS","SUN","MOON","MARS","RAHU","JUPITER","SATURN","MERCURY"],a=[7,20,6,10,7,18,16,19,17],g=a.reduce((l,o)=>l+o),i=t.indexOf(e),r=a[i];let u=new Date(n);const x=[];for(let l=0;l<9;l++){const o=(i+l)%9,d=t[o],M=a[o]*r/g,c=new Date(u);c.setDate(c.getDate()+M*365.25),x.push({planet:d,start:u.toISOString(),end:c.toISOString()}),u=c}return x}function xt(e,n){const{lord:t,balance:a}=se(e),g=["KETU","VENUS","SUN","MOON","MARS","RAHU","JUPITER","SATURN","MERCURY"],i=[7,20,6,10,7,18,16,19,17],r=[];let u=new Date(n);const x=new Date(u);x.setDate(x.getDate()+a*365.25),r.push({planet:t,start:u.toISOString(),end:x.toISOString(),subDashas:ut(t,u)}),u=x;let l=(g.indexOf(t)+1)%9;for(let o=0;o<15;o++){const d=g[l],M=i[l],c=new Date(u);c.setDate(c.getDate()+M*365.25),r.push({planet:d,start:u.toISOString(),end:c.toISOString(),subDashas:ut(d,u)}),u=c,l=(l+1)%9}return r}function oe(e,n){return xt(e,n).map(a=>({...a,start:a.start,end:new Date(new Date(a.start).getTime()+(new Date(a.end).getTime()-new Date(a.start).getTime())/3).toISOString()}))}function ht(e,n,t){const a=["SUN","MOON","MARS","MERCURY","SATURN","JUPITER","RAHU","VENUS"],g=[6,15,8,17,10,19,12,21],i=108,r=a.indexOf(e);if(r===-1)return[];let u=new Date(n);const x=[];for(let l=0;l<8;l++){const o=(r+l)%8,d=a[o],M=g[o]*t/i,c=new Date(u);c.setDate(c.getDate()+M*365.25),x.push({planet:d,start:u.toISOString(),end:c.toISOString()}),u=c}return x}function re(e,n,t){const a=Math.floor(e/13.333333333333334),g=["SUN","MOON","MARS","MERCURY","SATURN","JUPITER","RAHU","VENUS"],i=[6,15,8,17,10,19,12,21],r=t==="कृष्ण पक्ष",x=(()=>{if(r){if(a===5)return"SATURN";if(a===6)return"JUPITER";if(a===11)return"RAHU";if(a===15)return"VENUS"}return a>=2&&a<=5?"SUN":a>=6&&a<=8?"MOON":a>=9&&a<=11?"MARS":a>=12&&a<=14?"MERCURY":a>=15&&a<=17?"SATURN":a>=18&&a<=20?"JUPITER":a>=21&&a<=23?"RAHU":"VENUS"})(),l=g.indexOf(x);if(l===-1)return[];const o=360/27,M=(1-e%o/o)*i[l],c=[];let p=new Date(n);const h=new Date(p);h.setDate(h.getDate()+M*365.25),c.push({planet:x,start:p.toISOString(),end:h.toISOString(),subDashas:ht(x,p,i[l])}),p=h;let m=(l+1)%8;for(let S=0;S<10;S++){const f=g[m],A=i[m],I=new Date(p);I.setDate(I.getDate()+A*365.25),c.push({planet:f,start:p.toISOString(),end:I.toISOString(),subDashas:ht(f,p,A)}),p=I,m=(m+1)%8}return c}function ft(e,n,t){const a=["Mangala","Pingala","Dhanya","Bhramari","Bhadrika","Ulka","Siddha","Sankata"],g=[1,2,3,4,5,6,7,8],i=36,r=a.indexOf(e);if(r===-1)return[];let u=new Date(n);const x=[];for(let l=0;l<8;l++){const o=(r+l)%8,d=a[o],M=g[o]*t/i,c=new Date(u);c.setDate(c.getDate()+M*365.25),x.push({planet:d,start:u.toISOString(),end:c.toISOString()}),u=c}return x}function ie(e,n){const t=13.333333333333334,a=Math.floor(e/t),g=["Mangala","Pingala","Dhanya","Bhramari","Bhadrika","Ulka","Siddha","Sankata"],i=[1,2,3,4,5,6,7,8],r=(a+3)%8,u=g[r],x=(1-e%t/t)*i[r],l=[];let o=new Date(n);const d=new Date(o);d.setDate(d.getDate()+x*365.25),l.push({planet:u,start:o.toISOString(),end:d.toISOString(),subDashas:ft(u,o,i[r])}),o=d;let M=(r+1)%8;for(let c=0;c<10;c++){const p=g[M],h=i[M],m=new Date(o);m.setDate(m.getDate()+h*365.25),l.push({planet:p,start:o.toISOString(),end:m.toISOString(),subDashas:ft(p,o,h)}),o=m,M=(M+1)%8}return l}const ce={SUN:1,MOON:2,MARS:10,MERCURY:6,JUPITER:4,VENUS:12,SATURN:7},le={SUN:7,MOON:8,MARS:4,MERCURY:12,JUPITER:10,VENUS:6,SATURN:1};function de(e,n,t){const a=t/12,g=[0,3,6,9],i=[1,4,7,10];let r;g.includes(e)?r=e:i.includes(e)?r=(e+6)%12:r=(e+4)%12;let u=new Date(n);const x=[];for(let l=0;l<12;l++){const o=(r+l)%12,d=new Date(u);d.setDate(d.getDate()+a*365.25),x.push({planet:tt[o],start:u.toISOString(),end:d.toISOString()}),u=d}return x}function ue(e,n,t){const a=Math.floor(n/30),g=(a+1)%2!==0;let i=[];if(g)for(let o=0;o<12;o++)i.push((a+o)%12);else for(let o=0;o<12;o++)i.push((a-o+12)%12);let r=new Date(t);const u=[],x=new Map;e.forEach(o=>{x.set(o.planet,o.rashi-1)});const l=[0,1,2,6,7,8];for(const o of i){const d=o+1,M=rt[d],c=x.get(M);if(c===void 0){u.push({planet:tt[o],start:"N/A",end:"N/A"});continue}let p;l.includes(o)?p=(c-o+12)%12:p=(o-c+12)%12;let h=p;p===0&&(h=12);const m=c+1;ce[M]===m&&(h+=1),le[M]===m&&(h-=1),h>12&&(h=12),h<1&&(h=1);const S=new Date(r),f=new Date(S);if(f.setFullYear(S.getFullYear()+h),isNaN(f.getTime())){u.push({planet:tt[o],start:S.toISOString(),end:"N/A"});continue}u.push({planet:tt[o],start:S.toISOString(),end:f.toISOString(),subDashas:de(o,S,h)}),r=f}return u}function he(e,n,t){const a=r=>{const u=Math.floor(r/30),x=r%30,l=30/e,o=Math.floor(x/l);let d,M=r*e%30;switch(e){case 3:d=(u+[0,4,8][o])%12;break;case 4:d=(u+o*3)%12;break;case 9:const p=Math.floor(u/4);d=([0,4,8][p]+o)%12;break;case 10:d=((u%2===0?u:(u+8)%12)+o)%12;break;case 12:d=(u+o)%12;break;case 60:const f=r*e;d=Math.floor(f/30)%12;break;default:const A=r*e;d=Math.floor(A/30)%12,M=A%30;break}return{sign:d+1,degreesInSign:M}},g=n.map(r=>{const{sign:u,degreesInSign:x}=a(r.eclipticLongitude);return{planet:r.planet,sign:u,degreesInSign:x,retrograde:r.retrograde,nakshatra:r.nakshatra,nakshatraPada:r.nakshatraPada}}),i=a(t);return{name:`D${e}`,planets:g,ascendant:{...i,nakshatra:"",nakshatraPada:0}}}function fe(e,n,t){return{varna:jt[Jt[e]],vasya:Et[ot[e]],yoni:W[Vt[n]],gana:Rt[Yt[n]],nadi:Tt[Kt[n]],tatva:_t[Ct[e]],paya:(e-1)%4===0?Z.Suvarna:(e-2)%4===0?Z.Rajat:(e-3)%4===0?Z.Tamra:Z.Loha,rashiLord:B[rt[e]],lagnesh:B[rt[t]]}}function ge(e,n){const t={varna:0,vasya:0,tara:0,yoni:0,grahaMaitri:0,gana:0,bhakoot:0,nadi:0,total:0},a={ब्राह्मण:4,क्षत्रिय:3,वैश्य:2,शूद्र:1};t.varna=a[e.ashtaKoota.varna]>=a[n.ashtaKoota.varna]?1:0;const g=ot[e.planets.find(f=>f.planet==="MOON").rashi],i=ot[n.planets.find(f=>f.planet==="MOON").rashi];g===i?t.vasya=1:g==="Vanachara"&&i==="Chatushpada"||g==="Dwipada"&&i!=="Jalachara"?t.vasya=2:g==="Jalachara"&&i==="Dwipada"?t.vasya=0:t.vasya=.5;const r=(n.nakshatra.index-e.nakshatra.index+27)%9;t.tara=[0,2,4,6,8].includes(r)?3:1.5;const u=Object.keys(W).find(f=>W[f]===e.ashtaKoota.yoni),x=Object.keys(W).find(f=>W[f]===n.ashtaKoota.yoni);u&&x&&(t.yoni=Pt[u][x]??0);const l=Object.keys(B).find(f=>B[f]===e.ashtaKoota.rashiLord),o=Object.keys(B).find(f=>B[f]===n.ashtaKoota.rashiLord),d=ct[l][o];d==="Friend"?t.grahaMaitri=5:d==="Neutral"?t.grahaMaitri=4:ct[o][l]==="Neutral"?t.grahaMaitri=3:t.grahaMaitri=.5;const M=e.ashtaKoota.gana,c=n.ashtaKoota.gana;M===c||M==="देव"&&c==="मनुष्य"||M==="मनुष्य"&&c==="देव"?t.gana=6:M==="देव"&&c==="राक्षस"||M==="राक्षस"&&c==="देव"?t.gana=1:t.gana=0;const p=e.planets.find(f=>f.planet==="MOON").rashi,h=n.planets.find(f=>f.planet==="MOON").rashi,m=Math.abs(p-h);m===0||m===6?t.bhakoot=0:m===1||m===7?t.bhakoot=7:m===2||m===12?t.bhakoot=0:m===3||m===11||m===4||m===10?t.bhakoot=7:m===5||m===9?t.bhakoot=0:t.bhakoot=7,t.nadi=e.ashtaKoota.nadi===n.ashtaKoota.nadi?0:8,t.total=Object.values(t).reduce((f,A)=>f+A),t.total=Math.round(t.total*2)/2;let S=`कुल ${Ut(t.total)}/३६ गुण मिलान भएको छ। `;return t.total>=28?S+="यो अति उत्तम मिलान हो।":t.total>=24?S+="यो उत्तम मिलान हो।":t.total>=18?S+="यो मध्यम मिलान हो, विवाह गर्न सकिन्छ।":S+="यो मिलान विवाहको लागि उपयुक्त मानिदैन।",{score:t,conclusion:S}}async function it(e){try{const[n,t]=e.datetime.split("T"),[a,g,i]=n.split("-").map(Number),[r,u,x]=t.split(":").map(Number),l=new Date(Date.UTC(a,g-1,i,r,u,x)-e.offset*3600*1e3),o=Ht(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate())+(l.getUTCHours()+l.getUTCMinutes()/60+l.getUTCSeconds()/3600)/24,d=Q(o),M=o+d/24,c=new Date(Date.UTC(a,g-1,i)),p=Ft(c,e.latitude,e.longitude,e.offset),h=Y(M),m=["SUN","MOON","MARS","MERCURY","JUPITER","VENUS","SATURN","RAHU","KETU"].map(J=>{const at=Zt(M,J,h),nt=360/27,Nt=Math.floor(at.eclipticLongitude/nt);return{...at,nakshatra:lt[Nt],nakshatraPada:Math.floor(at.eclipticLongitude%nt/(nt/4))+1}}),f=ae(o,e.latitude,e.longitude),A=ne(f),I=m.find(J=>J.planet==="MOON"),D=m.find(J=>J.planet==="SUN"),O=Math.floor(I.eclipticLongitude/(360/27)),y=dt(M,e.offset,!1),P=qt(M,e.offset),v=te(M,e.offset),U=ee(M,e.offset),w=dt(M,e.offset,!0),T=(I.eclipticLongitude-D.eclipticLongitude+360)%360,R=Math.floor(T/12)+1,j=T<180?"शुक्ल पक्ष":"कृष्ण पक्ष",G=(I.eclipticLongitude+D.eclipticLongitude)%360,St=zt[Math.floor(G/(360/27))],H=Math.floor(T/6);let F;H===0||H===59?F=0:H===56?F=7:H===57?F=8:H===58?F=9:F=(H-1)%7+1;const Mt=Bt[F],$=new Date(e.datetime);return{birthDetails:{...e},calculationMeta:{backend:"Nepdate-astroCalc",version:"2.1.0",ayanamsa:"Lahiri",ayanamsaValue:h,zodiac:"Sidereal",houseSystem:"Whole Sign",calculationUtc:new Date().toISOString()},sunRise:p.sunrise,sunSet:p.sunset,planets:m,ascendant:{longitude:f,sign:Math.floor(f/30)+1,degreesInSign:f%30,nakshatra:lt[Math.floor(f/(360/27))],nakshatraPada:Math.floor(f%(360/27)/(360/27/4))+1},houses:A,nakshatra:{index:O,pada:I.nakshatraPada,nameNepali:I.nakshatra,start:P.start,end:P.end,padaStart:v.start,padaEnd:v.end},tithi:{tithiNumber:R,paksha:j,start:y.start,end:y.end},yoga:{name:St,start:U.start,end:U.end},karana:{name:Mt,start:w.start,end:w.end},dashaSequence:xt(I.eclipticLongitude,$),tribhagiDasha:oe(I.eclipticLongitude,$),yoginiDasha:ie(I.eclipticLongitude,$),ashtottariDasha:re(I.eclipticLongitude,$,j),jaiminiDasha:ue(m,f,$),divisionalCharts:[9,10,3,12,4,60].map(J=>he(J,m,f)),ashtaKoota:fe(I.rashi,O,Math.floor(f/30)+1)}}catch(n){return{error:n instanceof Error?n.message:"Unknown error during calculation."}}}async function me(e,n){const t=await it(e),a=await it(n);if("error"in t||"error"in a)return{error:"Could not calculate kundali for one or both individuals."};const{score:g,conclusion:i}=ge(t,a);return{groom:t,bride:a,score:g,conclusion:i}}const q={getKundali:it,getComparison:me},pe=(e,n)=>At.find(t=>t.latitude===e&&t.longitude===n),st=e=>{const n=new Date(e.datetime),t=Gt(n),a=n.getHours(),g=a>=12?"PM":"AM";let i=a%12;i===0&&(i=12);const r=pe(e.latitude,e.longitude)||{name:`${e.latitude.toFixed(4)}, ${e.longitude.toFixed(4)}`,romanization:"Manual Selection",latitude:e.latitude,longitude:e.longitude,zoneId:e.zoneId,offset:e.offset};return{name:e.name,dateSystem:"BS",bsYear:t.year,bsMonth:t.monthIndex+1,bsDay:t.day,hour:i,minute:n.getMinutes(),second:n.getSeconds(),period:g,location:r}},xe=({mode:e,onModeChange:n})=>{const t=()=>e==="individual"?"translateX(0%)":e==="comparison"?"translateX(100%)":"translateX(200%)";return N.jsxs("div",{className:"relative flex w-full max-w-md mx-auto p-1 bg-gray-200 dark:bg-gray-700 rounded-full mb-6",children:[N.jsx("span",{className:"absolute inset-y-0 w-1/3 bg-blue-500 rounded-full shadow-md transition-transform duration-300 ease-in-out",style:{transform:t()}}),N.jsx("button",{type:"button",onClick:()=>n("individual"),className:`relative w-1/3 py-2 text-sm font-medium transition-colors duration-300 rounded-full ${e==="individual"?"text-white":"text-gray-600 dark:text-gray-300"}`,children:K.individual}),N.jsx("button",{type:"button",onClick:()=>n("comparison"),className:`relative w-1/3 py-2 text-sm font-medium transition-colors duration-300 rounded-full ${e==="comparison"?"text-white":"text-gray-600 dark:text-gray-300"}`,children:K.comparison}),N.jsx("button",{type:"button",onClick:()=>n("saved"),className:`relative w-1/3 py-2 text-sm font-medium transition-colors duration-300 rounded-full ${e==="saved"?"text-white":"text-gray-600 dark:text-gray-300"}`,children:K.saved})]})},gt=({onBack:e})=>{const[n,t]=E.useState("individual"),[a,g]=E.useState(null),[i,r]=E.useState(null),[u,x]=E.useState(!1),[l,o]=E.useState(null),[d,M]=E.useState(!1),[c,p]=E.useState(null),[h,m]=E.useState(Date.now());E.useEffect(()=>{M(n==="saved")},[n]);const S=E.useCallback(()=>{g(null),r(null),x(!1),o(null),p(null)},[]);E.useEffect(()=>{const y=()=>{d?(M(!1),t("individual")):a||i||l?S():e()};return window.addEventListener("popstate",y),()=>window.removeEventListener("popstate",y)},[S,e,a,i,l,d]),E.useEffect(()=>{(a||i||l||d)&&window.history.state?.kundaliState!=="subpage"&&window.history.pushState({kundaliState:"subpage"},"")},[a,i,l,d]);const f=()=>{!a&&!i&&!l&&!d?e():window.history.back()},A=(y,P)=>{try{let v=JSON.parse(localStorage.getItem("savedKundalis")||"[]"),U,w=-1;if(y==="individual"){const R=P;w=v.findIndex(j=>j.type==="individual"&&j.name===R.name),U={id:w!==-1?v[w].id:Date.now(),type:"individual",name:R.name,timestamp:new Date().toISOString(),data:R,defaultValues:st(R)}}else{const{groom:R,bride:j}=P;w=v.findIndex(G=>G.type==="comparison"&&G.groomName===R.name&&G.brideName===j.name),U={id:w!==-1?v[w].id:Date.now(),type:"comparison",groomName:R.name,brideName:j.name,timestamp:new Date().toISOString(),data:{groom:R,bride:j},defaultValues:{groom:st(R),bride:st(j)}}}w!==-1&&v.splice(w,1);const T=[U,...v].slice(0,10);localStorage.setItem("savedKundalis",JSON.stringify(T))}catch(v){console.error("Failed to save data:",v)}},I=y=>{y.type==="individual"?(p({individual:y.defaultValues}),t("individual")):(p({groom:y.defaultValues.groom,bride:y.defaultValues.bride}),t("comparison")),m(Date.now()),M(!1)},D=async y=>{M(!1),x(!0),o(null);const P=new Promise(v=>setTimeout(v,1e3));try{if(y.type==="individual"){const v=q.getKundali(y.data),[U,w]=await Promise.all([P,v]);"error"in w?o(w.error):(g(w),A("individual",y.data))}else{const v=q.getComparison(y.data.groom,y.data.bride),[U,w]=await Promise.all([P,v]);"error"in w?o(w.error):(r(w),A("comparison",y.data))}}catch(v){o(v instanceof Error?v.message:"An unexpected error occurred.")}finally{x(!1)}},O=()=>u?N.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[300px]",children:[N.jsxs("svg",{className:"animate-spin h-10 w-10 text-amber-800 dark:text-amber-400 mb-4",viewBox:"0 0 24 24",children:[N.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),N.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),N.jsx("div",{className:"text-lg font-semibold text-amber-800 dark:text-amber-400",children:K.calculating})]}):l?N.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-900/30 rounded-lg text-center p-4",children:N.jsxs("div",{className:"flex flex-col items-center justify-center",children:[N.jsxs("svg",{className:"w-16 h-16 text-red-500 dark:text-red-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[N.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),N.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),N.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),N.jsx("p",{className:"mt-4 text-xl text-red-700 dark:text-red-400",children:l}),N.jsx("button",{className:"mt-4 text-blue-600 dark:text-blue-400 underline",onClick:f,children:K.returnToForm})]})}):a?N.jsx(It,{data:a,onReturnToForm:f}):i?N.jsx(vt,{result:i,onReturnToForm:f}):N.jsxs(N.Fragment,{children:[N.jsx(xe,{mode:n,onModeChange:y=>{y==="saved"?M(!0):t(y)}}),n==="comparison"?N.jsx(wt,{onCalculate:async(y,P)=>{x(!0),o(null);const v=new Promise(R=>setTimeout(R,1e3)),U=q.getComparison(y,P),[w,T]=await Promise.all([v,U]);"error"in T?o(T.error):(A("comparison",{groom:y,bride:P}),r(T)),x(!1)},isLoading:u,defaultValues:c||{}},h):N.jsx(Lt,{onCalculate:async y=>{x(!0),o(null);const P=new Promise(T=>setTimeout(T,1e3)),v=q.getKundali(y),[U,w]=await Promise.all([P,v]);"error"in w?o(w.error):(A("individual",y),g(w)),x(!1)},isLoading:u,defaultValues:c?.individual},h),d&&N.jsx(Ot,{onClose:()=>{M(!1),t("individual")},onEdit:I,onView:D})]});return N.jsx("main",{className:"flex-1 flex flex-col overflow-hidden px-2 md:px-3 max-w-7xl mx-auto w-full bg-slate-200 text-gray-900 dark:bg-gray-800 dark:text-gray-100 transition-colors",children:N.jsxs("div",{className:"min-h-3 sm:p-6 md:p-6 lg:p-8",children:[N.jsx("div",{className:"flex overflow-hidden print:hidden print:h-0 items-center mb-4",children:N.jsxs("button",{onClick:f,className:"flex return-to-main items-center gap-2 px-3 py-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[N.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:N.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),K.returnTomain]})}),N.jsxs("div",{className:"flex justify-center text-base mb-4 font-bold text-gray-500 dark:text-gray-400",children:[K.Software_name,": ",K.Software_version]}),O()]})})},De=Object.freeze(Object.defineProperty({__proto__:null,KundaliPage:gt,default:gt},Symbol.toStringTag,{value:"Module"})),Se=({onBack:e})=>N.jsx("main",{className:"flex-1 flex flex-col overflow-hidden px-2 sm:px-4 md:px-6 lg:px-40 max-w-7xl mx-auto w-full",children:N.jsxs("div",{className:"min-h-screen p-4 sm:p-6 md:p-8",children:[N.jsx("div",{className:"flex items-center mb-4",children:N.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-3 py-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[N.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:N.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),K.returnTomain]})}),N.jsx($t,{onBack:e})]})}),Ae=Object.freeze(Object.defineProperty({__proto__:null,default:Se},Symbol.toStringTag,{value:"Module"}));export{ke as A,Ae as C,De as K};
